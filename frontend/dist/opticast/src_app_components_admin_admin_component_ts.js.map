{"version":3,"file":"src_app_components_admin_admin_component_ts.js","mappings":"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","sources":["./src/app/components/admin/admin.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { AdminService } from '../../services/admin.service';\nimport { ToastService } from '../../services/toast.service';\nimport { Optica, OpticaCreateRequest, OpticaUpdateRequest } from '../../models/optica.model';\nimport { ApiResponse } from '../../models/api-response.model';\n\n@Component({\n  selector: 'app-admin',\n  standalone: true,\n  imports: [CommonModule, ReactiveFormsModule],\n  template: `\n    <div class=\"container-fluid\">\n      <div class=\"row mb-4\">\n        <div class=\"col-12\">\n          <h2>Administración del Sistema</h2>\n          <p class=\"text-muted\">\n            Gestiona las ópticas registradas en el sistema.\n          </p>\n        </div>\n      </div>\n\n      <!-- Ópticas Section -->\n      <div class=\"row mb-4\">\n        <div class=\"col-12\">\n          <div class=\"d-flex justify-content-between align-items-center\">\n            <h4>Gestión de Ópticas</h4>\n            <button class=\"btn btn-primary\" (click)=\"showCreateOpticaForm()\">\n              <i class=\"fas fa-plus\"></i> Nueva Óptica\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"row\">\n        <div class=\"col-12\">\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <div class=\"table-responsive\">\n                <table class=\"table table-striped\">\n                  <thead>\n                    <tr>\n                      <th>Nombre</th>\n                      <th>Email</th>\n                      <th>Teléfono</th>\n                      <th>Dirección</th>\n                      <th>Estado</th>\n                      <th>Acciones</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr *ngFor=\"let optica of opticas\">\n                      <td>{{ optica.nombre }}</td>\n                      <td>{{ optica.email }}</td>\n                      <td>{{ optica.telefono }}</td>\n                      <td>{{ optica.direccion }}</td>\n                      <td>\n                        <span class=\"badge\" [class]=\"optica.activo ? 'bg-success' : 'bg-danger'\">\n                          {{ optica.activo ? 'Activa' : 'Inactiva' }}\n                        </span>\n                      </td>\n                      <td>\n                        <button class=\"btn btn-sm btn-outline-primary me-1\" (click)=\"editOptica(optica)\">\n                          <i class=\"fas fa-edit\"></i>\n                        </button>\n                        <button class=\"btn btn-sm btn-outline-warning me-1\" (click)=\"resetUserPassword(optica.id)\">\n                          <i class=\"fas fa-key\"></i>\n                        </button>\n                        <button class=\"btn btn-sm btn-outline-danger\" (click)=\"deleteOptica(optica.id)\">\n                          <i class=\"fas fa-trash\"></i>\n                        </button>\n                      </td>\n                    </tr>\n                    <tr *ngIf=\"opticas.length === 0\">\n                      <td colspan=\"6\" class=\"text-center text-muted\">No hay ópticas registradas</td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Create/Edit Optica Modal -->\n    <div class=\"modal fade\" id=\"opticaModal\" tabindex=\"-1\">\n      <div class=\"modal-dialog modal-lg\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\">{{ isEditing ? 'Editar' : 'Nueva' }} Óptica</h5>\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n          </div>\n          <div class=\"modal-body\">\n            <form [formGroup]=\"opticaForm\" (ngSubmit)=\"saveOptica()\">\n              <div class=\"row\">\n                <div class=\"col-md-6\">\n                  <label class=\"form-label\">Nombre *</label>\n                  <input type=\"text\" class=\"form-control\" formControlName=\"nombre\"\n                         [class.is-invalid]=\"opticaForm.get('nombre')?.invalid && opticaForm.get('nombre')?.touched\">\n                  <div class=\"invalid-feedback\" *ngIf=\"opticaForm.get('nombre')?.invalid && opticaForm.get('nombre')?.touched\">\n                    Nombre es requerido\n                  </div>\n                </div>\n                <div class=\"col-md-6\">\n                  <label class=\"form-label\">Email *</label>\n                  <input type=\"email\" class=\"form-control\" formControlName=\"email\"\n                         [class.is-invalid]=\"opticaForm.get('email')?.invalid && opticaForm.get('email')?.touched\">\n                  <div class=\"invalid-feedback\" *ngIf=\"opticaForm.get('email')?.invalid && opticaForm.get('email')?.touched\">\n                    Email válido es requerido\n                  </div>\n                </div>\n              </div>\n              \n              <div class=\"row mt-3\">\n                <div class=\"col-md-6\">\n                  <label class=\"form-label\">Teléfono</label>\n                  <input type=\"tel\" class=\"form-control\" formControlName=\"telefono\">\n                </div>\n                <div class=\"col-md-6\">\n                  <label class=\"form-label\">Estado</label>\n                  <select class=\"form-select\" formControlName=\"activo\">\n                    <option [value]=\"true\">Activa</option>\n                    <option [value]=\"false\">Inactiva</option>\n                  </select>\n                </div>\n              </div>\n              \n              <div class=\"row mt-3\">\n                <div class=\"col-12\">\n                  <label class=\"form-label\">Dirección</label>\n                  <textarea class=\"form-control\" formControlName=\"direccion\" rows=\"2\"></textarea>\n                </div>\n              </div>\n            </form>\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancelar</button>\n            <button type=\"button\" class=\"btn btn-primary\" (click)=\"saveOptica()\" [disabled]=\"opticaForm.invalid\">\n              {{ isEditing ? 'Actualizar' : 'Crear' }}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n  styles: [`\n    .table th {\n      background-color: #f8f9fa;\n      border-top: none;\n    }\n    \n    .btn-sm {\n      padding: 0.25rem 0.5rem;\n      font-size: 0.75rem;\n    }\n  `]\n})\nexport class AdminComponent implements OnInit {\n  opticas: Optica[] = [];\n  opticaForm: FormGroup;\n  isEditing = false;\n  editingOpticaId: number | null = null;\n\n  constructor(\n    private fb: FormBuilder,\n    private adminService: AdminService,\n    private toastService: ToastService\n  ) {\n    this.opticaForm = this.fb.group({\n      nombre: ['', [Validators.required]],\n      email: ['', [Validators.required, Validators.email]],\n      telefono: [''],\n      direccion: [''],\n      activo: [true]\n    });\n  }\n\n  ngOnInit(): void {\n    this.loadOpticas();\n  }\n\n  loadOpticas(): void {\n    this.adminService.getOpticas().subscribe({\n      next: (response) => {\n        // El backend devuelve {success: true, data: [...], message: '...'}\n        if (response.success && response.data) {\n          this.opticas = response.data;\n        } else {\n          this.opticas = [];\n          console.warn('Respuesta inesperada del backend:', response);\n        }\n      },\n      error: (error) => {\n        this.toastService.showError('Error al cargar ópticas');\n        console.error('Error loading opticas:', error);\n        this.opticas = [];\n      }\n    });\n  }\n\n  showCreateOpticaForm(): void {\n    this.isEditing = false;\n    this.editingOpticaId = null;\n    this.opticaForm.reset({ activo: true });\n    this.showModal();\n  }\n\n  editOptica(optica: Optica): void {\n    this.isEditing = true;\n    this.editingOpticaId = optica.id;\n    this.opticaForm.patchValue({\n      nombre: optica.nombre,\n      email: optica.email,\n      telefono: optica.telefono,\n      direccion: optica.direccion,\n      activo: optica.activo\n    });\n    this.showModal();\n  }\n\n  saveOptica(): void {\n    if (this.opticaForm.valid) {\n      const formData = this.opticaForm.value;\n      \n      if (this.isEditing && this.editingOpticaId) {\n        this.adminService.updateOptica(this.editingOpticaId, formData).subscribe({\n          next: (response) => {\n            if (response.success) {\n              this.toastService.showSuccess('Óptica actualizada exitosamente');\n              this.loadOpticas();\n              this.hideModal();\n            } else {\n              this.toastService.showError(response.message || 'Error al actualizar óptica');\n            }\n          },\n          error: (error) => {\n            this.toastService.showError('Error al actualizar óptica');\n            console.error('Error updating optica:', error);\n          }\n        });\n      } else {\n        this.adminService.createOptica(formData).subscribe({\n          next: (response) => {\n            if (response.success) {\n              this.toastService.showSuccess('Óptica creada exitosamente');\n              this.loadOpticas();\n              this.hideModal();\n            } else {\n              this.toastService.showError(response.message || 'Error al crear óptica');\n            }\n          },\n          error: (error) => {\n            this.toastService.showError('Error al crear óptica');\n            console.error('Error creating optica:', error);\n          }\n        });\n      }\n    }\n  }\n\n  deleteOptica(id: number): void {\n    if (confirm('¿Estás seguro de que quieres eliminar esta óptica?')) {\n      this.adminService.deleteOptica(id).subscribe({\n        next: (response) => {\n          if (response.success) {\n            this.toastService.showSuccess('Óptica eliminada exitosamente');\n            this.loadOpticas();\n          } else {\n            this.toastService.showError(response.message || 'Error al eliminar óptica');\n          }\n        },\n        error: (error) => {\n          this.toastService.showError('Error al eliminar óptica');\n          console.error('Error deleting optica:', error);\n        }\n      });\n    }\n  }\n\n  resetUserPassword(opticaId: number): void {\n    if (confirm('¿Estás seguro de que quieres restablecer la contraseña del usuario de esta óptica?')) {\n      this.adminService.resetUserPassword(opticaId).subscribe({\n        next: (response) => {\n          if (response.success) {\n            this.toastService.showSuccess('Contraseña restablecida exitosamente');\n          } else {\n            this.toastService.showError(response.message || 'Error al restablecer contraseña');\n          }\n        },\n        error: (error) => {\n          this.toastService.showError('Error al restablecer contraseña');\n          console.error('Error resetting password:', error);\n        }\n      });\n    }\n  }\n\n  private showModal(): void {\n    const modal = document.getElementById('opticaModal');\n    if (modal) {\n      const bootstrapModal = new (window as any).bootstrap.Modal(modal);\n      bootstrapModal.show();\n    }\n  }\n\n  private hideModal(): void {\n    const modal = document.getElementById('opticaModal');\n    if (modal) {\n      const bootstrapModal = (window as any).bootstrap.Modal.getInstance(modal);\n      if (bootstrapModal) {\n        bootstrapModal.hide();\n      }\n    }\n  }\n}\n\n"],"names":["CommonModule","ReactiveFormsModule","Validators","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","AdminComponent_tr_36_Template_button_click_13_listener","optica_r2","ɵɵrestoreView","_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","editOptica","ɵɵelement","AdminComponent_tr_36_Template_button_click_15_listener","resetUserPassword","id","AdminComponent_tr_36_Template_button_click_17_listener","deleteOptica","ɵɵadvance","ɵɵtextInterpolate","nombre","email","telefono","direccion","ɵɵclassMap","activo","ɵɵtextInterpolate1","AdminComponent","constructor","fb","adminService","toastService","opticas","isEditing","editingOpticaId","opticaForm","group","required","ngOnInit","loadOpticas","getOpticas","subscribe","next","response","success","data","console","warn","error","showError","showCreateOpticaForm","reset","showModal","optica","patchValue","saveOptica","valid","formData","value","updateOptica","showSuccess","hideModal","message","createOptica","confirm","opticaId","modal","document","getElementById","bootstrapModal","window","bootstrap","Modal","show","getInstance","hide","ɵɵdirectiveInject","i1","FormBuilder","i2","AdminService","i3","ToastService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","AdminComponent_Template","rf","ctx","AdminComponent_Template_button_click_12_listener","ɵɵtemplate","AdminComponent_tr_36_Template","AdminComponent_tr_37_Template","AdminComponent_Template_form_ngSubmit_46_listener","AdminComponent_div_52_Template","AdminComponent_div_57_Template","AdminComponent_Template_button_click_79_listener","ɵɵproperty","length","ɵɵclassProp","tmp_4_0","get","invalid","touched","tmp_5_0","tmp_6_0","tmp_7_0","i4","NgForOf","NgIf","ɵNgNoValidate","NgSelectOption","ɵNgSelectMultipleOption","DefaultValueAccessor","SelectControlValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","styles"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}