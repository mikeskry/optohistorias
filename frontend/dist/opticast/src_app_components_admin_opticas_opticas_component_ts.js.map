{"version":3,"file":"src_app_components_admin_opticas_opticas_component_ts.js","mappings":"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","sources":["./src/app/components/admin/opticas/opticas.component.ts","./src/app/components/admin/opticas/opticas.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { Optica } from '../../../models/optica.model';\nimport { AdminService } from '../../../services/admin.service';\nimport { ToastService } from '../../../services/toast.service';\nimport { ConfirmationModalComponent } from '../../shared/confirmation-modal/confirmation-modal.component';\nimport { environment } from '../../../../environments/environment';\nimport { AuthService } from '../../../services/auth.service';\nimport { User } from '../../../models/user.model';\n\n@Component({\n  selector: 'app-opticas',\n  standalone: true,\n  imports: [CommonModule, FormsModule, ConfirmationModalComponent],\n  templateUrl: './opticas.component.html',\n  styleUrls: ['./opticas.component.css']\n})\nexport class OpticasComponent implements OnInit {\n  opticas: Optica[] = [];\n  filteredOpticas: Optica[] = [];\n  showCreateForm = false;\n  showResetPasswordModal = false;\n  showDeactivateModal = false;\n  editingOptica: Optica | null = null;\n  selectedOpticaForReset: Optica | null = null;\n  selectedOpticaForDeactivate: Optica | null = null;\n  formData: any = {};\n  searchTerm: string = '';\n  isDeactivating = false;\n  selectedLogoFile: File | null = null;\n  currentUser: User | null = null;\n\n  constructor(\n    private adminService: AdminService,\n    private toastService: ToastService,\n    private router: Router,\n    private authService: AuthService\n  ) {}\n\n  ngOnInit() {\n    this.loadOpticas();\n    this.authService.currentUser$.subscribe(user => {\n      this.currentUser = user;\n    });\n  }\n\n  // Helper method para determinar si una óptica está activa\n  isOpticaActive(optica: Optica): boolean {\n    return optica.activo === true || optica.activo === '1' || optica.activo === 1;\n  }\n\n  goToDashboard() {\n    this.router.navigate(['/dashboard']);\n  }\n\n  openCreateForm() {\n    this.editingOptica = null;\n    this.formData = {};\n    this.selectedLogoFile = null;\n    this.showCreateForm = true;\n  }\n\n  loadOpticas() {\n    this.adminService.getOpticas().subscribe({\n      next: (response) => {\n        this.opticas = response.data;\n        this.filterOpticas();\n      },\n      error: (error) => {\n        this.toastService.showToast('Error al cargar las ópticas', 'error');\n      }\n    });\n  }\n\n  filterOpticas() {\n    if (!this.searchTerm.trim()) {\n      this.filteredOpticas = [...this.opticas];\n    } else {\n      const term = this.searchTerm.toLowerCase().trim();\n      this.filteredOpticas = this.opticas.filter(optica => \n        optica.nombre?.toLowerCase().includes(term) ||\n        optica.email?.toLowerCase().includes(term) ||\n        optica.telefono?.toLowerCase().includes(term)\n      );\n    }\n  }\n\n  onSearchChange() {\n    this.filterOpticas();\n  }\n\n  clearSearch() {\n    this.searchTerm = '';\n    this.filterOpticas();\n  }\n\n  editOptica(optica: Optica) {\n    this.editingOptica = optica;\n    this.formData = { \n      nombre: optica.nombre,\n      email: optica.email,\n      telefono: optica.telefono || '',\n      direccion: optica.direccion || '',\n      user_nombre: this.currentUser?.user_nombre || optica.user_nombre || '',\n      user_apellidos: this.currentUser?.user_apellidos || optica.user_apellidos || ''\n    };\n    \n    this.selectedLogoFile = null;\n    this.showCreateForm = true;\n  }\n\n  closeForm() {\n    this.showCreateForm = false;\n    this.editingOptica = null;\n    this.formData = {};\n    this.selectedLogoFile = null;\n  }\n\n  saveOptica() {\n    if (this.editingOptica) {\n             // Validar campos requeridos para edición\n       if (!this.formData.nombre || !this.formData.email || \n           !this.formData.user_nombre || !this.formData.user_apellidos) {\n         this.toastService.showToast('Por favor complete todos los campos requeridos', 'error');\n         return;\n       }\n\n      // Validar que el email no esté duplicado (excluyendo la óptica actual)\n      const emailExists = this.opticas.some(optica => \n        optica.email === this.formData.email && optica.id !== this.editingOptica!.id\n      );\n      if (emailExists) {\n        this.toastService.showToast('El email ya existe en el sistema', 'error');\n        return;\n      }\n\n      const formDataToSend = { ...this.formData };\n      if (this.selectedLogoFile) {\n        formDataToSend.logo = this.selectedLogoFile;\n      }\n      \n      this.adminService.updateOptica(this.editingOptica.id, formDataToSend).subscribe({\n        next: () => {\n          this.toastService.showToast('Óptica actualizada correctamente', 'success');\n          this.loadOpticas();\n          this.closeForm();\n        },\n        error: (error) => {\n          console.error('Error updating optica:', error);\n          this.toastService.showToast('Error al actualizar la óptica', 'error');\n        }\n      });\n    } else {\n             // Validar campos requeridos antes de enviar\n       if (!this.formData.nombre || !this.formData.email || \n           !this.formData.user_nombre || !this.formData.user_apellidos) {\n         this.toastService.showToast('Por favor complete todos los campos requeridos', 'error');\n         return;\n       }\n\n       // Validar que el email no esté duplicado\n       const emailExists = this.opticas.some(optica => optica.email === this.formData.email);\n       if (emailExists) {\n         this.toastService.showToast('El email de la óptica ya existe en el sistema', 'error');\n         return;\n       }\n\n      const formDataToSend = { ...this.formData };\n      if (this.selectedLogoFile) {\n        formDataToSend.logo = this.selectedLogoFile;\n      }\n      \n      this.adminService.createOptica(formDataToSend).subscribe({\n        next: () => {\n          this.toastService.showToast('Óptica creada correctamente', 'success');\n          this.loadOpticas();\n          this.closeForm();\n        },\n        error: (error) => {\n          console.error('Error creating optica:', error);\n          console.error('Error response:', error.error);\n          \n          // Manejar errores específicos\n          if (error.error?.message?.includes('Duplicate entry') && error.error?.message?.includes('email')) {\n            this.toastService.showToast('El email ya existe en el sistema. Por favor use un email diferente.', 'error');\n          } else {\n            this.toastService.showToast(`Error al crear la óptica: ${error.error?.message || error.message}`, 'error');\n          }\n        }\n      });\n    }\n  }\n\n  toggleOpticaStatus(optica: Optica) {\n    const isActive = this.isOpticaActive(optica);\n    \n    if (isActive) {\n      // Si está activa, mostrar modal de confirmación para desactivar\n      this.selectedOpticaForDeactivate = optica;\n      this.showDeactivateModal = true;\n    } else {\n      // Si está inactiva, activar directamente\n      this.activateOptica(optica);\n    }\n  }\n\n  openDeactivateModal(optica: Optica) {\n    this.selectedOpticaForDeactivate = optica;\n    this.showDeactivateModal = true;\n  }\n\n  closeDeactivateModal() {\n    this.showDeactivateModal = false;\n    this.selectedOpticaForDeactivate = null;\n    this.isDeactivating = false;\n  }\n\n  confirmDeactivate() {\n    if (!this.selectedOpticaForDeactivate) return;\n    \n    this.isDeactivating = true;\n    this.adminService.updateOptica(this.selectedOpticaForDeactivate.id, { activo: false }).subscribe({\n      next: () => {\n        this.toastService.showToast('Óptica desactivada correctamente', 'success');\n        this.loadOpticas();\n        this.closeDeactivateModal();\n      },\n      error: (error) => {\n        this.toastService.showToast('Error al desactivar la óptica', 'error');\n        this.isDeactivating = false;\n      }\n    });\n  }\n\n  activateOptica(optica: Optica) {\n    this.adminService.updateOptica(optica.id, { activo: true }).subscribe({\n      next: () => {\n        this.toastService.showToast('Óptica activada correctamente', 'success');\n        this.loadOpticas();\n      },\n      error: (error) => {\n        this.toastService.showToast('Error al activar la óptica', 'error');\n      }\n    });\n  }\n\n  openResetPasswordModal(optica: Optica) {\n    this.selectedOpticaForReset = optica;\n    this.showResetPasswordModal = true;\n  }\n\n  closeResetPasswordModal() {\n    this.showResetPasswordModal = false;\n    this.selectedOpticaForReset = null;\n  }\n\n  resetPassword() {\n    if (!this.selectedOpticaForReset) return;\n\n    this.adminService.resetOpticaPassword(this.selectedOpticaForReset.id).subscribe({\n      next: () => {\n        this.toastService.showToast('Contraseña restablecida exitosamente a \"optica123\"', 'success');\n        this.closeResetPasswordModal();\n      },\n      error: (error) => {\n        this.toastService.showToast('Error al restablecer la contraseña', 'error');\n      }\n    });\n  }\n\n  onLogoSelected(event: any): void {\n    const file = event.target.files[0];\n    \n    if (file) {\n      // Validar tamaño del archivo (2MB máximo)\n      if (file.size > 2 * 1024 * 1024) {\n        this.toastService.showToast('El archivo es demasiado grande. Tamaño máximo: 2MB', 'error');\n        return;\n      }\n\n      // Validar tipo de archivo\n      if (!file.type.startsWith('image/')) {\n        this.toastService.showToast('Solo se permiten archivos de imagen', 'error');\n        return;\n      }\n\n      this.selectedLogoFile = file;\n      \n      // Crear vista previa\n      const reader = new FileReader();\n      reader.onload = (e: any) => {\n        this.formData.logoPreview = e.target.result;\n      };\n      reader.readAsDataURL(file);\n    }\n  }\n\n  removeLogo(): void {\n    this.selectedLogoFile = null;\n    this.formData.logoPreview = null;\n    \n    // Limpiar el input de archivo\n    const fileInput = document.querySelector('input[type=\"file\"]') as HTMLInputElement;\n    if (fileInput) {\n      fileInput.value = '';\n    }\n  }\n\n  getLogoUrl(logoPath: string): string {\n    if (!logoPath) {\n      return '';\n    }\n    \n    // Si es una URL completa, devolverla tal como está\n    if (logoPath.startsWith('http')) {\n      return logoPath;\n    }\n    \n    // Si es una ruta relativa, construir la URL completa\n    return `${environment.apiUrl}/uploads/${logoPath}`;\n  }\n\n  onLogoError(event: any): void {\n    console.error('Error al cargar la imagen del logo:', event.target.src);\n  }\n\n  onLogoLoad(event: any): void {\n    // Logo cargado exitosamente\n  }\n}\n\n","<div class=\"container-fluid\">\n  <div class=\"row\">\n    <div class=\"col-12\">\n      <div class=\"d-flex justify-content-between align-items-center mb-3\">\n        <h2>Gestión de Ópticas</h2>\n        <button class=\"btn btn-primary\" (click)=\"openCreateForm()\">\n          <i class=\"bi bi-plus-circle\"></i> Nueva Óptica\n        </button>\n      </div>\n\n      <!-- Buscador -->\n      <div class=\"row mb-3\">\n        <div class=\"col-md-6\">\n          <div class=\"input-group\">\n            <span class=\"input-group-text\">\n              <i class=\"bi bi-search\"></i>\n            </span>\n            <input \n              type=\"text\" \n              class=\"form-control\" \n              placeholder=\"Buscar por nombre, email o teléfono...\" \n              [(ngModel)]=\"searchTerm\"\n              (input)=\"onSearchChange()\"\n            >\n            <button \n              *ngIf=\"searchTerm.trim()\" \n              class=\"btn btn-outline-secondary\" \n              type=\"button\" \n              (click)=\"clearSearch()\"\n              title=\"Limpiar búsqueda\"\n            >\n              <i class=\"bi bi-x\"></i>\n            </button>\n          </div>\n        </div>\n        <div class=\"col-md-6 text-end\">\n          <small class=\"text-muted\">\n            {{ filteredOpticas.length }} de {{ opticas.length }} ópticas\n          </small>\n        </div>\n      </div>\n\n      <!-- Tabla de ópticas -->\n      <div class=\"table-responsive\">\n        <table class=\"table table-striped\">\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>Nombre</th>\n              <th>Email</th>\n              <th>Teléfono</th>\n              <th>Estado</th>\n              <th>Acciones</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr *ngFor=\"let optica of filteredOpticas\">\n              <td>{{ optica.id }}</td>\n              <td>{{ optica.nombre }}</td>\n              <td>{{ optica.email }}</td>\n              <td>{{ optica.telefono || '-' }}</td>\n              <td>\n                                <span class=\"badge\" [class]=\"isOpticaActive(optica) ? 'bg-success' : 'bg-danger'\">\n                  {{ isOpticaActive(optica) ? 'Activa' : 'Desactivada' }}\n                </span>\n              </td>\n              <td>\n                <button class=\"btn btn-sm btn-outline-primary me-2\" (click)=\"editOptica(optica)\" title=\"Editar\">\n                  <i class=\"bi bi-pencil\"></i>\n                </button>\n                <button class=\"btn btn-sm btn-outline-warning me-2\" (click)=\"openResetPasswordModal(optica)\" title=\"Restablecer contraseña\">\n                  <i class=\"bi bi-key\"></i>\n                </button>\n                <button class=\"btn btn-sm btn-outline-danger\" (click)=\"toggleOpticaStatus(optica)\" [title]=\"isOpticaActive(optica) ? 'Desactivar' : 'Activar'\">\n                  <i class=\"bi\" [class]=\"isOpticaActive(optica) ? 'bi-eye-slash' : 'bi-eye'\"></i>\n                </button>\n              </td>\n            </tr>\n            <tr *ngIf=\"filteredOpticas.length === 0 && searchTerm.trim()\">\n              <td colspan=\"6\" class=\"text-center text-muted py-4\">\n                <i class=\"bi bi-search me-2\"></i>\n                No se encontraron ópticas que coincidan con \"{{ searchTerm }}\"\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n\n  <!-- Modal de creación/edición -->\n  <div class=\"modal fade\" [class.show]=\"showCreateForm || editingOptica\" [class.d-block]=\"showCreateForm || editingOptica\" style=\"background-color: rgba(0,0,0,0.5);\" *ngIf=\"showCreateForm || editingOptica\">\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\">{{ editingOptica ? 'Editar' : 'Nueva' }} Óptica</h5>\n          <button type=\"button\" class=\"btn-close\" (click)=\"closeForm()\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <form #opticaForm=\"ngForm\" (ngSubmit)=\"saveOptica()\">\n            <div class=\"mb-3\">\n              <label class=\"form-label\">Nombre *</label>\n              <input type=\"text\" class=\"form-control\" [(ngModel)]=\"formData.nombre\" name=\"nombre\" required>\n            </div>\n            <div class=\"mb-3\">\n              <label class=\"form-label\">Email *</label>\n              <input type=\"email\" class=\"form-control\" [(ngModel)]=\"formData.email\" name=\"email\" required>\n            </div>\n            <div class=\"mb-3\">\n              <label class=\"form-label\">Teléfono</label>\n              <input type=\"tel\" class=\"form-control\" [(ngModel)]=\"formData.telefono\" name=\"telefono\">\n            </div>\n            <div class=\"mb-3\">\n              <label class=\"form-label\">Dirección</label>\n              <textarea class=\"form-control\" [(ngModel)]=\"formData.direccion\" name=\"direccion\" rows=\"2\"></textarea>\n            </div>\n            <div class=\"mb-3\">\n              <label class=\"form-label\">Logo de la Óptica</label>\n              <input type=\"file\" class=\"form-control\" \n                     (change)=\"onLogoSelected($event)\" \n                     accept=\"image/*\"\n                     #logoInput>\n              <div class=\"form-text\">Formatos permitidos: JPG, PNG, GIF. Tamaño máximo: 2MB</div>\n              <div *ngIf=\"formData.logoPreview\" class=\"mt-2\">\n                <img [src]=\"formData.logoPreview\" alt=\"Vista previa del logo\" \n                     class=\"img-thumbnail\" style=\"max-width: 150px; max-height: 150px;\">\n                <button type=\"button\" class=\"btn btn-sm btn-outline-danger ms-2\" (click)=\"removeLogo()\">\n                  <i class=\"bi bi-trash\"></i> Eliminar\n                </button>\n              </div>\n              <div *ngIf=\"editingOptica?.logo && !formData.logoPreview\" class=\"mt-2\">\n                <label class=\"form-label small\">Logo actual:</label>\n                <img [src]=\"getLogoUrl(editingOptica?.logo || '')\" \n                     alt=\"Logo actual\" \n                     class=\"img-thumbnail\" \n                     style=\"max-width: 150px; max-height: 150px;\"\n                     (error)=\"onLogoError($event)\"\n                     (load)=\"onLogoLoad($event)\">\n                <div class=\"form-text\">Si no se muestra la imagen, verifique que el archivo existe en el servidor.</div>\n              </div>\n              \n              <div *ngIf=\"!editingOptica?.logo && editingOptica\" class=\"mt-2\">\n                <div class=\"alert alert-info\">\n                  <i class=\"bi bi-info-circle me-2\"></i>\n                  Esta óptica no tiene logo asignado.\n                </div>\n              </div>\n            </div>\n                         <!-- Campos del usuario -->\n             <div>\n               <hr class=\"my-4\">\n               <h6 class=\"text-muted mb-3\">Datos del Administrador de la Óptica</h6>\n               <div class=\"mb-3\">\n                 <label class=\"form-label\">Nombre del administrador *</label>\n                 <input type=\"text\" class=\"form-control\" [(ngModel)]=\"formData.user_nombre\" name=\"user_nombre\" required>\n               </div>\n               <div class=\"mb-3\">\n                 <label class=\"form-label\">Apellidos del administrador *</label>\n                 <input type=\"text\" class=\"form-control\" [(ngModel)]=\"formData.user_apellidos\" name=\"user_apellidos\" required>\n               </div>\n             </div>\n          </form>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" (click)=\"closeForm()\">Cancelar</button>\n          <button type=\"button\" class=\"btn btn-primary\" (click)=\"saveOptica()\" [disabled]=\"!opticaForm.valid\">\n            {{ editingOptica ? 'Actualizar' : 'Crear' }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Modal de confirmación para reset password -->\n  <div class=\"modal fade\" [class.show]=\"showResetPasswordModal\" [class.d-block]=\"showResetPasswordModal\" style=\"background-color: rgba(0,0,0,0.5);\" *ngIf=\"showResetPasswordModal\">\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\">Restablecer Contraseña</h5>\n          <button type=\"button\" class=\"btn-close\" (click)=\"closeResetPasswordModal()\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <p>¿Está seguro que desea restablecer la contraseña de la óptica <strong>{{ selectedOpticaForReset?.nombre }}</strong>?</p>\n          <p class=\"text-warning\">\n            <i class=\"bi bi-exclamation-triangle me-2\"></i>\n            La contraseña se restablecerá a <strong>optica123</strong> y el usuario deberá cambiarla en su próximo inicio de sesión.\n          </p>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" (click)=\"closeResetPasswordModal()\">Cancelar</button>\n          <button type=\"button\" class=\"btn btn-warning\" (click)=\"resetPassword()\">\n            <i class=\"bi bi-key me-2\"></i>Restablecer Contraseña\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Modal de confirmación para desactivar óptica -->\n  <app-confirmation-modal\n    [isVisible]=\"showDeactivateModal\"\n    title=\"Desactivar Óptica\"\n    [message]=\"'¿Está seguro que desea desactivar la óptica \\'' + (selectedOpticaForDeactivate?.nombre || '') + '\\'?'\"\n    warningMessage=\"Una vez desactivada, la óptica no podrá acceder al sistema hasta que sea reactivada por un administrador.\"\n    confirmText=\"Desactivar\"\n    cancelText=\"Cancelar\"\n    confirmButtonClass=\"btn-danger\"\n    [isLoading]=\"isDeactivating\"\n    (confirm)=\"confirmDeactivate()\"\n    (cancel)=\"closeDeactivateModal()\">\n  </app-confirmation-modal>\n</div>\n"],"names":["CommonModule","FormsModule","ConfirmationModalComponent","environment","i0","ɵɵelementStart","ɵɵlistener","OpticasComponent_button_15_Template_button_click_0_listener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","clearSearch","ɵɵelement","ɵɵelementEnd","ɵɵtext","OpticasComponent_tr_36_Template_button_click_13_listener","optica_r4","_r3","$implicit","editOptica","OpticasComponent_tr_36_Template_button_click_15_listener","openResetPasswordModal","OpticasComponent_tr_36_Template_button_click_17_listener","toggleOpticaStatus","ɵɵadvance","ɵɵtextInterpolate","id","nombre","email","telefono","ɵɵclassMap","isOpticaActive","ɵɵtextInterpolate1","ɵɵproperty","searchTerm","OpticasComponent_div_38_div_33_Template_button_click_2_listener","_r6","removeLogo","formData","logoPreview","ɵɵsanitizeUrl","OpticasComponent_div_38_div_34_Template_img_error_3_listener","$event","_r7","onLogoError","OpticasComponent_div_38_div_34_Template_img_load_3_listener","onLogoLoad","getLogoUrl","editingOptica","logo","OpticasComponent_div_38_Template_button_click_6_listener","_r5","closeForm","OpticasComponent_div_38_Template_form_ngSubmit_8_listener","saveOptica","ɵɵtwoWayListener","OpticasComponent_div_38_Template_input_ngModelChange_13_listener","ɵɵtwoWayBindingSet","OpticasComponent_div_38_Template_input_ngModelChange_17_listener","OpticasComponent_div_38_Template_input_ngModelChange_21_listener","OpticasComponent_div_38_Template_textarea_ngModelChange_25_listener","direccion","OpticasComponent_div_38_Template_input_change_29_listener","onLogoSelected","ɵɵtemplate","OpticasComponent_div_38_div_33_Template","OpticasComponent_div_38_div_34_Template","OpticasComponent_div_38_div_35_Template","OpticasComponent_div_38_Template_input_ngModelChange_43_listener","user_nombre","OpticasComponent_div_38_Template_input_ngModelChange_47_listener","user_apellidos","OpticasComponent_div_38_Template_button_click_49_listener","OpticasComponent_div_38_Template_button_click_51_listener","ɵɵclassProp","showCreateForm","ɵɵtwoWayProperty","opticaForm_r8","valid","OpticasComponent_div_39_Template_button_click_6_listener","_r9","closeResetPasswordModal","OpticasComponent_div_39_Template_button_click_20_listener","OpticasComponent_div_39_Template_button_click_22_listener","resetPassword","showResetPasswordModal","selectedOpticaForReset","OpticasComponent","constructor","adminService","toastService","router","authService","opticas","filteredOpticas","showDeactivateModal","selectedOpticaForDeactivate","isDeactivating","selectedLogoFile","currentUser","ngOnInit","loadOpticas","currentUser$","subscribe","user","optica","activo","goToDashboard","navigate","openCreateForm","getOpticas","next","response","data","filterOpticas","error","showToast","trim","term","toLowerCase","filter","includes","onSearchChange","emailExists","some","formDataToSend","updateOptica","console","createOptica","message","isActive","activateOptica","openDeactivateModal","closeDeactivateModal","confirmDeactivate","resetOpticaPassword","event","file","target","files","size","type","startsWith","reader","FileReader","onload","e","result","readAsDataURL","fileInput","document","querySelector","value","logoPath","apiUrl","src","ɵɵdirectiveInject","i1","AdminService","i2","ToastService","i3","Router","i4","AuthService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","OpticasComponent_Template","rf","ctx","OpticasComponent_Template_button_click_6_listener","OpticasComponent_Template_input_ngModelChange_14_listener","OpticasComponent_Template_input_input_14_listener","OpticasComponent_button_15_Template","OpticasComponent_tr_36_Template","OpticasComponent_tr_37_Template","OpticasComponent_div_38_Template","OpticasComponent_div_39_Template","OpticasComponent_Template_app_confirmation_modal_confirm_40_listener","OpticasComponent_Template_app_confirmation_modal_cancel_40_listener","ɵɵtextInterpolate2","length","i5","NgForOf","NgIf","i6","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","RequiredValidator","NgModel","NgForm","styles"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}