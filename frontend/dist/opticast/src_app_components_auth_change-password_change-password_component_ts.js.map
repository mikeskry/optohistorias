{"version":3,"file":"src_app_components_auth_change-password_change-password_component_ts.js","mappings":"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","sources":["./src/app/components/auth/change-password/change-password.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormBuilder, FormGroup, Validators, ReactiveFormsModule } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { AuthService } from '../../../services/auth.service';\r\nimport { ToastService } from '../../../services/toast.service';\r\n\r\n@Component({\r\n  selector: 'app-change-password',\r\n  standalone: true,\r\n  imports: [CommonModule, ReactiveFormsModule],\r\n  template: `\r\n    <div class=\"container-fluid vh-100 d-flex align-items-center justify-content-center bg-light\">\r\n      <div class=\"card shadow-lg\" style=\"max-width: 500px;\">\r\n        <div class=\"card-header text-center\">\r\n          <h3 class=\"mb-0\">\r\n            <i class=\"fas fa-key text-warning me-2\"></i>\r\n            Cambio de Contraseña Obligatorio\r\n          </h3>\r\n          <p class=\"text-muted mb-0\">Por seguridad, debe cambiar su contraseña</p>\r\n        </div>\r\n        <div class=\"card-body p-4\">\r\n          <form [formGroup]=\"passwordForm\" (ngSubmit)=\"onSubmit()\">\r\n            <div class=\"mb-3\">\r\n              <label for=\"newPassword\" class=\"form-label\">Nueva Contraseña</label>\r\n              <input\r\n                type=\"password\"\r\n                class=\"form-control\"\r\n                id=\"newPassword\"\r\n                formControlName=\"newPassword\"\r\n                [class.is-invalid]=\"isFieldInvalid('newPassword')\"\r\n                placeholder=\"Ingrese su nueva contraseña\"\r\n              >\r\n              <div class=\"invalid-feedback\" *ngIf=\"isFieldInvalid('newPassword')\">\r\n                La nueva contraseña es requerida y debe tener al menos 8 caracteres\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"mb-3\">\r\n              <label for=\"confirmPassword\" class=\"form-label\">Confirmar Nueva Contraseña</label>\r\n              <input\r\n                type=\"password\"\r\n                class=\"form-control\"\r\n                id=\"confirmPassword\"\r\n                formControlName=\"confirmPassword\"\r\n                [class.is-invalid]=\"isFieldInvalid('confirmPassword')\"\r\n                placeholder=\"Confirme su nueva contraseña\"\r\n              >\r\n              <div class=\"invalid-feedback\" *ngIf=\"isFieldInvalid('confirmPassword')\">\r\n                Las contraseñas no coinciden\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"d-grid\">\r\n              <button\r\n                type=\"submit\"\r\n                class=\"btn btn-warning btn-lg\"\r\n                [disabled]=\"passwordForm.invalid || loading\"\r\n              >\r\n                <span *ngIf=\"loading\" class=\"spinner-border spinner-border-sm me-2\"></span>\r\n                {{ loading ? 'Cambiando contraseña...' : 'Cambiar Contraseña' }}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n        <div class=\"card-footer text-center text-muted\">\r\n          <small>Esta acción es obligatoria para continuar</small>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `,\r\n  styles: [`\r\n    .card {\r\n      border: none;\r\n      border-radius: 15px;\r\n    }\r\n    \r\n    .card-header {\r\n      background: linear-gradient(135deg, var(--warning-color), #e0a800);\r\n      color: var(--dark-color);\r\n      border-radius: 15px 15px 0 0 !important;\r\n      padding: 2rem 1.5rem;\r\n    }\r\n    \r\n    .btn-warning {\r\n      background: linear-gradient(135deg, var(--warning-color), #e0a800);\r\n      border: none;\r\n      border-radius: 10px;\r\n      padding: 12px;\r\n      font-weight: 600;\r\n      color: var(--dark-color);\r\n    }\r\n    \r\n    .btn-warning:hover {\r\n      transform: translateY(-2px);\r\n      box-shadow: 0 4px 8px rgba(255,193,7,0.3);\r\n    }\r\n    \r\n    .form-control {\r\n      border-radius: 8px;\r\n      padding: 12px;\r\n      border: 2px solid #e9ecef;\r\n      transition: all 0.3s ease;\r\n    }\r\n    \r\n    .form-control:focus {\r\n      border-color: var(--warning-color);\r\n      box-shadow: 0 0 0 0.2rem rgba(255,193,7,0.25);\r\n    }\r\n  `]\r\n})\r\nexport class ChangePasswordComponent {\r\n  passwordForm: FormGroup;\r\n  loading = false;\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private authService: AuthService,\r\n    private router: Router,\r\n    private toastService: ToastService\r\n  ) {\r\n    this.passwordForm = this.fb.group({\r\n      newPassword: ['', [Validators.required, Validators.minLength(8)]],\r\n      confirmPassword: ['', [Validators.required]]\r\n    }, { validators: this.passwordMatchValidator });\r\n  }\r\n\r\n  onSubmit(): void {\r\n    if (this.passwordForm.valid) {\r\n      this.loading = true;\r\n      \r\n      const request = {\r\n        newPassword: this.passwordForm.get('newPassword')?.value\r\n      };\r\n\r\n      this.authService.changePassword(request).subscribe({\r\n        next: () => {\r\n          this.loading = false;\r\n          this.toastService.showSuccess('Contraseña cambiada exitosamente');\r\n          this.router.navigate(['/dashboard']);\r\n        },\r\n        error: (error) => {\r\n          this.loading = false;\r\n          this.toastService.showError(error.error?.message || 'Error al cambiar contraseña');\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  isFieldInvalid(fieldName: string): boolean {\r\n    const field = this.passwordForm.get(fieldName);\r\n    return !!(field && field.invalid && (field.dirty || field.touched));\r\n  }\r\n\r\n  private passwordMatchValidator(form: FormGroup): {[key: string]: any} | null {\r\n    const newPassword = form.get('newPassword');\r\n    const confirmPassword = form.get('confirmPassword');\r\n    \r\n    if (newPassword && confirmPassword && newPassword.value !== confirmPassword.value) {\r\n      return { 'passwordMismatch': true };\r\n    }\r\n    \r\n    return null;\r\n  }\r\n}\r\n\r\n\r\n\r\n"],"names":["CommonModule","Validators","ReactiveFormsModule","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ChangePasswordComponent","constructor","fb","authService","router","toastService","loading","passwordForm","group","newPassword","required","minLength","confirmPassword","validators","passwordMatchValidator","onSubmit","valid","request","get","value","changePassword","subscribe","next","showSuccess","navigate","error","showError","message","isFieldInvalid","fieldName","field","invalid","dirty","touched","form","ɵɵdirectiveInject","i1","FormBuilder","i2","AuthService","i3","Router","i4","ToastService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","ChangePasswordComponent_Template","rf","ctx","ɵɵlistener","ChangePasswordComponent_Template_form_ngSubmit_9_listener","ɵɵtemplate","ChangePasswordComponent_div_14_Template","ChangePasswordComponent_div_19_Template","ChangePasswordComponent_span_22_Template","ɵɵadvance","ɵɵproperty","ɵɵclassProp","ɵɵtextInterpolate1","i5","NgIf","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","styles"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}