{"version":3,"file":"src_app_components_historias-clinicas_historias-clinicas_component_ts.js","mappings":"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","sources":["./src/app/components/historias-clinicas/historias-clinicas.component.ts","./src/app/components/historias-clinicas/historias-clinicas.component.html","./src/app/directives/axis-input.directive.ts","./src/app/directives/prefix-input.directive.ts","./src/app/services/historias-clinicas.service.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule, FormBuilder, FormGroup, Validators, FormArray } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { HistoriasClinicasService } from '../../services/historias-clinicas.service';\nimport { PacientesService } from '../../services/pacientes.service';\nimport { ToastService } from '../../services/toast.service';\nimport { HistoriaClinica, HistoriaClinicaCreateRequest, HistoriaClinicaOrganizada } from '../../models/historia-clinica.model';\nimport { Paciente } from '../../models/paciente.model';\nimport { AuthService } from '../../services/auth.service';\nimport { User } from '../../models/user.model';\nimport { environment } from '../../../environments/environment';\nimport { PrefixInputDirective } from '../../directives/prefix-input.directive';\nimport { AxisInputDirective } from '../../directives/axis-input.directive';\n\n@Component({\n  selector: 'app-historias-clinicas',\n  standalone: true,\n  imports: [CommonModule, ReactiveFormsModule, PrefixInputDirective, AxisInputDirective],\n  templateUrl: './historias-clinicas.component.html',\n  styleUrls: ['./historias-clinicas.component.css']\n})\nexport class HistoriasClinicasComponent implements OnInit {\n  historias: HistoriaClinica[] = [];\n  pacienteId: number | null = null;\n  pacienteNombre: string = '';\n  paciente: Paciente | null = null;\n  showCreateForm = false;\n  isEditing = false;\n  editingHistoriaId: number | null = null;\n  selectedHistoriaEditable = false;\n  selectedHistoriaEditMessage = '';\n  selectedHistoriaEditableUntil: Date | null = null;\n  selectedHistoriaCreatedAt: Date | null = null;\n  private readonly EDIT_WINDOW_MS = 24 * 60 * 60 * 1000;\n  \n  // Secciones desplegables\n  seccionesDesplegadas: { [key: string]: boolean } = {\n    datosPaciente: true,\n    cuestionario: true,\n    lensometria: false,\n    agudezaVisual: true,\n    examenMotor: false,\n    examenRefractivo: true,\n    examenOftalmologico: false,\n    oftalmoscopia: true,\n    formula: true,\n    observaciones: true,\n    diagnostico: true\n  };\n\n  // Filas ocultas/visibles en tablas (reutilizable)\n  filasVisibles: { [key: string]: boolean } = {\n    agudezaVisualConCorreccion: false,\n    lensometriaFormulaCerca: false,\n    examenRefractivoRetinoscopia: false,\n    // Se pueden agregar ms filas aqu para otras secciones\n  };\n\n  // Orden de navegacin Tab por campo\n  tabOrder: string[] = [\n    // DATOS DEL PACIENTE\n    'fecha_consulta', 'fecha_control', 'hora',\n    \n    // CUESTIONARIO\n    'motivo_consulta', 'tipo_examen', 'anamnesis', 'ultima_valoracion_optometria',\n    'ocupacion_profesion', 'antecedentes_familiares', 'antecedentes_personales', 'antecedentes_laborales',\n    \n    // LENSOMETRA\n    'lensometria_formula_lejos_derecho_esfera', 'lensometria_formula_lejos_derecho_cilindro', 'lensometria_formula_lejos_derecho_eje',\n    'lensometria_formula_lejos_izquierdo_esfera', 'lensometria_formula_lejos_izquierdo_cilindro', 'lensometria_formula_lejos_izquierdo_eje',\n    'lensometria_formula_lejos_derecho_adicion', 'lensometria_formula_lejos_izquierdo_adicion',\n    'lensometria_formula_lejos_derecho_prisma', 'lensometria_formula_lejos_izquierdo_prisma',\n\n    'lensometria_formula_cerca_derecho_esfera', 'lensometria_formula_cerca_izquierdo_esfera', \n    'lensometria_formula_cerca_derecho_cilindro', 'lensometria_formula_cerca_izquierdo_cilindro',\n    'lensometria_formula_cerca_derecho_eje', 'lensometria_formula_cerca_izquierdo_eje',\n    'lensometria_formula_cerca_derecho_adicion', 'lensometria_formula_cerca_izquierdo_adicion',\n    'lensometria_observaciones',\n    \n    // AGUDEZA VISUAL\n    'lejos_test_usado', 'sin_correccion_lejos_derecho', 'sin_correccion_lejos_izquierdo',\n    'sin_correccion_lejos_ambos', 'sin_correccion_cerca_derecho', 'sin_correccion_cerca_izquierdo',\n    'sin_correccion_cerca_observacion',\n    'con_correccion_lejos_derecho', 'con_correccion_lejos_izquierdo', 'con_correccion_lejos_ambos',\n    'con_correccion_cerca_derecho', 'con_correccion_cerca_izquierdo', 'con_correccion_cerca_observacion',\n    'cerca_test_usado', 'pin_hole_lejos_derecho', 'pin_hole_lejos_izquierdo',\n    \n    // EXAMEN MOTOR - Orden segn imagen\n    'examen_motor_mano_dominante', 'examen_motor_ojo_dominante', 'examen_motor_punto_proximo_valor',\n    'examen_motor_dp_lejos', 'examen_motor_dp_cerca', 'examen_motor_ducciones_derecho',\n    'examen_motor_ducciones_izquierdo', 'examen_motor_kappa_derecho', 'examen_motor_kappa_izquierdo',\n    // Versiones ojo derecho (10-15)\n    'versiones-derecho-top-left', 'versiones-derecho-top-right', 'versiones-derecho-left',\n    'versiones-derecho-right', 'versiones-derecho-bottom-left', 'versiones-derecho-bottom-right',\n    // Versiones ojo izquierdo (16-21)\n    'versiones-izquierdo-top-left', 'versiones-izquierdo-top-right', 'versiones-izquierdo-left',\n    'versiones-izquierdo-right', 'versiones-izquierdo-bottom-left', 'versiones-izquierdo-bottom-right',\n    'examen_motor_hirschberg',\n    // Medicin de Desviacin\n    'examen_motor_test_utilizado', \n    'examen_motor_cover_test_con_correccion_horizontal', 'examen_motor_cover_test_con_correccion_vertical',\n    'examen_motor_cover_test_sin_correccion_horizontal', 'examen_motor_cover_test_sin_correccion_vertical',\n    'examen_motor_prisma_con_correccion_horizontal', 'examen_motor_prisma_con_correccion_vertical',\n    'examen_motor_prisma_sin_correccion_horizontal', 'examen_motor_prisma_sin_correccion_vertical',\n    'examen_motor_observaciones',\n    // Test de Color\n    'examen_motor_por_confirmar_derecho', 'examen_motor_por_confirmar_izquierdo',\n    // Estereopsis\n    'examen_motor_estereopsis_tipo', 'examen_motor_estereopsis_resultado',\n    \n    // EXAMEN REFRACTIVO - Orden segn imagen (nmeros escritos)\n    // Keratometria (1-10)\n    'examen_refractivo_keratometria_derecho_plano', 'examen_refractivo_keratometria_derecho_curvo', // 1, 2\n    'examen_refractivo_keratometria_derecho_eje', // 3\n    'examen_refractivo_keratometria_izquierdo_plano', 'examen_refractivo_keratometria_izquierdo_curvo', // 4, 5\n    'examen_refractivo_keratometria_izquierdo_eje', // 6\n    'examen_refractivo_keratometria_derecho_miras', // 7\n    'examen_refractivo_keratometria_izquierdo_miras', // 8\n    'examen_refractivo_keratometria_derecho_corn', // 9\n    'examen_refractivo_keratometria_izquierdo_corn', // 10\n    // Retinoscopia Estatica (11-18)\n    'examen_refractivo_retinoscopia_estatica_derecho_esfera', 'examen_refractivo_retinoscopia_estatica_derecho_cilindro', // 11, 12\n    'examen_refractivo_retinoscopia_estatica_derecho_eje', // 13\n    'examen_refractivo_retinoscopia_estatica_izquierdo_esfera', 'examen_refractivo_retinoscopia_estatica_izquierdo_cilindro', // 14, 15\n    'examen_refractivo_retinoscopia_estatica_izquierdo_eje', // 16\n    'examen_refractivo_retinoscopia_estatica_derecho_sombras', 'examen_refractivo_retinoscopia_estatica_izquierdo_sombras', // 17, 18\n    'toggle-retinoscopia', // 19 - Botn para expandir/colapsar Retinoscopia Dinamica\n    // Items 20-39: Retinoscopia Dinamica, Otra Refraccin y Subjetivo\n    'examen_refractivo_radio_k_1', 'examen_refractivo_radio_k_2',\n    'examen_refractivo_retinoscopia_dinamica_derecho_esfera', 'examen_refractivo_retinoscopia_dinamica_derecho_cilindro',\n    'examen_refractivo_retinoscopia_dinamica_derecho_eje', 'examen_refractivo_retinoscopia_dinamica_izquierdo_esfera',\n    'examen_refractivo_retinoscopia_dinamica_izquierdo_cilindro', 'examen_refractivo_retinoscopia_dinamica_izquierdo_eje',\n    'examen_refractivo_retinoscopia_dinamica_derecho_sombras', 'examen_refractivo_retinoscopia_dinamica_izquierdo_sombras',\n    'examen_refractivo_otra_refraccion_derecho_esfera', 'examen_refractivo_otra_refraccion_derecho_cilindro',\n    'examen_refractivo_otra_refraccion_derecho_eje', 'examen_refractivo_otra_refraccion_izquierdo_esfera',\n    'examen_refractivo_otra_refraccion_izquierdo_cilindro', 'examen_refractivo_otra_refraccion_izquierdo_eje',\n    'examen_refractivo_otra_refraccion_derecho_sombras', 'examen_refractivo_otra_refraccion_izquierdo_sombras',\n    'examen_refractivo_subjetivo_normal', 'examen_refractivo_subjetivo_cycloplejia', 'examen_refractivo_subjetivo_otra',\n    'examen_refractivo_subjetivo_derecho_esfera', 'examen_refractivo_subjetivo_derecho_cilindro', 'examen_refractivo_subjetivo_derecho_eje',\n    'examen_refractivo_subjetivo_izquierdo_esfera', 'examen_refractivo_subjetivo_izquierdo_cilindro', 'examen_refractivo_subjetivo_izquierdo_eje',\n    'examen_refractivo_subjetivo_derecho_av_lejos', 'examen_refractivo_subjetivo_izquierdo_av_lejos',\n    'examen_refractivo_subjetivo_derecho_add', 'examen_refractivo_subjetivo_izquierdo_add',\n    'examen_refractivo_subjetivo_derecho_av_cerca', 'examen_refractivo_subjetivo_izquierdo_av_cerca',\n    'examen_refractivo_subjetivo_derecho_dnp', 'examen_refractivo_subjetivo_izquierdo_dnp', 'examen_refractivo_subjetivo_distancia_al', \n    'examen_refractivo_subjetivo_derecho_estatica', 'examen_refractivo_subjetivo_izquierdo_estatica',\n    'examen_refractivo_subjetivo_derecho_dinamica', 'examen_refractivo_subjetivo_izquierdo_dinamica',\n    'examen_refractivo_subjetivo_derecho_vortice',\n    'examen_refractivo_subjetivo_derecho_mm', 'examen_refractivo_subjetivo_izquierdo_vortice', 'examen_refractivo_subjetivo_izquierdo_mm',\n    \n    // EXAMEN OFTALMOLGICO\n    'examen_oftalmologico_pupila_derecho', 'examen_oftalmologico_pupila_izquierdo',\n    'examen_oftalmologico_parpados_derecho', 'examen_oftalmologico_parpados_izquierdo',\n    'examen_oftalmologico_pelicula_lagrimal_derecho', 'examen_oftalmologico_pelicula_lagrimal_izquierdo',\n    'examen_oftalmologico_conjuntiva_derecho', 'examen_oftalmologico_conjuntiva_izquierdo',\n    'examen_oftalmologico_cornea_derecho', 'examen_oftalmologico_cornea_izquierdo',\n    'examen_oftalmologico_cristalino_derecho', 'examen_oftalmologico_cristalino_izquierdo',\n    'examen_oftalmologico_camara_anterior_derecho', 'examen_oftalmologico_camara_anterior_izquierdo',\n    'examen_oftalmologico_iris_derecho', 'examen_oftalmologico_iris_izquierdo',\n    'examen_oftalmologico_bruckner',\n    \n    // OFTALMOSCOPIA\n    'oftalmoscopia_derecho_excavacion', 'oftalmoscopia_derecho_descripcion',\n    'oftalmoscopia_izquierdo_excavacion', 'oftalmoscopia_izquierdo_descripcion',\n    \n    // FRMULA\n    'formula_derecho_esfera', 'formula_derecho_cilindro', 'formula_derecho_eje',\n    'formula_izquierdo_esfera', 'formula_izquierdo_cilindro', 'formula_izquierdo_eje',\n    'formula_derecho_av_lejos', 'formula_izquierdo_av_lejos',\n    'formula_derecho_add', 'formula_izquierdo_add',\n    'formula_derecho_av_cerca', 'formula_izquierdo_av_cerca',\n    'formula_derecho_dnp', 'formula_izquierdo_dnp',\n    'formula_derecho_recomendacion',\n    \n    // OBSERVACIONES\n    'observaciones',\n    \n    // DIAGNSTICO\n    'diagnostico_codigo_1', 'diagnostico_diagnostico_1', 'diagnostico_descripcion_1',\n    'diagnostico_ojo_1', 'diagnostico_principal_1',\n    'diagnostico_codigo_2', 'diagnostico_diagnostico_2', 'diagnostico_descripcion_2',\n    'diagnostico_ojo_2', 'diagnostico_principal_2',\n    'diagnostico_codigo_3', 'diagnostico_diagnostico_3', 'diagnostico_descripcion_3',\n    'diagnostico_ojo_3', 'diagnostico_principal_3',\n    'diagnostico_codigo_4', 'diagnostico_diagnostico_4', 'diagnostico_descripcion_4',\n    'diagnostico_ojo_4', 'diagnostico_principal_4',\n    'diagnostico_codigo_5', 'diagnostico_diagnostico_5', 'diagnostico_descripcion_5',\n    'diagnostico_ojo_5', 'diagnostico_principal_5'\n  ];\n\n  // Mapa de campos a secciones\n  campoASeccionMap: { [key: string]: string } = {\n    // DATOS DEL PACIENTE\n    'fecha_consulta': 'datosPaciente', 'fecha_control': 'datosPaciente', 'hora': 'datosPaciente',\n    \n    // CUESTIONARIO\n    'motivo_consulta': 'cuestionario', 'tipo_examen': 'cuestionario', 'anamnesis': 'cuestionario',\n    'ultima_valoracion_optometria': 'cuestionario', 'ocupacion_profesion': 'cuestionario',\n    'antecedentes_familiares': 'cuestionario', 'antecedentes_personales': 'cuestionario',\n    'antecedentes_laborales': 'cuestionario',\n    \n    // LENSOMETRA\n    'lensometria_formula_lejos_derecho_esfera': 'lensometria', 'lensometria_formula_lejos_derecho_cilindro': 'lensometria',\n    'lensometria_formula_lejos_derecho_eje': 'lensometria', 'lensometria_formula_lejos_derecho_adicion': 'lensometria',\n    'lensometria_formula_lejos_derecho_prisma': 'lensometria',\n    'lensometria_formula_lejos_izquierdo_esfera': 'lensometria', 'lensometria_formula_lejos_izquierdo_cilindro': 'lensometria',\n    'lensometria_formula_lejos_izquierdo_eje': 'lensometria', 'lensometria_formula_lejos_izquierdo_adicion': 'lensometria',\n    'lensometria_formula_lejos_izquierdo_prisma': 'lensometria',\n    'lensometria_formula_cerca_derecho_esfera': 'lensometria', 'lensometria_formula_cerca_derecho_cilindro': 'lensometria',\n    'lensometria_formula_cerca_derecho_eje': 'lensometria', 'lensometria_formula_cerca_derecho_adicion': 'lensometria',\n    'lensometria_formula_cerca_izquierdo_esfera': 'lensometria', 'lensometria_formula_cerca_izquierdo_cilindro': 'lensometria',\n    'lensometria_formula_cerca_izquierdo_eje': 'lensometria', 'lensometria_formula_cerca_izquierdo_adicion': 'lensometria',\n    'lensometria_observaciones': 'lensometria',\n    \n    // AGUDEZA VISUAL\n    'lejos_test_usado': 'agudezaVisual', 'sin_correccion_lejos_derecho': 'agudezaVisual',\n    'sin_correccion_lejos_izquierdo': 'agudezaVisual', 'sin_correccion_lejos_ambos': 'agudezaVisual',\n    'sin_correccion_cerca_derecho': 'agudezaVisual', 'sin_correccion_cerca_izquierdo': 'agudezaVisual',\n    'sin_correccion_cerca_observacion': 'agudezaVisual',\n    'con_correccion_lejos_derecho': 'agudezaVisual', 'con_correccion_lejos_izquierdo': 'agudezaVisual',\n    'con_correccion_lejos_ambos': 'agudezaVisual', 'con_correccion_cerca_derecho': 'agudezaVisual',\n    'con_correccion_cerca_izquierdo': 'agudezaVisual', 'con_correccion_cerca_observacion': 'agudezaVisual',\n    'cerca_test_usado': 'agudezaVisual', 'pin_hole_lejos_derecho': 'agudezaVisual',\n    'pin_hole_lejos_izquierdo': 'agudezaVisual',\n    \n    // EXAMEN MOTOR\n    'examen_motor_mano_dominante': 'examenMotor', 'examen_motor_ojo_dominante': 'examenMotor',\n    'examen_motor_punto_proximo_valor': 'examenMotor', 'examen_motor_dp_lejos': 'examenMotor',\n    'examen_motor_dp_cerca': 'examenMotor', 'examen_motor_ducciones_derecho': 'examenMotor',\n    'examen_motor_ducciones_izquierdo': 'examenMotor', 'examen_motor_kappa_derecho': 'examenMotor',\n    'examen_motor_kappa_izquierdo': 'examenMotor',\n    // Versiones SVG ojo derecho\n    'versiones-derecho-top-left': 'examenMotor', 'versiones-derecho-top-right': 'examenMotor',\n    'versiones-derecho-left': 'examenMotor', 'versiones-derecho-right': 'examenMotor',\n    'versiones-derecho-bottom-left': 'examenMotor', 'versiones-derecho-bottom-right': 'examenMotor',\n    // Versiones SVG ojo izquierdo\n    'versiones-izquierdo-top-left': 'examenMotor', 'versiones-izquierdo-top-right': 'examenMotor',\n    'versiones-izquierdo-left': 'examenMotor', 'versiones-izquierdo-right': 'examenMotor',\n    'versiones-izquierdo-bottom-left': 'examenMotor', 'versiones-izquierdo-bottom-right': 'examenMotor',\n    'examen_motor_hirschberg': 'examenMotor',\n    'examen_motor_test_utilizado': 'examenMotor', 'examen_motor_cover_test_con_correccion_horizontal': 'examenMotor',\n    'examen_motor_cover_test_con_correccion_vertical': 'examenMotor', 'examen_motor_cover_test_sin_correccion_horizontal': 'examenMotor',\n    'examen_motor_cover_test_sin_correccion_vertical': 'examenMotor', 'examen_motor_prisma_con_correccion_horizontal': 'examenMotor',\n    'examen_motor_prisma_con_correccion_vertical': 'examenMotor', 'examen_motor_prisma_sin_correccion_horizontal': 'examenMotor',\n    'examen_motor_prisma_sin_correccion_vertical': 'examenMotor', 'examen_motor_observaciones': 'examenMotor',\n    'examen_motor_por_confirmar_derecho': 'examenMotor', 'examen_motor_por_confirmar_izquierdo': 'examenMotor',\n    'examen_motor_estereopsis_tipo': 'examenMotor', 'examen_motor_estereopsis_resultado': 'examenMotor',\n    \n    // EXAMEN REFRACTIVO\n    'examen_refractivo_keratometria_derecho_plano': 'examenRefractivo', 'examen_refractivo_keratometria_derecho_curvo': 'examenRefractivo',\n    'examen_refractivo_keratometria_derecho_eje': 'examenRefractivo', 'examen_refractivo_keratometria_derecho_miras': 'examenRefractivo',\n    'examen_refractivo_keratometria_derecho_corn': 'examenRefractivo',\n    'examen_refractivo_keratometria_izquierdo_plano': 'examenRefractivo', 'examen_refractivo_keratometria_izquierdo_curvo': 'examenRefractivo',\n    'examen_refractivo_keratometria_izquierdo_eje': 'examenRefractivo', 'examen_refractivo_keratometria_izquierdo_miras': 'examenRefractivo',\n    'examen_refractivo_keratometria_izquierdo_corn': 'examenRefractivo',\n    'examen_refractivo_retinoscopia_estatica_derecho_esfera': 'examenRefractivo', 'examen_refractivo_retinoscopia_estatica_derecho_cilindro': 'examenRefractivo',\n    'examen_refractivo_retinoscopia_estatica_derecho_eje': 'examenRefractivo', 'examen_refractivo_retinoscopia_estatica_derecho_sombras': 'examenRefractivo',\n    'examen_refractivo_retinoscopia_estatica_izquierdo_esfera': 'examenRefractivo', 'examen_refractivo_retinoscopia_estatica_izquierdo_cilindro': 'examenRefractivo',\n    'examen_refractivo_retinoscopia_estatica_izquierdo_eje': 'examenRefractivo', 'examen_refractivo_retinoscopia_estatica_izquierdo_sombras': 'examenRefractivo',\n    'toggle-retinoscopia': 'examenRefractivo', // Botn para expandir/colapsar Retinoscopia Dinamica\n    // Retinoscopia Dinamica\n    'examen_refractivo_radio_k_1': 'examenRefractivo', 'examen_refractivo_radio_k_2': 'examenRefractivo',\n    'examen_refractivo_retinoscopia_dinamica_derecho_esfera': 'examenRefractivo', 'examen_refractivo_retinoscopia_dinamica_derecho_cilindro': 'examenRefractivo',\n    'examen_refractivo_retinoscopia_dinamica_derecho_eje': 'examenRefractivo', 'examen_refractivo_retinoscopia_dinamica_izquierdo_esfera': 'examenRefractivo',\n    'examen_refractivo_retinoscopia_dinamica_izquierdo_cilindro': 'examenRefractivo', 'examen_refractivo_retinoscopia_dinamica_izquierdo_eje': 'examenRefractivo',\n    'examen_refractivo_retinoscopia_dinamica_derecho_sombras': 'examenRefractivo', 'examen_refractivo_retinoscopia_dinamica_izquierdo_sombras': 'examenRefractivo',\n    // Otra Refraccin\n    'examen_refractivo_otra_refraccion_derecho_esfera': 'examenRefractivo', 'examen_refractivo_otra_refraccion_derecho_cilindro': 'examenRefractivo',\n    'examen_refractivo_otra_refraccion_derecho_eje': 'examenRefractivo', 'examen_refractivo_otra_refraccion_izquierdo_esfera': 'examenRefractivo',\n    'examen_refractivo_otra_refraccion_izquierdo_cilindro': 'examenRefractivo', 'examen_refractivo_otra_refraccion_izquierdo_eje': 'examenRefractivo',\n    'examen_refractivo_otra_refraccion_derecho_sombras': 'examenRefractivo', 'examen_refractivo_otra_refraccion_izquierdo_sombras': 'examenRefractivo',\n    'examen_refractivo_subjetivo_normal': 'examenRefractivo',\n    'examen_refractivo_subjetivo_cycloplejia': 'examenRefractivo', 'examen_refractivo_subjetivo_otra': 'examenRefractivo',\n    'examen_refractivo_subjetivo_distancia_al': 'examenRefractivo', 'examen_refractivo_subjetivo_derecho_esfera': 'examenRefractivo',\n    'examen_refractivo_subjetivo_derecho_cilindro': 'examenRefractivo', 'examen_refractivo_subjetivo_derecho_eje': 'examenRefractivo',\n    'examen_refractivo_subjetivo_derecho_av_lejos': 'examenRefractivo', 'examen_refractivo_subjetivo_derecho_add': 'examenRefractivo',\n    'examen_refractivo_subjetivo_derecho_av_cerca': 'examenRefractivo', 'examen_refractivo_subjetivo_derecho_dnp': 'examenRefractivo',\n    'examen_refractivo_subjetivo_derecho_vortice': 'examenRefractivo', 'examen_refractivo_subjetivo_derecho_mm': 'examenRefractivo',\n    'examen_refractivo_subjetivo_derecho_estatica': 'examenRefractivo', 'examen_refractivo_subjetivo_derecho_dinamica': 'examenRefractivo',\n    'examen_refractivo_subjetivo_izquierdo_esfera': 'examenRefractivo', 'examen_refractivo_subjetivo_izquierdo_cilindro': 'examenRefractivo',\n    'examen_refractivo_subjetivo_izquierdo_eje': 'examenRefractivo', 'examen_refractivo_subjetivo_izquierdo_av_lejos': 'examenRefractivo',\n    'examen_refractivo_subjetivo_izquierdo_add': 'examenRefractivo', 'examen_refractivo_subjetivo_izquierdo_av_cerca': 'examenRefractivo',\n    'examen_refractivo_subjetivo_izquierdo_dnp': 'examenRefractivo', 'examen_refractivo_subjetivo_izquierdo_vortice': 'examenRefractivo',\n    'examen_refractivo_subjetivo_izquierdo_mm': 'examenRefractivo', 'examen_refractivo_subjetivo_izquierdo_estatica': 'examenRefractivo',\n    'examen_refractivo_subjetivo_izquierdo_dinamica': 'examenRefractivo',\n    \n    // EXAMEN OFTALMOLGICO\n    'examen_oftalmologico_pupila_derecho': 'examenOftalmologico', 'examen_oftalmologico_pupila_izquierdo': 'examenOftalmologico',\n    'examen_oftalmologico_parpados_derecho': 'examenOftalmologico', 'examen_oftalmologico_parpados_izquierdo': 'examenOftalmologico',\n    'examen_oftalmologico_pelicula_lagrimal_derecho': 'examenOftalmologico', 'examen_oftalmologico_pelicula_lagrimal_izquierdo': 'examenOftalmologico',\n    'examen_oftalmologico_conjuntiva_derecho': 'examenOftalmologico', 'examen_oftalmologico_conjuntiva_izquierdo': 'examenOftalmologico',\n    'examen_oftalmologico_cornea_derecho': 'examenOftalmologico', 'examen_oftalmologico_cornea_izquierdo': 'examenOftalmologico',\n    'examen_oftalmologico_cristalino_derecho': 'examenOftalmologico', 'examen_oftalmologico_cristalino_izquierdo': 'examenOftalmologico',\n    'examen_oftalmologico_camara_anterior_derecho': 'examenOftalmologico', 'examen_oftalmologico_camara_anterior_izquierdo': 'examenOftalmologico',\n    'examen_oftalmologico_iris_derecho': 'examenOftalmologico', 'examen_oftalmologico_iris_izquierdo': 'examenOftalmologico',\n    'examen_oftalmologico_bruckner': 'examenOftalmologico',\n    \n    // OFTALMOSCOPIA\n    'oftalmoscopia_derecho_excavacion': 'oftalmoscopia', 'oftalmoscopia_derecho_descripcion': 'oftalmoscopia',\n    'oftalmoscopia_izquierdo_excavacion': 'oftalmoscopia', 'oftalmoscopia_izquierdo_descripcion': 'oftalmoscopia',\n    \n    // FRMULA\n    'formula_derecho_esfera': 'formula', 'formula_derecho_cilindro': 'formula', 'formula_derecho_eje': 'formula',\n    'formula_derecho_av_lejos': 'formula', 'formula_derecho_add': 'formula', 'formula_derecho_av_cerca': 'formula',\n    'formula_derecho_dnp': 'formula', 'formula_derecho_recomendacion': 'formula',\n    'formula_izquierdo_esfera': 'formula', 'formula_izquierdo_cilindro': 'formula', 'formula_izquierdo_eje': 'formula',\n    'formula_izquierdo_av_lejos': 'formula', 'formula_izquierdo_add': 'formula', 'formula_izquierdo_av_cerca': 'formula',\n    'formula_izquierdo_dnp': 'formula',\n    \n    // OBSERVACIONES\n    'observaciones': 'observaciones',\n    \n    // DIAGNSTICO\n    'diagnostico_codigo_1': 'diagnostico', 'diagnostico_diagnostico_1': 'diagnostico', 'diagnostico_descripcion_1': 'diagnostico',\n    'diagnostico_ojo_1': 'diagnostico', 'diagnostico_principal_1': 'diagnostico',\n    'diagnostico_codigo_2': 'diagnostico', 'diagnostico_diagnostico_2': 'diagnostico', 'diagnostico_descripcion_2': 'diagnostico',\n    'diagnostico_ojo_2': 'diagnostico', 'diagnostico_principal_2': 'diagnostico',\n    'diagnostico_codigo_3': 'diagnostico', 'diagnostico_diagnostico_3': 'diagnostico', 'diagnostico_descripcion_3': 'diagnostico',\n    'diagnostico_ojo_3': 'diagnostico', 'diagnostico_principal_3': 'diagnostico',\n    'diagnostico_codigo_4': 'diagnostico', 'diagnostico_diagnostico_4': 'diagnostico', 'diagnostico_descripcion_4': 'diagnostico',\n    'diagnostico_ojo_4': 'diagnostico', 'diagnostico_principal_4': 'diagnostico',\n    'diagnostico_codigo_5': 'diagnostico', 'diagnostico_diagnostico_5': 'diagnostico', 'diagnostico_descripcion_5': 'diagnostico',\n    'diagnostico_ojo_5': 'diagnostico', 'diagnostico_principal_5': 'diagnostico'\n  };\n\n  historiaForm: FormGroup;\n\n  constructor(\n    private fb: FormBuilder,\n    private route: ActivatedRoute,\n    private router: Router,\n    private historiasClinicasService: HistoriasClinicasService,\n    private pacientesService: PacientesService,\n    private toastService: ToastService,\n    private authService: AuthService\n  ) {\n    this.historiaForm = this.createForm();\n  }\n\n  ngOnInit(): void {\n    this.route.queryParams.subscribe(params => {\n      this.pacienteId = params['pacienteId'] ? +params['pacienteId'] : null;\n      this.pacienteNombre = params['pacienteNombre'] || '';\n      \n      // Cargar datos del paciente desde los parmetros si estn disponibles\n      this.loadPacienteFromParams(params);\n      \n      if (this.pacienteId) {\n        this.loadHistoriasClinicas();\n        // Solo cargar desde API si no tenemos los datos completos\n        if (!this.paciente) {\n          this.loadPacienteData();\n        }\n      }\n    });\n    \n    // Configurar clculos automticos de keratometra despus de un breve delay\n    setTimeout(() => {\n      this.setupKeratometriaCalculations();\n      this.setupExamenRefractivoSync();\n      this.setupFechaControlSync();\n    }, 100);\n\n  }\n\n  createForm(): FormGroup {\n    return this.fb.group({\n      fecha_consulta: ['', Validators.required],\n      motivo_consulta: [''],\n      fecha_control: [''],\n      hora: [''],\n      \n      // CUESTIONARIO\n      tipo_examen: ['EXAMEN DE OPTROMETRIA'],\n      anamnesis: [''],\n      ultima_valoracion_optometria: [''],\n      ocupacion_profesion: [''],\n      \n      // Antecedentes\n      antecedentes_familiares: ['NO REFIERE'],\n      antecedentes_personales: ['NO REFIERE'],\n      antecedentes_laborales: ['NO REFIERE'],\n      \n      // LENSOMETRA - Campos vacos por defecto excepto Prisma\n      lensometria_formula_lejos_derecho_esfera: [''],\n      lensometria_formula_lejos_derecho_cilindro: [''],\n      lensometria_formula_lejos_derecho_eje: [''],\n      lensometria_formula_lejos_derecho_adicion: [''],\n      lensometria_formula_lejos_derecho_prisma: ['NO APLICA'],\n      lensometria_formula_lejos_izquierdo_esfera: [''],\n      lensometria_formula_lejos_izquierdo_cilindro: [''],\n      lensometria_formula_lejos_izquierdo_eje: [''],\n      lensometria_formula_lejos_izquierdo_adicion: [''],\n      lensometria_formula_lejos_izquierdo_prisma: ['NO APLICA'],\n      \n      lensometria_formula_cerca_derecho_esfera: [''],\n      lensometria_formula_cerca_derecho_cilindro: [''],\n      lensometria_formula_cerca_derecho_eje: [''],\n      lensometria_formula_cerca_derecho_adicion: [''],\n      lensometria_formula_cerca_izquierdo_esfera: [''],\n      lensometria_formula_cerca_izquierdo_cilindro: [''],\n      lensometria_formula_cerca_izquierdo_eje: [''],\n      lensometria_formula_cerca_izquierdo_adicion: [''],\n      \n      lensometria_observaciones: [''],\n      \n      // AGUDEZA VISUAL - Estructura de tabla\n      lejos_test_usado: ['LETRAS'],\n      cerca_test_usado: ['LETRAS'],\n      \n      // Lejos - Sin correccin\n      sin_correccion_lejos_derecho: ['20/'],\n      sin_correccion_lejos_izquierdo: ['20/'],\n      sin_correccion_lejos_ambos: ['20/'],\n      \n      // Lejos - Con correccin\n      con_correccion_lejos_derecho: ['20/'],\n      con_correccion_lejos_izquierdo: ['20/'],\n      con_correccion_lejos_ambos: ['20/'],\n      \n      // Lejos - Pin hole\n      pin_hole_lejos_derecho: ['20/'],\n      pin_hole_lejos_izquierdo: ['20/'],\n      \n      // Cerca - Sin correccin\n      sin_correccion_cerca_derecho: ['M'],\n      sin_correccion_cerca_izquierdo: ['M'],\n      sin_correccion_cerca_ambos: [''],\n      sin_correccion_cerca_observacion: [''],\n      \n      // Cerca - Con correccin\n      con_correccion_cerca_derecho: ['M'],\n      con_correccion_cerca_izquierdo: ['M'],\n      con_correccion_cerca_ambos: [''],\n      con_correccion_cerca_observacion: [''],\n      \n      // Cerca - Pin hole\n      pin_hole_cerca_derecho: ['20/'],\n      pin_hole_cerca_izquierdo: ['20/'],\n      \n      // Campos adicionales del formulario\n      agudeza_visual_cerca_distancia: ['Cerca'],\n      agudeza_visual_cerca_descripcion: ['LETRAS'],\n      agudeza_visual_cerca_derecho_sin_correccion: ['M'],\n      agudeza_visual_cerca_izquierdo_sin_correccion: ['M'],\n      agudeza_visual_cerca_observacion_sin_correccion: [''],\n      agudeza_visual_cerca_derecho_con_correccion: ['M'],\n      agudeza_visual_cerca_izquierdo_con_correccion: ['M'],\n      agudeza_visual_cerca_observacion_con_correccion: [''],\n      \n      \n      // EXAMEN MOTOR - Simplificado\n      examen_motor_mano_dominante: ['DERECHA'],\n      examen_motor_ojo_dominante: ['DERECHO'],\n      examen_motor_punto_proximo_valor: ['1 cm'],\n      examen_motor_dp_lejos: ['30/30'],\n      examen_motor_dp_cerca: ['30/30'],\n      examen_motor_ducciones_derecho: ['Normal'],\n      examen_motor_ducciones_izquierdo: ['Normal'],\n      examen_motor_kappa_derecho: ['0'],\n      examen_motor_kappa_izquierdo: ['0'],\n      examen_motor_hirschberg: ['CENTRADO AMBOS OJOS'],\n      examen_motor_test_utilizado: ['COVER TEST PRISMA'],\n      examen_motor_cover_test_con_correccion_horizontal: ['ORTHO'],\n      examen_motor_cover_test_con_correccion_vertical: ['ORTHO'],\n      examen_motor_cover_test_sin_correccion_horizontal: ['ORTHO'],\n      examen_motor_cover_test_sin_correccion_vertical: ['ORTHO'],\n      examen_motor_prisma_con_correccion_horizontal: ['ORTHO'],\n      examen_motor_prisma_con_correccion_vertical: ['ORTHO'],\n      examen_motor_prisma_sin_correccion_horizontal: ['ORTHO'],\n      examen_motor_prisma_sin_correccion_vertical: ['ORTHO'],\n      examen_motor_observaciones: ['TOMADO CON OBJETO REAL'],\n      examen_motor_por_confirmar_derecho: ['POR CONFIRMAR'],\n      examen_motor_por_confirmar_izquierdo: ['POR CONFIRMAR'],\n      examen_motor_estereopsis_tipo: ['TIMUS'],\n      examen_motor_estereopsis_resultado: ['-'],\n      \n      // FormControls para grficos de versiones - Ojo Derecho\n      examen_motor_versiones_derecho_left: [''],\n      examen_motor_versiones_derecho_right: [''],\n      examen_motor_versiones_derecho_top_left: [''],\n      examen_motor_versiones_derecho_bottom_left: [''],\n      examen_motor_versiones_derecho_top_right: [''],\n      examen_motor_versiones_derecho_bottom_right: [''],\n      \n      // FormControls para grficos de versiones - Ojo Izquierdo\n      examen_motor_versiones_izquierdo_left: [''],\n      examen_motor_versiones_izquierdo_right: [''],\n      examen_motor_versiones_izquierdo_top_left: [''],\n      examen_motor_versiones_izquierdo_bottom_left: [''],\n      examen_motor_versiones_izquierdo_top_right: [''],\n      examen_motor_versiones_izquierdo_bottom_right: [''],\n      \n      // EXAMEN REFRACTIVO - Simplificado\n      examen_refractivo_keratometria_derecho_plano: ['42.00'],\n      examen_refractivo_keratometria_derecho_curvo: ['43.00'],\n      examen_refractivo_keratometria_derecho_eje: ['0'],\n      examen_refractivo_keratometria_derecho_miras: ['REDONDA'],\n      examen_refractivo_keratometria_derecho_corn: ['-4.00'],\n      examen_refractivo_keratometria_izquierdo_plano: ['42.00'],\n      examen_refractivo_keratometria_izquierdo_curvo: ['43.00'],\n      examen_refractivo_keratometria_izquierdo_eje: ['0'],\n      examen_refractivo_keratometria_izquierdo_miras: ['REDONDA'],\n      examen_refractivo_keratometria_izquierdo_corn: ['-6.00'],\n      \n      examen_refractivo_retinoscopia_estatica_derecho_esfera: [''],\n      examen_refractivo_retinoscopia_estatica_derecho_cilindro: [''],\n      examen_refractivo_retinoscopia_estatica_derecho_eje: [''],\n      examen_refractivo_retinoscopia_estatica_derecho_sombras: ['CLARO Y DEFINIDO'],\n      examen_refractivo_retinoscopia_estatica_izquierdo_esfera: [''],\n      examen_refractivo_retinoscopia_estatica_izquierdo_cilindro: [''],\n      examen_refractivo_retinoscopia_estatica_izquierdo_eje: [''],\n      examen_refractivo_retinoscopia_estatica_izquierdo_sombras: ['CLARO Y DEFINIDO'],\n      \n      examen_refractivo_retinoscopia_dinamica_derecho_esfera: [''],\n      examen_refractivo_retinoscopia_dinamica_derecho_cilindro: [''],\n      examen_refractivo_retinoscopia_dinamica_derecho_eje: [''],\n      examen_refractivo_retinoscopia_dinamica_derecho_sombras: ['OMITIDA'],\n      examen_refractivo_retinoscopia_dinamica_izquierdo_esfera: [''],\n      examen_refractivo_retinoscopia_dinamica_izquierdo_cilindro: [''],\n      examen_refractivo_retinoscopia_dinamica_izquierdo_eje: [''],\n      examen_refractivo_retinoscopia_dinamica_izquierdo_sombras: ['OMITIDA'],\n      \n      examen_refractivo_otra_refraccion: [''],\n      examen_refractivo_radio_k_1: ['7.67'],\n      examen_refractivo_radio_k_2: ['7.85'],\n      examen_refractivo_otra_refraccion_derecho_esfera: [''],\n      examen_refractivo_otra_refraccion_derecho_cilindro: [''],\n      examen_refractivo_otra_refraccion_derecho_eje: [''],\n      examen_refractivo_otra_refraccion_derecho_sombras: ['NO APLICA'],\n      examen_refractivo_otra_refraccion_izquierdo_esfera: [''],\n      examen_refractivo_otra_refraccion_izquierdo_cilindro: [''],\n      examen_refractivo_otra_refraccion_izquierdo_eje: [''],\n      examen_refractivo_otra_refraccion_izquierdo_sombras: ['NO APLICA'],\n      \n      examen_refractivo_subjetivo_normal: ['SI'],\n      examen_refractivo_subjetivo_cycloplejia: ['NO'],\n      examen_refractivo_subjetivo_otra: ['-'],\n      examen_refractivo_subjetivo_distancia_al: ['14'],\n      examen_refractivo_subjetivo_derecho_esfera: [''],\n      examen_refractivo_subjetivo_derecho_cilindro: [''],\n      examen_refractivo_subjetivo_derecho_eje: [''],\n      examen_refractivo_subjetivo_derecho_av_lejos: ['20/20'],\n      examen_refractivo_subjetivo_derecho_add: [''],\n      examen_refractivo_subjetivo_derecho_av_cerca: ['0.50 M'],\n      examen_refractivo_subjetivo_derecho_dnp: ['31'],\n      examen_refractivo_subjetivo_derecho_vortice: ['+0.00'],\n      examen_refractivo_subjetivo_derecho_mm: ['-0.00'],\n      examen_refractivo_subjetivo_derecho_estatica: ['20/25'],\n      examen_refractivo_subjetivo_derecho_dinamica: ['20/'],\n      examen_refractivo_subjetivo_izquierdo_esfera: [''],\n      examen_refractivo_subjetivo_izquierdo_cilindro: [''],\n      examen_refractivo_subjetivo_izquierdo_eje: [''],\n      examen_refractivo_subjetivo_izquierdo_av_lejos: ['20/20'],\n      examen_refractivo_subjetivo_izquierdo_add: [''],\n      examen_refractivo_subjetivo_izquierdo_av_cerca: ['0.50 M'],\n      examen_refractivo_subjetivo_izquierdo_dnp: ['31'],\n      examen_refractivo_subjetivo_izquierdo_vortice: ['+0.00'],\n      examen_refractivo_subjetivo_izquierdo_mm: ['-0.00'],\n      examen_refractivo_subjetivo_izquierdo_estatica: ['20/25'],\n      examen_refractivo_subjetivo_izquierdo_dinamica: ['20/'],\n      \n      // FormControls adicionales para EXAMEN REFRACTIVO\n      examen_refractivo_av_retinoscopia_derecho_estatica: ['20/'],\n      examen_refractivo_av_retinoscopia_derecho_dinamica: ['20/'],\n      examen_refractivo_av_retinoscopia_izquierdo_estatica: ['20/'],\n      examen_refractivo_av_retinoscopia_izquierdo_dinamica: ['20/'],\n      \n      // EXAMEN OFTALMOLGICO - Simplificado\n      examen_oftalmologico_pupila_derecho: ['NORMOREACTIVA'],\n      examen_oftalmologico_pupila_izquierdo: ['NORMOREACTIVA'],\n      examen_oftalmologico_parpados_derecho: ['SANOS'],\n      examen_oftalmologico_parpados_izquierdo: ['SANOS'],\n      examen_oftalmologico_pelicula_lagrimal_derecho: ['ESTABLE'],\n      examen_oftalmologico_pelicula_lagrimal_izquierdo: ['ESTABLE'],\n      examen_oftalmologico_conjuntiva_derecho: ['HIPEREMIA 1 GENERALIZADA'],\n      examen_oftalmologico_conjuntiva_izquierdo: ['HIPEREMIA 1 GENERALIZADA'],\n      examen_oftalmologico_cornea_derecho: ['TRANSPARENTE'],\n      examen_oftalmologico_cornea_izquierdo: ['TRANSPARENTE'],\n      examen_oftalmologico_cristalino_derecho: ['TRANSPARENTE'],\n      examen_oftalmologico_cristalino_izquierdo: ['TRANSPARENTE'],\n      examen_oftalmologico_camara_anterior_derecho: ['VAN HERICK IV'],\n      examen_oftalmologico_camara_anterior_izquierdo: ['VAN HERICK IV'],\n      examen_oftalmologico_iris_derecho: ['CAF'],\n      examen_oftalmologico_iris_izquierdo: ['CAF'],\n      examen_oftalmologico_bruckner: ['SIMTRICO'],\n      \n      // OFTALMOSCOPIA - Simplificado\n      oftalmoscopia_derecho_excavacion: [0.3],\n      oftalmoscopia_derecho_descripcion: ['FONDO DE OJO NARANJA ROJIZO, RELACIN ARTERIA VENA 2/3, FIJACIN CENTRAL Y ESTABLE CON BRILLO FOVEOLAR PRESENTE'],\n      oftalmoscopia_izquierdo_excavacion: [0.3],\n      oftalmoscopia_izquierdo_descripcion: ['FONDO DE OJO NARANJA ROJIZO, RELACIN ARTERIA VENA 2/3, FIJACIN CENTRAL Y ESTABLE CON BRILLO FOVEOLAR PRESENTE'],\n      \n      // FRMULA - Simplificado\n      formula_derecho_esfera: ['N'],\n      formula_derecho_cilindro: ['-'],\n      formula_derecho_eje: ['-0'],\n      formula_derecho_av_lejos: ['20/20'],\n      formula_derecho_add: ['+'],\n      formula_derecho_av_cerca: ['0,50 M'],\n      formula_derecho_dnp: [31],\n      formula_derecho_recomendacion: [''],\n      formula_izquierdo_esfera: ['N'],\n      formula_izquierdo_cilindro: ['-'],\n      formula_izquierdo_eje: ['-0'],\n      formula_izquierdo_av_lejos: ['20/20'],\n      formula_izquierdo_add: ['+'],\n      formula_izquierdo_av_cerca: ['0,50 M'],\n      formula_izquierdo_dnp: [31],\n      formula_izquierdo_recomendacion: [''],\n      \n      // OBSERVACIONES\n      observaciones: ['EXAMEN MOTOR NORMAL, EXAMEN ESTERNO NORMAL Y EXAMEN FOTALMOLOGICO NORMAL.'],\n      \n      // DIAGNSTICO - Simplificado\n      diagnostico: this.fb.array([]),\n      diagnostico_seguridad: ['NO'],\n      diagnostico_maltrato: ['no'],\n      diagnostico_maltrato_x: [true],\n      diagnostico_violencia: ['no'],\n      diagnostico_violencia_x: [true],\n      \n      // Campos individuales de diagnstico\n      diagnostico_codigo_1: [''],\n      diagnostico_diagnostico_1: [''],\n      diagnostico_descripcion_1: [''],\n      diagnostico_ojo_1: [''],\n      diagnostico_principal_1: [''],\n      diagnostico_codigo_2: [''],\n      diagnostico_diagnostico_2: [''],\n      diagnostico_descripcion_2: [''],\n      diagnostico_ojo_2: [''],\n      diagnostico_principal_2: [''],\n      diagnostico_codigo_3: [''],\n      diagnostico_diagnostico_3: [''],\n      diagnostico_descripcion_3: [''],\n      diagnostico_ojo_3: [''],\n      diagnostico_principal_3: [''],\n      diagnostico_codigo_4: [''],\n      diagnostico_diagnostico_4: [''],\n      diagnostico_descripcion_4: [''],\n      diagnostico_ojo_4: [''],\n      diagnostico_principal_4: [''],\n      diagnostico_codigo_5: [''],\n      diagnostico_diagnostico_5: [''],\n      diagnostico_descripcion_5: [''],\n      diagnostico_ojo_5: [''],\n      diagnostico_principal_5: ['']\n    });\n  }\n\n  loadHistoriasClinicas(): void {\n    if (!this.pacienteId) return;\n    \n    this.historiasClinicasService.getHistoriasClinicas(this.pacienteId).subscribe({\n      next: (data: any) => {\n        \n        if (Array.isArray(data)) {\n          this.historias = data;\n        } else if (data && Array.isArray(data.data)) {\n          this.historias = data.data;\n        } else {\n          this.historias = [];\n        }\n      },\n      error: (error) => {\n        console.error('Error loading historias clinicas:', error);\n        // Solo mostrar error si no es un error de respuesta vaca\n        if (error.status !== 200) {\n          this.toastService.showError('Error al cargar historias clnicas');\n        } else {\n          // Si es status 200 pero hay error, probablemente es respuesta vaca\n          this.historias = [];\n        }\n      }\n    });\n  }\n\n  loadPacienteFromParams(params: any): void {\n    // Intentar extraer datos del paciente desde los parmetros de la ruta\n    const pacienteData: Partial<Paciente> = {\n      id: this.pacienteId || undefined,\n      nombre: params['pacienteNombre'] || params['nombre'] || '',\n      apellidos: params['pacienteApellidos'] || params['apellidos'] || '',\n      documento: params['pacienteDocumento'] || params['documento'] || '',\n      tipo_documento: params['pacienteTipoDocumento'] || params['tipo_documento'] || '',\n      genero: params['pacienteGenero'] || params['genero'] || '',\n      fecha_nacimiento: params['pacienteFechaNacimiento'] || params['fecha_nacimiento'] || '',\n      telefono: params['pacienteTelefono'] || params['telefono'] || '',\n      email: params['pacienteEmail'] || params['email'] || '',\n      rh: params['pacienteRH'] || params['rh'] || '',\n      nombre_acudiente: params['pacienteAcudiente'] || params['nombre_acudiente'] || ''\n    };\n    \n    // Si tenemos al menos el ID y nombre, crear el objeto paciente\n    if (pacienteData.id && (pacienteData.nombre || pacienteData.apellidos)) {\n      this.paciente = pacienteData as Paciente;\n    }\n  }\n\n  loadPacienteData(): void {\n    if (this.pacienteId) {\n      this.pacientesService.getPacienteById(this.pacienteId).subscribe({\n        next: (response: any) => {\n          // Los datos vienen dentro de un objeto 'data'\n          const paciente = response.data || response;\n          this.paciente = paciente;\n        },\n        error: (error: any) => {\n          console.error('Error al cargar datos del paciente:', error);\n          this.toastService.showError('Error al cargar los datos del paciente');\n        }\n      });\n    }\n  }\n\n  calcularEdad(fechaNacimiento?: string): string {\n    if (!fechaNacimiento) return '-';\n    \n    const hoy = new Date();\n    const nacimiento = new Date(fechaNacimiento);\n    let edad = hoy.getFullYear() - nacimiento.getFullYear();\n    const mes = hoy.getMonth() - nacimiento.getMonth();\n    \n    if (mes < 0 || (mes === 0 && hoy.getDate() < nacimiento.getDate())) {\n      edad--;\n    }\n    \n    return edad >= 0 ? `${edad} aos` : '-';\n  }\n\n  isHistoriaEditable(historia: HistoriaClinica): boolean {\n    const state = this.computeHistoriaEditState(historia);\n    return state.isEditable;\n  }\n\n  getHistoriaEditableSummary(historia: HistoriaClinica): string {\n    const { isEditable, createdAt, editableUntil } = this.computeHistoriaEditState(historia);\n\n    if (isEditable) {\n      if (editableUntil) {\n        return `Editable hasta ${this.formatDateTime(editableUntil)}`;\n      }\n      return 'Editable';\n    }\n\n    if (createdAt) {\n      return `No editable (creada el ${this.formatDateTime(createdAt)})`;\n    }\n\n    return 'No editable (sin fecha de creacin)';\n  }\n\n  private computeHistoriaEditState(historia: HistoriaClinica): { isEditable: boolean; createdAt: Date | null; editableUntil: Date | null } {\n    const createdAt = this.parseDateTimeString(historia.created_at) ?? this.parseDateTimeString(historia.fecha_consulta);\n    const editableUntil = createdAt ? new Date(createdAt.getTime() + this.EDIT_WINDOW_MS) : null;\n    const now = new Date();\n    const isEditable = editableUntil ? now.getTime() <= editableUntil.getTime() : true;\n\n    return { isEditable, createdAt, editableUntil };\n  }\n\n  private parseDateTimeString(dateTime?: string | null): Date | null {\n    if (!dateTime) {\n      return null;\n    }\n\n    const trimmed = dateTime.trim();\n    let parsed = new Date(trimmed);\n    if (!isNaN(parsed.getTime())) {\n      return parsed;\n    }\n\n    parsed = new Date(trimmed.replace(' ', 'T'));\n    if (!isNaN(parsed.getTime())) {\n      return parsed;\n    }\n\n    return null;\n  }\n\n  private formatDateTime(date: Date | null): string {\n    if (!date) {\n      return 'fecha desconocida';\n    }\n\n    return new Intl.DateTimeFormat('es-ES', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    }).format(date);\n  }\n\n  private updateSelectedHistoriaEditState(historia: HistoriaClinica): void {\n    const { isEditable, createdAt, editableUntil } = this.computeHistoriaEditState(historia);\n\n    this.selectedHistoriaEditable = isEditable;\n    this.selectedHistoriaCreatedAt = createdAt;\n    this.selectedHistoriaEditableUntil = editableUntil;\n\n    if (isEditable) {\n      if (editableUntil) {\n        this.selectedHistoriaEditMessage = `Esta historia clnica puede editarse hasta ${this.formatDateTime(editableUntil)}.`;\n      } else {\n        this.selectedHistoriaEditMessage = 'Esta historia clnica se puede editar.';\n      }\n    } else {\n      this.selectedHistoriaEditMessage = '';\n    }\n  }\n\n\n  showCreateFormModal(): void {\n    this.isEditing = false;\n    this.editingHistoriaId = null;\n    this.selectedHistoriaEditable = false;\n    this.selectedHistoriaEditMessage = '';\n    this.selectedHistoriaEditableUntil = null;\n    this.selectedHistoriaCreatedAt = null;\n    \n    // Crear un nuevo formulario para asegurar que est limpio\n    this.historiaForm = this.createForm();\n    \n    // Obtener fecha local (sin conversin UTC para evitar problemas de zona horaria)\n    const fechaConsulta = this.getFechaLocal();\n    const fechaControl = this.calcularFechaControl(fechaConsulta);\n    \n    this.historiaForm.patchValue({\n      fecha_consulta: fechaConsulta,\n      fecha_control: fechaControl,\n      // CUESTIONARIO\n      tipo_examen: 'EXAMEN DE OPTROMETRIA',\n      // Antecedentes\n      antecedentes_familiares: 'NO REFIERE',\n      antecedentes_personales: 'NO REFIERE',\n      antecedentes_laborales: 'NO REFIERE',\n      // LENSOMETRA - Campos vacos por defecto excepto Prisma\n      lensometria_formula_lejos_derecho_esfera: '',\n      lensometria_formula_lejos_derecho_cilindro: '',\n      lensometria_formula_lejos_derecho_eje: '',\n      lensometria_formula_lejos_derecho_adicion: '',\n      lensometria_formula_lejos_derecho_prisma: 'NO APLICA',\n      lensometria_formula_lejos_izquierdo_esfera: '',\n      lensometria_formula_lejos_izquierdo_cilindro: '',\n      lensometria_formula_lejos_izquierdo_eje: '',\n      lensometria_formula_lejos_izquierdo_adicion: '',\n      lensometria_formula_lejos_izquierdo_prisma: 'NO APLICA',\n      lensometria_formula_cerca_derecho_esfera: '',\n      lensometria_formula_cerca_derecho_cilindro: '',\n      lensometria_formula_cerca_derecho_eje: '',\n      lensometria_formula_cerca_derecho_adicion: '',\n      lensometria_formula_cerca_izquierdo_esfera: '',\n      lensometria_formula_cerca_izquierdo_cilindro: '',\n      lensometria_formula_cerca_izquierdo_eje: '',\n      lensometria_formula_cerca_izquierdo_adicion: '',\n      // AGUDEZA VISUAL\n      lejos_test_usado: 'LETRAS',\n      cerca_test_usado: 'LETRAS',\n      sin_correccion_lejos_derecho: '20/',\n      sin_correccion_lejos_izquierdo: '20/',\n      sin_correccion_lejos_ambos: '20/',\n      sin_correccion_cerca_derecho: 'M',\n      sin_correccion_cerca_izquierdo: 'M',\n      sin_correccion_cerca_observacion: '',\n      con_correccion_lejos_derecho: '20/',\n      con_correccion_lejos_izquierdo: '20/',\n      con_correccion_lejos_ambos: '20/',\n      con_correccion_cerca_derecho: 'M',\n      con_correccion_cerca_izquierdo: 'M',\n      con_correccion_cerca_observacion: '',\n      pin_hole_lejos_derecho: '20/',\n      pin_hole_lejos_izquierdo: '20/',\n      agudeza_visual_cerca_distancia: 'Cerca',\n      agudeza_visual_cerca_descripcion: 'LETRAS',\n      agudeza_visual_cerca_sin_correccion_derecho: 'M',\n      agudeza_visual_cerca_sin_correccion_izquierdo: 'M',\n      agudeza_visual_cerca_sin_correccion_ambos: '',\n      agudeza_visual_cerca_con_correccion_derecho: 'M',\n      agudeza_visual_cerca_con_correccion_izquierdo: 'M',\n      agudeza_visual_cerca_con_correccion_ambos: '',\n      agudeza_visual_cerca_pin_hole_derecho: '20/20',\n      agudeza_visual_cerca_pin_hole_izquierdo: '20/20',\n      // Campos adicionales para las filas de cerca\n      // EXAMEN MOTOR\n      examen_motor_mano_dominante: 'DERECHA',\n      examen_motor_ojo_dominante: 'DERECHO',\n      examen_motor_punto_proximo_valor: '1 cm',\n      examen_motor_dp_lejos: '30/30',\n      examen_motor_dp_cerca: '30/30',\n      examen_motor_ducciones_derecho: 'Normal',\n      examen_motor_ducciones_izquierdo: 'Normal',\n      examen_motor_kappa_derecho: '0',\n      examen_motor_kappa_izquierdo: '0',\n      examen_motor_hirschberg: 'CENTRADO AMBOS OJOS',\n      examen_motor_test_utilizado: 'COVER TEST PRISMA',\n      examen_motor_cover_test_con_correccion_horizontal: 'ORTHO',\n      examen_motor_cover_test_con_correccion_vertical: 'ORTHO',\n      examen_motor_cover_test_sin_correccion_horizontal: 'ORTHO',\n      examen_motor_cover_test_sin_correccion_vertical: 'ORTHO',\n      examen_motor_prisma_con_correccion_horizontal: 'ORTHO',\n      examen_motor_prisma_con_correccion_vertical: 'ORTHO',\n      examen_motor_prisma_sin_correccion_horizontal: 'ORTHO',\n      examen_motor_prisma_sin_correccion_vertical: 'ORTHO',\n      examen_motor_observaciones: 'TOMADO CON OBJETO REAL',\n      examen_motor_por_confirmar_derecho: 'POR CONFIRMAR',\n      examen_motor_por_confirmar_izquierdo: 'POR CONFIRMAR',\n      examen_motor_estereopsis_tipo: 'TIMUS',\n      examen_motor_estereopsis_resultado: '-',\n      // EXAMEN REFRACTIVO\n      examen_refractivo_keratometria_derecho_plano: '42.00',\n      examen_refractivo_keratometria_derecho_curvo: '43.00',\n      examen_refractivo_keratometria_derecho_eje: '0',\n      examen_refractivo_keratometria_derecho_miras: 'REDONDA',\n      examen_refractivo_keratometria_derecho_corn: '-4.00',\n      examen_refractivo_keratometria_izquierdo_plano: '42.00',\n      examen_refractivo_keratometria_izquierdo_curvo: '43.00',\n      examen_refractivo_keratometria_izquierdo_eje: '0',\n      examen_refractivo_keratometria_izquierdo_miras: 'REDONDA',\n      examen_refractivo_keratometria_izquierdo_corn: '-6.00',\n      examen_refractivo_retinoscopia_estatica_derecho_esfera: '',\n      examen_refractivo_retinoscopia_estatica_derecho_cilindro: '',\n      examen_refractivo_retinoscopia_estatica_derecho_eje: '',\n      examen_refractivo_retinoscopia_estatica_derecho_sombras: 'CLARO Y DEFINIDO',\n      examen_refractivo_retinoscopia_estatica_izquierdo_esfera: '',\n      examen_refractivo_retinoscopia_estatica_izquierdo_cilindro: '',\n      examen_refractivo_retinoscopia_estatica_izquierdo_eje: '',\n      examen_refractivo_retinoscopia_estatica_izquierdo_sombras: 'CLARO Y DEFINIDO',\n      examen_refractivo_retinoscopia_dinamica_derecho_esfera: '',\n      examen_refractivo_retinoscopia_dinamica_derecho_cilindro: '',\n      examen_refractivo_retinoscopia_dinamica_derecho_eje: '',\n      examen_refractivo_retinoscopia_dinamica_derecho_sombras: 'OMITIDA',\n      examen_refractivo_retinoscopia_dinamica_izquierdo_esfera: '',\n      examen_refractivo_retinoscopia_dinamica_izquierdo_cilindro: '',\n      examen_refractivo_retinoscopia_dinamica_izquierdo_eje: '',\n      examen_refractivo_retinoscopia_dinamica_izquierdo_sombras: 'OMITIDA',\n      examen_refractivo_otra_refraccion: '',\n      examen_refractivo_radio_k_1: '7.67',\n      examen_refractivo_radio_k_2: '7.85',\n      examen_refractivo_otra_refraccion_derecho_esfera: '',\n      examen_refractivo_otra_refraccion_derecho_cilindro: '',\n      examen_refractivo_otra_refraccion_derecho_eje: '',\n      examen_refractivo_otra_refraccion_derecho_sombras: 'NO APLICA',\n      examen_refractivo_otra_refraccion_izquierdo_esfera: '',\n      examen_refractivo_otra_refraccion_izquierdo_cilindro: '',\n      examen_refractivo_otra_refraccion_izquierdo_eje: '',\n      examen_refractivo_otra_refraccion_izquierdo_sombras: 'NO APLICA',\n      examen_refractivo_subjetivo_normal: 'SI',\n      examen_refractivo_subjetivo_cycloplejia: 'NO',\n      examen_refractivo_subjetivo_otra: '-',\n      examen_refractivo_subjetivo_distancia_al: '14',\n      examen_refractivo_subjetivo_derecho_esfera: '',\n      examen_refractivo_subjetivo_derecho_cilindro: '',\n      examen_refractivo_subjetivo_derecho_eje: '',\n      examen_refractivo_subjetivo_derecho_av_lejos: '20/20',\n      examen_refractivo_subjetivo_derecho_add: '',\n      examen_refractivo_subjetivo_derecho_av_cerca: '0.50 M',\n      examen_refractivo_subjetivo_derecho_dnp: '31',\n      examen_refractivo_subjetivo_derecho_vortice: '+0.00',\n      examen_refractivo_subjetivo_derecho_mm: '-0.00',\n      examen_refractivo_subjetivo_derecho_estatica: '20/25',\n      examen_refractivo_subjetivo_derecho_dinamica: '20/',\n      examen_refractivo_subjetivo_izquierdo_esfera: '',\n      examen_refractivo_subjetivo_izquierdo_cilindro: '',\n      examen_refractivo_subjetivo_izquierdo_eje: '',\n      examen_refractivo_subjetivo_izquierdo_av_lejos: '20/20',\n      examen_refractivo_subjetivo_izquierdo_add: '',\n      examen_refractivo_subjetivo_izquierdo_av_cerca: '0.50 M',\n      examen_refractivo_subjetivo_izquierdo_dnp: '31',\n      examen_refractivo_subjetivo_izquierdo_vortice: '+0.00',\n      examen_refractivo_subjetivo_izquierdo_mm: '-0.00',\n      examen_refractivo_subjetivo_izquierdo_estatica: '20/25',\n      examen_refractivo_subjetivo_izquierdo_dinamica: '20/',\n\n      // EXAMEN OFTALMOLGICO\n      examen_oftalmologico_pupila_derecho: 'NORMOREACTIVA',\n      examen_oftalmologico_pupila_izquierdo: 'NORMOREACTIVA',\n      examen_oftalmologico_parpados_derecho: 'SANOS',\n      examen_oftalmologico_parpados_izquierdo: 'SANOS',\n      examen_oftalmologico_pelicula_lagrimal_derecho: 'ESTABLE',\n      examen_oftalmologico_pelicula_lagrimal_izquierdo: 'ESTABLE',\n      examen_oftalmologico_conjuntiva_derecho: 'HIPEREMIA 1 GENERALIZADA',\n      examen_oftalmologico_conjuntiva_izquierdo: 'HIPEREMIA 1 GENERALIZADA',\n      examen_oftalmologico_cornea_derecho: 'TRANSPARENTE',\n      examen_oftalmologico_cornea_izquierdo: 'TRANSPARENTE',\n      examen_oftalmologico_cristalino_derecho: 'TRANSPARENTE',\n      examen_oftalmologico_cristalino_izquierdo: 'TRANSPARENTE',\n      examen_oftalmologico_camara_anterior_derecho: 'VAN HERICK IV',\n      examen_oftalmologico_camara_anterior_izquierdo: 'VAN HERICK IV',\n      examen_oftalmologico_iris_derecho: 'CAF',\n      examen_oftalmologico_iris_izquierdo: 'CAF',\n      examen_oftalmologico_bruckner: 'SIMTRICO',\n      // OFTALMOSCOPIA\n      oftalmoscopia_derecho_excavacion: 0.3,\n      oftalmoscopia_derecho_descripcion: 'FONDO DE OJO NARANJA ROJIZO, RELACIN ARTERIA VENA 2/3, FIJACIN CENTRAL Y ESTABLE CON BRILLO FOVEOLAR PRESENTE',\n      oftalmoscopia_izquierdo_excavacion: 0.3,\n      oftalmoscopia_izquierdo_descripcion: 'FONDO DE OJO NARANJA ROJIZO, RELACIN ARTERIA VENA 2/3, FIJACIN CENTRAL Y ESTABLE CON BRILLO FOVEOLAR PRESENTE',\n      // FRMULA\n      formula_derecho_esfera: 'N',\n      formula_derecho_cilindro: '-',\n      formula_derecho_eje: '-0',\n      formula_derecho_av_lejos: '20/20',\n      formula_derecho_add: '+',\n      formula_derecho_av_cerca: '0,50 M',\n      formula_derecho_dnp: 31,\n      formula_derecho_recomendacion: '',\n      formula_izquierdo_esfera: 'N',\n      formula_izquierdo_cilindro: '-',\n      formula_izquierdo_eje: '-0',\n      formula_izquierdo_av_lejos: '20/20',\n      formula_izquierdo_add: '+',\n      formula_izquierdo_av_cerca: '0,50 M',\n      formula_izquierdo_dnp: 31,\n      formula_izquierdo_recomendacion: '',\n      // OBSERVACIONES\n      observaciones: 'EXAMEN MOTOR NORMAL, EXAMEN ESTERNO NORMAL Y EXAMEN FOTALMOLOGICO NORMAL.',\n      // DIAGNSTICO\n      diagnostico_seguridad: 'NO',\n      diagnostico_maltrato: 'no',\n      diagnostico_maltrato_x: true,\n      diagnostico_violencia: 'no',\n      diagnostico_violencia_x: true,\n      \n      // Campos individuales de diagnstico\n      diagnostico_codigo_1: '',\n      diagnostico_diagnostico_1: '',\n      diagnostico_descripcion_1: '',\n      diagnostico_ojo_1: '',\n      diagnostico_principal_1: '',\n      diagnostico_codigo_2: '',\n      diagnostico_diagnostico_2: '',\n      diagnostico_descripcion_2: '',\n      diagnostico_ojo_2: '',\n      diagnostico_principal_2: '',\n      diagnostico_codigo_3: '',\n      diagnostico_diagnostico_3: '',\n      diagnostico_descripcion_3: '',\n      diagnostico_ojo_3: '',\n      diagnostico_principal_3: '',\n      diagnostico_codigo_4: '',\n      diagnostico_diagnostico_4: '',\n      diagnostico_descripcion_4: '',\n      diagnostico_ojo_4: '',\n      diagnostico_principal_4: '',\n      diagnostico_codigo_5: '',\n      diagnostico_diagnostico_5: '',\n      diagnostico_descripcion_5: '',\n      diagnostico_ojo_5: '',\n      diagnostico_principal_5: ''\n    });\n    this.initializeDiagnosticoArray();\n    this.showCreateForm = true;\n    \n    // Cargar datos del paciente\n    this.loadPacienteData();\n    \n    // Configurar clculos automticos de keratometra despus de crear el formulario\n    setTimeout(() => {\n      this.setupKeratometriaCalculations();\n      this.setupExamenRefractivoSync();\n      // Sincronizar valores del formulario al SVG para nueva historia\n      this.syncVersionesToSVG();\n    }, 100);\n  }\n\n  editHistoria(historia: HistoriaClinica, mode: 'view' | 'edit' = 'view'): void {\n    this.editingHistoriaId = historia.id!;\n    this.updateSelectedHistoriaEditState(historia);\n    this.isEditing = this.selectedHistoriaEditable;\n\n    if (mode === 'edit' && !this.selectedHistoriaEditable) {\n      this.toastService.showWarning('Esta historia clnica ya no se puede editar porque han pasado ms de 24 horas desde su creacin.');\n    }\n    \n    // Console.log para ver qu est devolviendo el backend\n    \n    // Desorganizar los datos para el formulario\n    const formData = this.flattenDataForForm(historia);\n    this.historiaForm.patchValue(formData);\n    \n    // Cargar datos del paciente\n    this.loadPacienteData();\n    \n    // Sincronizar valores del formulario al SVG despus de cargar datos\n    setTimeout(() => {\n      this.syncVersionesToSVG();\n    }, 100);\n    \n    this.showCreateForm = true;\n    \n    // Configurar clculos automticos de keratometra despus de cargar los datos\n    setTimeout(() => {\n      this.setupKeratometriaCalculations();\n      this.setupExamenRefractivoSync();\n    }, 100);\n  }\n\n  private flattenDataForForm(data: any) {\n    const formData: any = {\n      fecha_consulta: data.fecha_consulta,\n      motivo_consulta: data.motivo_consulta,\n      observaciones: data.observaciones?.observaciones || ''\n    };\n\n    // CUESTIONARIO\n    if (data.cuestionario) {\n      Object.assign(formData, {\n        tipo_examen: data.cuestionario.tipo_examen,\n        anamnesis: data.cuestionario.anamnesis,\n        ultima_valoracion_optometria: data.cuestionario.ultima_valoracion_optometria,\n        ocupacion_profesion: data.cuestionario.ocupacion_profesion,\n        antecedentes_familiares: data.cuestionario.antecedentes_familiares,\n        antecedentes_personales: data.cuestionario.antecedentes_personales,\n        antecedentes_laborales: data.cuestionario.antecedentes_laborales,\n        fecha_control: data.cuestionario.fecha_control,\n        hora: data.cuestionario.hora\n      });\n    }\n\n    // LENSOMETRA\n    if (data.lensometria) {\n      Object.assign(formData, {\n        lensometria_formula_lejos_derecho_esfera: data.lensometria.formula_lejos_derecho_esfera,\n        lensometria_formula_lejos_derecho_cilindro: data.lensometria.formula_lejos_derecho_cilindro,\n        lensometria_formula_lejos_derecho_eje: data.lensometria.formula_lejos_derecho_eje,\n        lensometria_formula_lejos_derecho_adicion: data.lensometria.formula_lejos_derecho_adicion,\n        lensometria_formula_lejos_derecho_prisma: data.lensometria.formula_lejos_derecho_prisma,\n        lensometria_formula_lejos_izquierdo_esfera: data.lensometria.formula_lejos_izquierdo_esfera,\n        lensometria_formula_lejos_izquierdo_cilindro: data.lensometria.formula_lejos_izquierdo_cilindro,\n        lensometria_formula_lejos_izquierdo_eje: data.lensometria.formula_lejos_izquierdo_eje,\n        lensometria_formula_lejos_izquierdo_adicion: data.lensometria.formula_lejos_izquierdo_adicion,\n        lensometria_formula_lejos_izquierdo_prisma: data.lensometria.formula_lejos_izquierdo_prisma,\n        lensometria_formula_cerca_derecho_esfera: data.lensometria.formula_cerca_derecho_esfera,\n        lensometria_formula_cerca_derecho_cilindro: data.lensometria.formula_cerca_derecho_cilindro,\n        lensometria_formula_cerca_derecho_eje: data.lensometria.formula_cerca_derecho_eje,\n        lensometria_formula_cerca_derecho_adicion: data.lensometria.formula_cerca_derecho_adicion,\n        lensometria_formula_cerca_izquierdo_esfera: data.lensometria.formula_cerca_izquierdo_esfera,\n        lensometria_formula_cerca_izquierdo_cilindro: data.lensometria.formula_cerca_izquierdo_cilindro,\n        lensometria_formula_cerca_izquierdo_eje: data.lensometria.formula_cerca_izquierdo_eje,\n        lensometria_formula_cerca_izquierdo_adicion: data.lensometria.formula_cerca_izquierdo_adicion,\n        lensometria_observaciones: data.lensometria.observaciones\n      });\n    }\n\n    // AGUDEZA VISUAL\n    if (data.agudeza_visual) {\n      const av = data.agudeza_visual;\n      Object.assign(formData, {\n        lejos_test_usado: av.lejos_test_usado || '',\n        cerca_test_usado: av.cerca_test_usado || '',\n        // Lejos - datos planos del backend\n        sin_correccion_lejos_derecho: av.sin_correccion_lejos_derecho || '',\n        sin_correccion_lejos_izquierdo: av.sin_correccion_lejos_izquierdo || '',\n        sin_correccion_lejos_ambos: av.sin_correccion_lejos_ambos || '',\n        con_correccion_lejos_derecho: av.con_correccion_lejos_derecho || '',\n        con_correccion_lejos_izquierdo: av.con_correccion_lejos_izquierdo || '',\n        con_correccion_lejos_ambos: av.con_correccion_lejos_ambos || '',\n        pin_hole_lejos_derecho: av.pin_hole_lejos_derecho || '',\n        pin_hole_lejos_izquierdo: av.pin_hole_lejos_izquierdo || '',\n        // Cerca - datos planos del backend\n        sin_correccion_cerca_derecho: av.sin_correccion_cerca_derecho || '',\n        sin_correccion_cerca_izquierdo: av.sin_correccion_cerca_izquierdo || '',\n        sin_correccion_cerca_ambos: av.sin_correccion_cerca_ambos || '',\n        sin_correccion_cerca_observacion: av.sin_correccion_cerca_observacion || '',\n        con_correccion_cerca_derecho: av.con_correccion_cerca_derecho || '',\n        con_correccion_cerca_izquierdo: av.con_correccion_cerca_izquierdo || '',\n        con_correccion_cerca_ambos: av.con_correccion_cerca_ambos || '',\n        con_correccion_cerca_observacion: av.con_correccion_cerca_observacion || '',\n        pin_hole_cerca_derecho: av.pin_hole_cerca_derecho || '',\n        pin_hole_cerca_izquierdo: av.pin_hole_cerca_izquierdo || '',\n        // Campos adicionales\n        agudeza_visual_cerca_distancia: av.cerca_distancia || '',\n        agudeza_visual_cerca_descripcion: av.cerca_descripcion || '',\n        agudeza_visual_cerca_derecho_sin_correccion: av.cerca_derecho_sin_correccion || '',\n        agudeza_visual_cerca_izquierdo_sin_correccion: av.cerca_izquierdo_sin_correccion || '',\n        agudeza_visual_cerca_observacion_sin_correccion: av.cerca_observacion_sin_correccion || '',\n        agudeza_visual_cerca_derecho_con_correccion: av.cerca_derecho_con_correccion || '',\n        agudeza_visual_cerca_izquierdo_con_correccion: av.cerca_izquierdo_con_correccion || '',\n        agudeza_visual_cerca_observacion_con_correccion: av.cerca_observacion_con_correccion || ''\n      });\n    }\n\n    // EXAMEN MOTOR\n    if (data.examen_motor) {\n      Object.assign(formData, {\n        examen_motor_mano_dominante: data.examen_motor.mano_dominante,\n        examen_motor_ojo_dominante: data.examen_motor.ojo_dominante,\n        examen_motor_punto_proximo_valor: data.examen_motor.punto_proximo_valor,\n        examen_motor_dp_lejos: data.examen_motor.dp_lejos,\n        examen_motor_dp_cerca: data.examen_motor.dp_cerca,\n        examen_motor_ducciones_derecho: data.examen_motor.ducciones_derecho,\n        examen_motor_ducciones_izquierdo: data.examen_motor.ducciones_izquierdo,\n        examen_motor_kappa_derecho: data.examen_motor.kappa_derecho,\n        examen_motor_kappa_izquierdo: data.examen_motor.kappa_izquierdo,\n        examen_motor_hirschberg: data.examen_motor.hirschberg,\n        examen_motor_test_utilizado: data.examen_motor.test_utilizado,\n        examen_motor_cover_test_con_correccion_horizontal: data.examen_motor.cover_test_con_correccion_horizontal,\n        examen_motor_cover_test_con_correccion_vertical: data.examen_motor.cover_test_con_correccion_vertical,\n        examen_motor_cover_test_sin_correccion_horizontal: data.examen_motor.cover_test_sin_correccion_horizontal,\n        examen_motor_cover_test_sin_correccion_vertical: data.examen_motor.cover_test_sin_correccion_vertical,\n        examen_motor_prisma_con_correccion_horizontal: data.examen_motor.prisma_con_correccion_horizontal,\n        examen_motor_prisma_con_correccion_vertical: data.examen_motor.prisma_con_correccion_vertical,\n        examen_motor_prisma_sin_correccion_horizontal: data.examen_motor.prisma_sin_correccion_horizontal,\n        examen_motor_prisma_sin_correccion_vertical: data.examen_motor.prisma_sin_correccion_vertical,\n        examen_motor_observaciones: data.examen_motor.observaciones,\n        examen_motor_por_confirmar_derecho: data.examen_motor.por_confirmar_derecho,\n        examen_motor_por_confirmar_izquierdo: data.examen_motor.por_confirmar_izquierdo,\n        examen_motor_estereopsis_tipo: data.examen_motor.estereopsis_tipo,\n        examen_motor_estereopsis_resultado: data.examen_motor.estereopsis_resultado,\n        \n        // Campos de versiones (chulitos verdes)\n        examen_motor_versiones_derecho_left: data.examen_motor.versiones_derecho_left || '',\n        examen_motor_versiones_derecho_right: data.examen_motor.versiones_derecho_right || '',\n        examen_motor_versiones_derecho_top_left: data.examen_motor.versiones_derecho_top_left || '',\n        examen_motor_versiones_derecho_bottom_left: data.examen_motor.versiones_derecho_bottom_left || '',\n        examen_motor_versiones_derecho_top_right: data.examen_motor.versiones_derecho_top_right || '',\n        examen_motor_versiones_derecho_bottom_right: data.examen_motor.versiones_derecho_bottom_right || '',\n        examen_motor_versiones_izquierdo_left: data.examen_motor.versiones_izquierdo_left || '',\n        examen_motor_versiones_izquierdo_right: data.examen_motor.versiones_izquierdo_right || '',\n        examen_motor_versiones_izquierdo_top_left: data.examen_motor.versiones_izquierdo_top_left || '',\n        examen_motor_versiones_izquierdo_bottom_left: data.examen_motor.versiones_izquierdo_bottom_left || '',\n        examen_motor_versiones_izquierdo_top_right: data.examen_motor.versiones_izquierdo_top_right || '',\n        examen_motor_versiones_izquierdo_bottom_right: data.examen_motor.versiones_izquierdo_bottom_right || ''\n      });\n    }\n\n    // EXAMEN REFRACTIVO\n    if (data.examen_refractivo) {\n      const er = data.examen_refractivo;\n      Object.assign(formData, {\n        // Keratometra derecho - datos planos del backend\n        examen_refractivo_keratometria_derecho_plano: er.keratometria_derecho_plano || '',\n        examen_refractivo_keratometria_derecho_curvo: er.keratometria_derecho_curvo || '',\n        examen_refractivo_keratometria_derecho_eje: er.keratometria_derecho_eje || '',\n        examen_refractivo_keratometria_derecho_miras: er.keratometria_derecho_miras || '',\n        examen_refractivo_keratometria_derecho_corn: er.keratometria_derecho_corn || '',\n        \n        // Keratometra izquierdo - datos planos del backend\n        examen_refractivo_keratometria_izquierdo_plano: er.keratometria_izquierdo_plano || '',\n        examen_refractivo_keratometria_izquierdo_curvo: er.keratometria_izquierdo_curvo || '',\n        examen_refractivo_keratometria_izquierdo_eje: er.keratometria_izquierdo_eje || '',\n        examen_refractivo_keratometria_izquierdo_miras: er.keratometria_izquierdo_miras || '',\n        examen_refractivo_keratometria_izquierdo_corn: er.keratometria_izquierdo_corn || '',\n        \n        // Retinoscopa esttica derecho - datos planos del backend\n        examen_refractivo_retinoscopia_estatica_derecho_esfera: er.retinoscopia_estatica_derecho_esfera || '',\n        examen_refractivo_retinoscopia_estatica_derecho_cilindro: er.retinoscopia_estatica_derecho_cilindro || '',\n        examen_refractivo_retinoscopia_estatica_derecho_eje: er.retinoscopia_estatica_derecho_eje || '',\n        examen_refractivo_retinoscopia_estatica_derecho_sombras: er.retinoscopia_estatica_derecho_sombras || '',\n        \n        // Retinoscopa esttica izquierdo - datos planos del backend\n        examen_refractivo_retinoscopia_estatica_izquierdo_esfera: er.retinoscopia_estatica_izquierdo_esfera || '',\n        examen_refractivo_retinoscopia_estatica_izquierdo_cilindro: er.retinoscopia_estatica_izquierdo_cilindro || '',\n        examen_refractivo_retinoscopia_estatica_izquierdo_eje: er.retinoscopia_estatica_izquierdo_eje || '',\n        examen_refractivo_retinoscopia_estatica_izquierdo_sombras: er.retinoscopia_estatica_izquierdo_sombras || '',\n        \n        // Retinoscopa dinmica derecho - datos planos del backend\n        examen_refractivo_retinoscopia_dinamica_derecho_esfera: er.retinoscopia_dinamica_derecho_esfera || '',\n        examen_refractivo_retinoscopia_dinamica_derecho_cilindro: er.retinoscopia_dinamica_derecho_cilindro || '',\n        examen_refractivo_retinoscopia_dinamica_derecho_eje: er.retinoscopia_dinamica_derecho_eje || '',\n        examen_refractivo_retinoscopia_dinamica_derecho_sombras: er.retinoscopia_dinamica_derecho_sombras || '',\n        \n        // Retinoscopa dinmica izquierdo - datos planos del backend\n        examen_refractivo_retinoscopia_dinamica_izquierdo_esfera: er.retinoscopia_dinamica_izquierdo_esfera || '',\n        examen_refractivo_retinoscopia_dinamica_izquierdo_cilindro: er.retinoscopia_dinamica_izquierdo_cilindro || '',\n        examen_refractivo_retinoscopia_dinamica_izquierdo_eje: er.retinoscopia_dinamica_izquierdo_eje || '',\n        examen_refractivo_retinoscopia_dinamica_izquierdo_sombras: er.retinoscopia_dinamica_izquierdo_sombras || '',\n        \n        // Subjetivo derecho - datos planos del backend\n        examen_refractivo_subjetivo_derecho_esfera: er.subjetivo_derecho_esfera || '',\n        examen_refractivo_subjetivo_derecho_cilindro: er.subjetivo_derecho_cilindro || '',\n        examen_refractivo_subjetivo_derecho_eje: er.subjetivo_derecho_eje || '',\n        examen_refractivo_subjetivo_derecho_av_lejos: er.subjetivo_derecho_av_lejos || '',\n        examen_refractivo_subjetivo_derecho_add: er.subjetivo_derecho_add || '',\n        examen_refractivo_subjetivo_derecho_av_cerca: er.subjetivo_derecho_av_cerca || '',\n        examen_refractivo_subjetivo_derecho_dnp: er.subjetivo_derecho_dnp || '',\n        examen_refractivo_subjetivo_derecho_vortice: er.subjetivo_derecho_vortice || '',\n        examen_refractivo_subjetivo_derecho_mm: er.subjetivo_derecho_mm || '',\n        examen_refractivo_subjetivo_derecho_estatica: er.subjetivo_derecho_estatica || '',\n        examen_refractivo_subjetivo_derecho_dinamica: er.subjetivo_derecho_dinamica || '',\n        \n        // Subjetivo izquierdo - datos planos del backend\n        examen_refractivo_subjetivo_izquierdo_esfera: er.subjetivo_izquierdo_esfera || '',\n        examen_refractivo_subjetivo_izquierdo_cilindro: er.subjetivo_izquierdo_cilindro || '',\n        examen_refractivo_subjetivo_izquierdo_eje: er.subjetivo_izquierdo_eje || '',\n        examen_refractivo_subjetivo_izquierdo_av_lejos: er.subjetivo_izquierdo_av_lejos || '',\n        examen_refractivo_subjetivo_izquierdo_add: er.subjetivo_izquierdo_add || '',\n        examen_refractivo_subjetivo_izquierdo_av_cerca: er.subjetivo_izquierdo_av_cerca || '',\n        examen_refractivo_subjetivo_izquierdo_dnp: er.subjetivo_izquierdo_dnp || '',\n        examen_refractivo_subjetivo_izquierdo_vortice: er.subjetivo_izquierdo_vortice || '',\n        examen_refractivo_subjetivo_izquierdo_mm: er.subjetivo_izquierdo_mm || '',\n        examen_refractivo_subjetivo_izquierdo_estatica: er.subjetivo_izquierdo_estatica || '',\n        examen_refractivo_subjetivo_izquierdo_dinamica: er.subjetivo_izquierdo_dinamica || '',\n        \n        // Campos adicionales de examen refractivo\n        examen_refractivo_otra_refraccion: er.otra_refraccion || '',\n        examen_refractivo_radio_k_1: er.radio_k_1 || '',\n        examen_refractivo_radio_k_2: er.radio_k_2 || '',\n        examen_refractivo_otra_refraccion_derecho_esfera: er.otra_refraccion_derecho_esfera || '',\n        examen_refractivo_otra_refraccion_derecho_cilindro: er.otra_refraccion_derecho_cilindro || '',\n        examen_refractivo_otra_refraccion_derecho_eje: er.otra_refraccion_derecho_eje || '',\n        examen_refractivo_otra_refraccion_derecho_sombras: er.otra_refraccion_derecho_sombras || '',\n        examen_refractivo_otra_refraccion_izquierdo_esfera: er.otra_refraccion_izquierdo_esfera || '',\n        examen_refractivo_otra_refraccion_izquierdo_cilindro: er.otra_refraccion_izquierdo_cilindro || '',\n        examen_refractivo_otra_refraccion_izquierdo_eje: er.otra_refraccion_izquierdo_eje || '',\n        examen_refractivo_otra_refraccion_izquierdo_sombras: er.otra_refraccion_izquierdo_sombras || '',\n        examen_refractivo_subjetivo_normal: er.subjetivo_normal || '',\n        examen_refractivo_subjetivo_cycloplejia: er.subjetivo_cycloplejia || '',\n        examen_refractivo_subjetivo_otra: er.subjetivo_otra || '',\n        examen_refractivo_subjetivo_distancia_al: er.subjetivo_distancia_al || ''\n      });\n\n      \n    }\n\n    // EXAMEN OFTALMOLGICO\n    if (data.examen_oftalmologico) {\n      Object.assign(formData, {\n        examen_oftalmologico_pupila_derecho: data.examen_oftalmologico.pupila_derecho,\n        examen_oftalmologico_pupila_izquierdo: data.examen_oftalmologico.pupila_izquierdo,\n        examen_oftalmologico_parpados_derecho: data.examen_oftalmologico.parpados_derecho,\n        examen_oftalmologico_parpados_izquierdo: data.examen_oftalmologico.parpados_izquierdo,\n        examen_oftalmologico_pelicula_lagrimal_derecho: data.examen_oftalmologico.pelicula_lagrimal_derecho,\n        examen_oftalmologico_pelicula_lagrimal_izquierdo: data.examen_oftalmologico.pelicula_lagrimal_izquierdo,\n        examen_oftalmologico_conjuntiva_derecho: data.examen_oftalmologico.conjuntiva_derecho,\n        examen_oftalmologico_conjuntiva_izquierdo: data.examen_oftalmologico.conjuntiva_izquierdo,\n        examen_oftalmologico_cornea_derecho: data.examen_oftalmologico.cornea_derecho,\n        examen_oftalmologico_cornea_izquierdo: data.examen_oftalmologico.cornea_izquierdo,\n        examen_oftalmologico_cristalino_derecho: data.examen_oftalmologico.cristalino_derecho,\n        examen_oftalmologico_cristalino_izquierdo: data.examen_oftalmologico.cristalino_izquierdo,\n        examen_oftalmologico_camara_anterior_derecho: data.examen_oftalmologico.camara_anterior_derecho,\n        examen_oftalmologico_camara_anterior_izquierdo: data.examen_oftalmologico.camara_anterior_izquierdo,\n        examen_oftalmologico_iris_derecho: data.examen_oftalmologico.iris_derecho,\n        examen_oftalmologico_iris_izquierdo: data.examen_oftalmologico.iris_izquierdo,\n        examen_oftalmologico_bruckner: data.examen_oftalmologico.bruckner\n      });\n    }\n\n    // OFTALMOSCOPIA\n    if (data.oftalmoscopia) {\n      Object.assign(formData, {\n        oftalmoscopia_derecho_excavacion: data.oftalmoscopia.derecho_excavacion,\n        oftalmoscopia_derecho_descripcion: data.oftalmoscopia.derecho_descripcion,\n        oftalmoscopia_izquierdo_excavacion: data.oftalmoscopia.izquierdo_excavacion,\n        oftalmoscopia_izquierdo_descripcion: data.oftalmoscopia.izquierdo_descripcion\n      });\n    }\n\n    // FRMULA FINAL\n    if (data.formula_final) {\n      Object.assign(formData, {\n        formula_derecho_esfera: data.formula_final.derecho_esfera,\n        formula_derecho_cilindro: data.formula_final.derecho_cilindro,\n        formula_derecho_eje: data.formula_final.derecho_eje,\n        formula_derecho_av_lejos: data.formula_final.derecho_av_lejos,\n        formula_derecho_add: data.formula_final.derecho_add,\n        formula_derecho_av_cerca: data.formula_final.derecho_av_cerca,\n        formula_derecho_dnp: data.formula_final.derecho_dnp,\n        formula_derecho_recomendacion: data.formula_final.derecho_recomendacion,\n        formula_izquierdo_esfera: data.formula_final.izquierdo_esfera,\n        formula_izquierdo_cilindro: data.formula_final.izquierdo_cilindro,\n        formula_izquierdo_eje: data.formula_final.izquierdo_eje,\n        formula_izquierdo_av_lejos: data.formula_final.izquierdo_av_lejos,\n        formula_izquierdo_add: data.formula_final.izquierdo_add,\n        formula_izquierdo_av_cerca: data.formula_final.izquierdo_av_cerca,\n        formula_izquierdo_dnp: data.formula_final.izquierdo_dnp,\n        formula_izquierdo_recomendacion: data.formula_final.izquierdo_recomendacion\n      });\n    }\n\n    // OBSERVACIONES - Ya se asign correctamente arriba, no sobrescribir\n\n    // DIAGNSTICO\n    if (data.diagnosticos && Array.isArray(data.diagnosticos)) {\n      data.diagnosticos.forEach((diag: any, index: number) => {\n        const num = index + 1;\n        Object.assign(formData, {\n          [`diagnostico_codigo_${num}`]: diag.codigo || '',\n          [`diagnostico_diagnostico_${num}`]: diag.diagnostico || '',\n          [`diagnostico_descripcion_${num}`]: diag.descripcion || '',\n          [`diagnostico_ojo_${num}`]: diag.ojo || '',\n          [`diagnostico_principal_${num}`]: diag.principal || ''\n        });\n      });\n    }\n\n    return formData;\n  }\n\n  saveHistoria(): void {\n    if (this.historiaForm.valid) {\n      // Verificar autenticacin antes de enviar\n      const token = localStorage.getItem('token');\n      const user = localStorage.getItem('user');\n      \n      if (!token || !user) {\n        this.toastService.showError('No ests autenticado. Por favor, inicia sesin nuevamente.');\n        return;\n      }\n\n      // Sincronizar valores del SVG con el formulario antes de guardar\n      this.syncVersionesFromSVG();\n\n      const formData = this.historiaForm.value;\n      const organizedData = this.organizeDataBySections(formData);\n      const historiaData: HistoriaClinicaOrganizada = {\n        ...organizedData,\n        paciente_id: this.pacienteId!\n      };\n\n\n      if (this.isEditing && this.editingHistoriaId) {\n        this.historiasClinicasService.updateHistoriaClinicaOrganizada(this.editingHistoriaId, historiaData).subscribe({\n          next: () => {\n            this.toastService.showSuccess('Historia clnica actualizada exitosamente');\n            this.loadHistoriasClinicas();\n            this.closeForm();\n          },\n          error: (error) => {\n            this.toastService.showError('Error al actualizar historia clnica');\n            console.error('Error updating historia clinica:', error);\n          }\n        });\n      } else {\n        this.historiasClinicasService.createHistoriaClinicaOrganizada(historiaData).subscribe({\n          next: () => {\n            this.toastService.showSuccess('Historia clnica creada exitosamente');\n            this.loadHistoriasClinicas();\n            this.closeForm();\n          },\n          error: (error) => {\n            this.toastService.showError('Error al crear historia clnica');\n            console.error('Error creating historia clinica:', error);\n          }\n        });\n      }\n    } else {\n      this.toastService.showError('Por favor complete todos los campos requeridos');\n    }\n  }\n\n  private organizeDataBySections(formData: any) {\n    return {\n      // Datos bsicos\n      fecha_consulta: formData.fecha_consulta,\n      motivo_consulta: formData.motivo_consulta,\n      \n      // CUESTIONARIO\n      cuestionario: {\n        tipo_examen: formData.tipo_examen,\n        anamnesis: formData.anamnesis,\n        ultima_valoracion_optometria: formData.ultima_valoracion_optometria,\n        ocupacion_profesion: formData.ocupacion_profesion,\n        antecedentes_familiares: formData.antecedentes_familiares,\n        antecedentes_personales: formData.antecedentes_personales,\n        antecedentes_laborales: formData.antecedentes_laborales,\n        fecha_control: formData.fecha_control,\n        hora: formData.hora\n      },\n      \n      // LENSOMETRA\n      lensometria: {\n        formula_lejos_derecho_esfera: formData.lensometria_formula_lejos_derecho_esfera,\n        formula_lejos_derecho_cilindro: formData.lensometria_formula_lejos_derecho_cilindro,\n        formula_lejos_derecho_eje: formData.lensometria_formula_lejos_derecho_eje,\n        formula_lejos_derecho_adicion: formData.lensometria_formula_lejos_derecho_adicion,\n        formula_lejos_derecho_prisma: formData.lensometria_formula_lejos_derecho_prisma,\n        formula_lejos_izquierdo_esfera: formData.lensometria_formula_lejos_izquierdo_esfera,\n        formula_lejos_izquierdo_cilindro: formData.lensometria_formula_lejos_izquierdo_cilindro,\n        formula_lejos_izquierdo_eje: formData.lensometria_formula_lejos_izquierdo_eje,\n        formula_lejos_izquierdo_adicion: formData.lensometria_formula_lejos_izquierdo_adicion,\n        formula_lejos_izquierdo_prisma: formData.lensometria_formula_lejos_izquierdo_prisma,\n        formula_cerca_derecho_esfera: formData.lensometria_formula_cerca_derecho_esfera,\n        formula_cerca_derecho_cilindro: formData.lensometria_formula_cerca_derecho_cilindro,\n        formula_cerca_derecho_eje: formData.lensometria_formula_cerca_derecho_eje,\n        formula_cerca_derecho_adicion: formData.lensometria_formula_cerca_derecho_adicion,\n        formula_cerca_izquierdo_esfera: formData.lensometria_formula_cerca_izquierdo_esfera,\n        formula_cerca_izquierdo_cilindro: formData.lensometria_formula_cerca_izquierdo_cilindro,\n        formula_cerca_izquierdo_eje: formData.lensometria_formula_cerca_izquierdo_eje,\n        formula_cerca_izquierdo_adicion: formData.lensometria_formula_cerca_izquierdo_adicion,\n        observaciones: formData.lensometria_observaciones\n      },\n      \n      // AGUDEZA VISUAL\n      agudeza_visual: {\n        lejos_test_usado: formData.lejos_test_usado,\n        cerca_test_usado: formData.cerca_test_usado,\n        sin_correccion_lejos_derecho: formData.sin_correccion_lejos_derecho,\n        sin_correccion_lejos_izquierdo: formData.sin_correccion_lejos_izquierdo,\n        sin_correccion_lejos_ambos: formData.sin_correccion_lejos_ambos,\n        con_correccion_lejos_derecho: formData.con_correccion_lejos_derecho,\n        con_correccion_lejos_izquierdo: formData.con_correccion_lejos_izquierdo,\n        con_correccion_lejos_ambos: formData.con_correccion_lejos_ambos,\n        pin_hole_lejos_derecho: formData.pin_hole_lejos_derecho,\n        pin_hole_lejos_izquierdo: formData.pin_hole_lejos_izquierdo,\n        sin_correccion_cerca_derecho: formData.sin_correccion_cerca_derecho,\n        sin_correccion_cerca_izquierdo: formData.sin_correccion_cerca_izquierdo,\n        sin_correccion_cerca_ambos: formData.sin_correccion_cerca_ambos,\n        sin_correccion_cerca_observacion: formData.sin_correccion_cerca_observacion,\n        con_correccion_cerca_derecho: formData.con_correccion_cerca_derecho,\n        con_correccion_cerca_izquierdo: formData.con_correccion_cerca_izquierdo,\n        con_correccion_cerca_ambos: formData.con_correccion_cerca_ambos,\n        con_correccion_cerca_observacion: formData.con_correccion_cerca_observacion,\n        pin_hole_cerca_derecho: formData.pin_hole_cerca_derecho,\n        pin_hole_cerca_izquierdo: formData.pin_hole_cerca_izquierdo,\n        // Campos adicionales del formulario\n        cerca_distancia: formData.agudeza_visual_cerca_distancia,\n        cerca_descripcion: formData.agudeza_visual_cerca_descripcion,\n        cerca_derecho_sin_correccion: formData.agudeza_visual_cerca_derecho_sin_correccion,\n        cerca_izquierdo_sin_correccion: formData.agudeza_visual_cerca_izquierdo_sin_correccion,\n        cerca_observacion_sin_correccion: formData.agudeza_visual_cerca_observacion_sin_correccion,\n        cerca_derecho_con_correccion: formData.agudeza_visual_cerca_derecho_con_correccion,\n        cerca_izquierdo_con_correccion: formData.agudeza_visual_cerca_izquierdo_con_correccion,\n        cerca_observacion_con_correccion: formData.agudeza_visual_cerca_observacion_con_correccion\n      },\n      \n      // EXAMEN MOTOR\n      examen_motor: {\n        mano_dominante: formData.examen_motor_mano_dominante,\n        ojo_dominante: formData.examen_motor_ojo_dominante,\n        punto_proximo_valor: formData.examen_motor_punto_proximo_valor,\n        dp_lejos: formData.examen_motor_dp_lejos,\n        dp_cerca: formData.examen_motor_dp_cerca,\n        ducciones_derecho: formData.examen_motor_ducciones_derecho,\n        ducciones_izquierdo: formData.examen_motor_ducciones_izquierdo,\n        kappa_derecho: formData.examen_motor_kappa_derecho,\n        kappa_izquierdo: formData.examen_motor_kappa_izquierdo,\n        hirschberg: formData.examen_motor_hirschberg,\n        test_utilizado: formData.examen_motor_test_utilizado,\n        cover_test_con_correccion_horizontal: formData.examen_motor_cover_test_con_correccion_horizontal,\n        cover_test_con_correccion_vertical: formData.examen_motor_cover_test_con_correccion_vertical,\n        cover_test_sin_correccion_horizontal: formData.examen_motor_cover_test_sin_correccion_horizontal,\n        cover_test_sin_correccion_vertical: formData.examen_motor_cover_test_sin_correccion_vertical,\n        prisma_con_correccion_horizontal: formData.examen_motor_prisma_con_correccion_horizontal,\n        prisma_con_correccion_vertical: formData.examen_motor_prisma_con_correccion_vertical,\n        prisma_sin_correccion_horizontal: formData.examen_motor_prisma_sin_correccion_horizontal,\n        prisma_sin_correccion_vertical: formData.examen_motor_prisma_sin_correccion_vertical,\n        observaciones: formData.examen_motor_observaciones,\n        por_confirmar_derecho: formData.examen_motor_por_confirmar_derecho,\n        por_confirmar_izquierdo: formData.examen_motor_por_confirmar_izquierdo,\n        estereopsis_tipo: formData.examen_motor_estereopsis_tipo,\n        estereopsis_resultado: formData.examen_motor_estereopsis_resultado,\n        \n        // Campos de versiones (chulitos verdes)\n        versiones_derecho_left: formData.examen_motor_versiones_derecho_left,\n        versiones_derecho_right: formData.examen_motor_versiones_derecho_right,\n        versiones_derecho_top_left: formData.examen_motor_versiones_derecho_top_left,\n        versiones_derecho_bottom_left: formData.examen_motor_versiones_derecho_bottom_left,\n        versiones_derecho_top_right: formData.examen_motor_versiones_derecho_top_right,\n        versiones_derecho_bottom_right: formData.examen_motor_versiones_derecho_bottom_right,\n        versiones_izquierdo_left: formData.examen_motor_versiones_izquierdo_left,\n        versiones_izquierdo_right: formData.examen_motor_versiones_izquierdo_right,\n        versiones_izquierdo_top_left: formData.examen_motor_versiones_izquierdo_top_left,\n        versiones_izquierdo_bottom_left: formData.examen_motor_versiones_izquierdo_bottom_left,\n        versiones_izquierdo_top_right: formData.examen_motor_versiones_izquierdo_top_right,\n        versiones_izquierdo_bottom_right: formData.examen_motor_versiones_izquierdo_bottom_right\n      },\n      \n      // EXAMEN REFRACTIVO\n      examen_refractivo: {\n        keratometria_derecho_plano: formData.examen_refractivo_keratometria_derecho_plano,\n        keratometria_derecho_curvo: formData.examen_refractivo_keratometria_derecho_curvo,\n        keratometria_derecho_eje: formData.examen_refractivo_keratometria_derecho_eje,\n        keratometria_derecho_miras: formData.examen_refractivo_keratometria_derecho_miras,\n        keratometria_derecho_corn: formData.examen_refractivo_keratometria_derecho_corn,\n        keratometria_derecho_esfera: formData.examen_refractivo_keratometria_derecho_esfera,\n        keratometria_derecho_cilindro: formData.examen_refractivo_keratometria_derecho_cilindro,\n        keratometria_derecho_sombras: formData.examen_refractivo_keratometria_derecho_sombras,\n        keratometria_derecho_av_lejos: formData.examen_refractivo_keratometria_derecho_av_lejos,\n        keratometria_derecho_add: formData.examen_refractivo_keratometria_derecho_add,\n        keratometria_derecho_av_cerca: formData.examen_refractivo_keratometria_derecho_av_cerca,\n        keratometria_derecho_dnp: formData.examen_refractivo_keratometria_derecho_dnp,\n        keratometria_derecho_vortice: formData.examen_refractivo_keratometria_derecho_vortice,\n        keratometria_derecho_mm: formData.examen_refractivo_keratometria_derecho_mm,\n        keratometria_derecho_estatica: formData.examen_refractivo_keratometria_derecho_estatica,\n        keratometria_derecho_dinamica: formData.examen_refractivo_keratometria_derecho_dinamica,\n        keratometria_derecho_normal: formData.examen_refractivo_keratometria_derecho_normal,\n        keratometria_derecho_cycloplejia: formData.examen_refractivo_keratometria_derecho_cycloplejia,\n        keratometria_derecho_otra: formData.examen_refractivo_keratometria_derecho_otra,\n        keratometria_derecho_distancia_al: formData.examen_refractivo_keratometria_derecho_distancia_al,\n        keratometria_derecho_radio_k_1: formData.examen_refractivo_keratometria_derecho_radio_k_1,\n        keratometria_derecho_radio_k_2: formData.examen_refractivo_keratometria_derecho_radio_k_2,\n        keratometria_derecho_otra_refraccion: formData.examen_refractivo_keratometria_derecho_otra_refraccion,\n        keratometria_izquierdo_plano: formData.examen_refractivo_keratometria_izquierdo_plano,\n        keratometria_izquierdo_curvo: formData.examen_refractivo_keratometria_izquierdo_curvo,\n        keratometria_izquierdo_eje: formData.examen_refractivo_keratometria_izquierdo_eje,\n        keratometria_izquierdo_miras: formData.examen_refractivo_keratometria_izquierdo_miras,\n        keratometria_izquierdo_corn: formData.examen_refractivo_keratometria_izquierdo_corn,\n        keratometria_izquierdo_esfera: formData.examen_refractivo_keratometria_izquierdo_esfera,\n        keratometria_izquierdo_cilindro: formData.examen_refractivo_keratometria_izquierdo_cilindro,\n        keratometria_izquierdo_sombras: formData.examen_refractivo_keratometria_izquierdo_sombras,\n        keratometria_izquierdo_av_lejos: formData.examen_refractivo_keratometria_izquierdo_av_lejos,\n        keratometria_izquierdo_add: formData.examen_refractivo_keratometria_izquierdo_add,\n        keratometria_izquierdo_av_cerca: formData.examen_refractivo_keratometria_izquierdo_av_cerca,\n        keratometria_izquierdo_dnp: formData.examen_refractivo_keratometria_izquierdo_dnp,\n        keratometria_izquierdo_vortice: formData.examen_refractivo_keratometria_izquierdo_vortice,\n        keratometria_izquierdo_mm: formData.examen_refractivo_keratometria_izquierdo_mm,\n        keratometria_izquierdo_estatica: formData.examen_refractivo_keratometria_izquierdo_estatica,\n        keratometria_izquierdo_dinamica: formData.examen_refractivo_keratometria_izquierdo_dinamica,\n        keratometria_izquierdo_normal: formData.examen_refractivo_keratometria_izquierdo_normal,\n        keratometria_izquierdo_cycloplejia: formData.examen_refractivo_keratometria_izquierdo_cycloplejia,\n        keratometria_izquierdo_otra: formData.examen_refractivo_keratometria_izquierdo_otra,\n        keratometria_izquierdo_distancia_al: formData.examen_refractivo_keratometria_izquierdo_distancia_al,\n        keratometria_izquierdo_radio_k_1: formData.examen_refractivo_keratometria_izquierdo_radio_k_1,\n        keratometria_izquierdo_radio_k_2: formData.examen_refractivo_keratometria_izquierdo_radio_k_2,\n        keratometria_izquierdo_otra_refraccion: formData.examen_refractivo_keratometria_izquierdo_otra_refraccion,\n        retinoscopia_estatica_derecho_plano: formData.examen_refractivo_retinoscopia_estatica_derecho_plano,\n        retinoscopia_estatica_derecho_curvo: formData.examen_refractivo_retinoscopia_estatica_derecho_curvo,\n        retinoscopia_estatica_derecho_eje: formData.examen_refractivo_retinoscopia_estatica_derecho_eje,\n        retinoscopia_estatica_derecho_miras: formData.examen_refractivo_retinoscopia_estatica_derecho_miras,\n        retinoscopia_estatica_derecho_corn: formData.examen_refractivo_retinoscopia_estatica_derecho_corn,\n        retinoscopia_estatica_derecho_esfera: formData.examen_refractivo_retinoscopia_estatica_derecho_esfera,\n        retinoscopia_estatica_derecho_cilindro: formData.examen_refractivo_retinoscopia_estatica_derecho_cilindro,\n        retinoscopia_estatica_derecho_sombras: formData.examen_refractivo_retinoscopia_estatica_derecho_sombras,\n        retinoscopia_estatica_derecho_av_lejos: formData.examen_refractivo_retinoscopia_estatica_derecho_av_lejos,\n        retinoscopia_estatica_derecho_add: formData.examen_refractivo_retinoscopia_estatica_derecho_add,\n        retinoscopia_estatica_derecho_av_cerca: formData.examen_refractivo_retinoscopia_estatica_derecho_av_cerca,\n        retinoscopia_estatica_derecho_dnp: formData.examen_refractivo_retinoscopia_estatica_derecho_dnp,\n        retinoscopia_estatica_derecho_vortice: formData.examen_refractivo_retinoscopia_estatica_derecho_vortice,\n        retinoscopia_estatica_derecho_mm: formData.examen_refractivo_retinoscopia_estatica_derecho_mm,\n        retinoscopia_estatica_derecho_estatica: formData.examen_refractivo_retinoscopia_estatica_derecho_estatica,\n        retinoscopia_estatica_derecho_dinamica: formData.examen_refractivo_retinoscopia_estatica_derecho_dinamica,\n        retinoscopia_estatica_derecho_normal: formData.examen_refractivo_retinoscopia_estatica_derecho_normal,\n        retinoscopia_estatica_derecho_cycloplejia: formData.examen_refractivo_retinoscopia_estatica_derecho_cycloplejia,\n        retinoscopia_estatica_derecho_otra: formData.examen_refractivo_retinoscopia_estatica_derecho_otra,\n        retinoscopia_estatica_derecho_distancia_al: formData.examen_refractivo_retinoscopia_estatica_derecho_distancia_al,\n        retinoscopia_estatica_derecho_radio_k_1: formData.examen_refractivo_retinoscopia_estatica_derecho_radio_k_1,\n        retinoscopia_estatica_derecho_radio_k_2: formData.examen_refractivo_retinoscopia_estatica_derecho_radio_k_2,\n        retinoscopia_estatica_derecho_otra_refraccion: formData.examen_refractivo_retinoscopia_estatica_derecho_otra_refraccion,\n        retinoscopia_estatica_izquierdo_plano: formData.examen_refractivo_retinoscopia_estatica_izquierdo_plano,\n        retinoscopia_estatica_izquierdo_curvo: formData.examen_refractivo_retinoscopia_estatica_izquierdo_curvo,\n        retinoscopia_estatica_izquierdo_eje: formData.examen_refractivo_retinoscopia_estatica_izquierdo_eje,\n        retinoscopia_estatica_izquierdo_miras: formData.examen_refractivo_retinoscopia_estatica_izquierdo_miras,\n        retinoscopia_estatica_izquierdo_corn: formData.examen_refractivo_retinoscopia_estatica_izquierdo_corn,\n        retinoscopia_estatica_izquierdo_esfera: formData.examen_refractivo_retinoscopia_estatica_izquierdo_esfera,\n        retinoscopia_estatica_izquierdo_cilindro: formData.examen_refractivo_retinoscopia_estatica_izquierdo_cilindro,\n        retinoscopia_estatica_izquierdo_sombras: formData.examen_refractivo_retinoscopia_estatica_izquierdo_sombras,\n        retinoscopia_estatica_izquierdo_av_lejos: formData.examen_refractivo_retinoscopia_estatica_izquierdo_av_lejos,\n        retinoscopia_estatica_izquierdo_add: formData.examen_refractivo_retinoscopia_estatica_izquierdo_add,\n        retinoscopia_estatica_izquierdo_av_cerca: formData.examen_refractivo_retinoscopia_estatica_izquierdo_av_cerca,\n        retinoscopia_estatica_izquierdo_dnp: formData.examen_refractivo_retinoscopia_estatica_izquierdo_dnp,\n        retinoscopia_estatica_izquierdo_vortice: formData.examen_refractivo_retinoscopia_estatica_izquierdo_vortice,\n        retinoscopia_estatica_izquierdo_mm: formData.examen_refractivo_retinoscopia_estatica_izquierdo_mm,\n        retinoscopia_estatica_izquierdo_estatica: formData.examen_refractivo_retinoscopia_estatica_izquierdo_estatica,\n        retinoscopia_estatica_izquierdo_dinamica: formData.examen_refractivo_retinoscopia_estatica_izquierdo_dinamica,\n        retinoscopia_estatica_izquierdo_normal: formData.examen_refractivo_retinoscopia_estatica_izquierdo_normal,\n        retinoscopia_estatica_izquierdo_cycloplejia: formData.examen_refractivo_retinoscopia_estatica_izquierdo_cycloplejia,\n        retinoscopia_estatica_izquierdo_otra: formData.examen_refractivo_retinoscopia_estatica_izquierdo_otra,\n        retinoscopia_estatica_izquierdo_distancia_al: formData.examen_refractivo_retinoscopia_estatica_izquierdo_distancia_al,\n        retinoscopia_estatica_izquierdo_radio_k_1: formData.examen_refractivo_retinoscopia_estatica_izquierdo_radio_k_1,\n        retinoscopia_estatica_izquierdo_radio_k_2: formData.examen_refractivo_retinoscopia_estatica_izquierdo_radio_k_2,\n        retinoscopia_estatica_izquierdo_otra_refraccion: formData.examen_refractivo_retinoscopia_estatica_izquierdo_otra_refraccion,\n        retinoscopia_dinamica_derecho_plano: formData.examen_refractivo_retinoscopia_dinamica_derecho_plano,\n        retinoscopia_dinamica_derecho_curvo: formData.examen_refractivo_retinoscopia_dinamica_derecho_curvo,\n        retinoscopia_dinamica_derecho_eje: formData.examen_refractivo_retinoscopia_dinamica_derecho_eje,\n        retinoscopia_dinamica_derecho_miras: formData.examen_refractivo_retinoscopia_dinamica_derecho_miras,\n        retinoscopia_dinamica_derecho_corn: formData.examen_refractivo_retinoscopia_dinamica_derecho_corn,\n        retinoscopia_dinamica_derecho_esfera: formData.examen_refractivo_retinoscopia_dinamica_derecho_esfera,\n        retinoscopia_dinamica_derecho_cilindro: formData.examen_refractivo_retinoscopia_dinamica_derecho_cilindro,\n        retinoscopia_dinamica_derecho_sombras: formData.examen_refractivo_retinoscopia_dinamica_derecho_sombras,\n        retinoscopia_dinamica_derecho_av_lejos: formData.examen_refractivo_retinoscopia_dinamica_derecho_av_lejos,\n        retinoscopia_dinamica_derecho_add: formData.examen_refractivo_retinoscopia_dinamica_derecho_add,\n        retinoscopia_dinamica_derecho_av_cerca: formData.examen_refractivo_retinoscopia_dinamica_derecho_av_cerca,\n        retinoscopia_dinamica_derecho_dnp: formData.examen_refractivo_retinoscopia_dinamica_derecho_dnp,\n        retinoscopia_dinamica_derecho_vortice: formData.examen_refractivo_retinoscopia_dinamica_derecho_vortice,\n        retinoscopia_dinamica_derecho_mm: formData.examen_refractivo_retinoscopia_dinamica_derecho_mm,\n        retinoscopia_dinamica_derecho_estatica: formData.examen_refractivo_retinoscopia_dinamica_derecho_estatica,\n        retinoscopia_dinamica_derecho_dinamica: formData.examen_refractivo_retinoscopia_dinamica_derecho_dinamica,\n        retinoscopia_dinamica_derecho_normal: formData.examen_refractivo_retinoscopia_dinamica_derecho_normal,\n        retinoscopia_dinamica_derecho_cycloplejia: formData.examen_refractivo_retinoscopia_dinamica_derecho_cycloplejia,\n        retinoscopia_dinamica_derecho_otra: formData.examen_refractivo_retinoscopia_dinamica_derecho_otra,\n        retinoscopia_dinamica_derecho_distancia_al: formData.examen_refractivo_retinoscopia_dinamica_derecho_distancia_al,\n        retinoscopia_dinamica_derecho_radio_k_1: formData.examen_refractivo_retinoscopia_dinamica_derecho_radio_k_1,\n        retinoscopia_dinamica_derecho_radio_k_2: formData.examen_refractivo_retinoscopia_dinamica_derecho_radio_k_2,\n        retinoscopia_dinamica_derecho_otra_refraccion: formData.examen_refractivo_retinoscopia_dinamica_derecho_otra_refraccion,\n        retinoscopia_dinamica_izquierdo_plano: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_plano,\n        retinoscopia_dinamica_izquierdo_curvo: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_curvo,\n        retinoscopia_dinamica_izquierdo_eje: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_eje,\n        retinoscopia_dinamica_izquierdo_miras: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_miras,\n        retinoscopia_dinamica_izquierdo_corn: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_corn,\n        retinoscopia_dinamica_izquierdo_esfera: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_esfera,\n        retinoscopia_dinamica_izquierdo_cilindro: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_cilindro,\n        retinoscopia_dinamica_izquierdo_sombras: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_sombras,\n        retinoscopia_dinamica_izquierdo_av_lejos: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_av_lejos,\n        retinoscopia_dinamica_izquierdo_add: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_add,\n        retinoscopia_dinamica_izquierdo_av_cerca: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_av_cerca,\n        retinoscopia_dinamica_izquierdo_dnp: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_dnp,\n        retinoscopia_dinamica_izquierdo_vortice: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_vortice,\n        retinoscopia_dinamica_izquierdo_mm: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_mm,\n        retinoscopia_dinamica_izquierdo_estatica: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_estatica,\n        retinoscopia_dinamica_izquierdo_dinamica: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_dinamica,\n        retinoscopia_dinamica_izquierdo_normal: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_normal,\n        retinoscopia_dinamica_izquierdo_cycloplejia: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_cycloplejia,\n        retinoscopia_dinamica_izquierdo_otra: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_otra,\n        retinoscopia_dinamica_izquierdo_distancia_al: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_distancia_al,\n        retinoscopia_dinamica_izquierdo_radio_k_1: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_radio_k_1,\n        retinoscopia_dinamica_izquierdo_radio_k_2: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_radio_k_2,\n        retinoscopia_dinamica_izquierdo_otra_refraccion: formData.examen_refractivo_retinoscopia_dinamica_izquierdo_otra_refraccion,\n        subjetivo_derecho_plano: formData.examen_refractivo_subjetivo_derecho_plano,\n        subjetivo_derecho_curvo: formData.examen_refractivo_subjetivo_derecho_curvo,\n        subjetivo_derecho_eje: formData.examen_refractivo_subjetivo_derecho_eje,\n        subjetivo_derecho_miras: formData.examen_refractivo_subjetivo_derecho_miras,\n        subjetivo_derecho_corn: formData.examen_refractivo_subjetivo_derecho_corn,\n        subjetivo_derecho_esfera: formData.examen_refractivo_subjetivo_derecho_esfera,\n        subjetivo_derecho_cilindro: formData.examen_refractivo_subjetivo_derecho_cilindro,\n        subjetivo_derecho_sombras: formData.examen_refractivo_subjetivo_derecho_sombras,\n        subjetivo_derecho_av_lejos: formData.examen_refractivo_subjetivo_derecho_av_lejos,\n        subjetivo_derecho_add: formData.examen_refractivo_subjetivo_derecho_add,\n        subjetivo_derecho_av_cerca: formData.examen_refractivo_subjetivo_derecho_av_cerca,\n        subjetivo_derecho_dnp: formData.examen_refractivo_subjetivo_derecho_dnp,\n        subjetivo_derecho_vortice: formData.examen_refractivo_subjetivo_derecho_vortice,\n        subjetivo_derecho_mm: formData.examen_refractivo_subjetivo_derecho_mm,\n        subjetivo_derecho_estatica: formData.examen_refractivo_subjetivo_derecho_estatica,\n        subjetivo_derecho_dinamica: formData.examen_refractivo_subjetivo_derecho_dinamica,\n        subjetivo_derecho_normal: formData.examen_refractivo_subjetivo_derecho_normal,\n        subjetivo_derecho_cycloplejia: formData.examen_refractivo_subjetivo_derecho_cycloplejia,\n        subjetivo_derecho_otra: formData.examen_refractivo_subjetivo_derecho_otra,\n        subjetivo_derecho_distancia_al: formData.examen_refractivo_subjetivo_derecho_distancia_al,\n        subjetivo_derecho_radio_k_1: formData.examen_refractivo_subjetivo_derecho_radio_k_1,\n        subjetivo_derecho_radio_k_2: formData.examen_refractivo_subjetivo_derecho_radio_k_2,\n        subjetivo_derecho_otra_refraccion: formData.examen_refractivo_subjetivo_derecho_otra_refraccion,\n        subjetivo_izquierdo_plano: formData.examen_refractivo_subjetivo_izquierdo_plano,\n        subjetivo_izquierdo_curvo: formData.examen_refractivo_subjetivo_izquierdo_curvo,\n        subjetivo_izquierdo_eje: formData.examen_refractivo_subjetivo_izquierdo_eje,\n        subjetivo_izquierdo_miras: formData.examen_refractivo_subjetivo_izquierdo_miras,\n        subjetivo_izquierdo_corn: formData.examen_refractivo_subjetivo_izquierdo_corn,\n        subjetivo_izquierdo_esfera: formData.examen_refractivo_subjetivo_izquierdo_esfera,\n        subjetivo_izquierdo_cilindro: formData.examen_refractivo_subjetivo_izquierdo_cilindro,\n        subjetivo_izquierdo_sombras: formData.examen_refractivo_subjetivo_izquierdo_sombras,\n        subjetivo_izquierdo_av_lejos: formData.examen_refractivo_subjetivo_izquierdo_av_lejos,\n        subjetivo_izquierdo_add: formData.examen_refractivo_subjetivo_izquierdo_add,\n        subjetivo_izquierdo_av_cerca: formData.examen_refractivo_subjetivo_izquierdo_av_cerca,\n        subjetivo_izquierdo_dnp: formData.examen_refractivo_subjetivo_izquierdo_dnp,\n        subjetivo_izquierdo_vortice: formData.examen_refractivo_subjetivo_izquierdo_vortice,\n        subjetivo_izquierdo_mm: formData.examen_refractivo_subjetivo_izquierdo_mm,\n        subjetivo_izquierdo_estatica: formData.examen_refractivo_subjetivo_izquierdo_estatica,\n        subjetivo_izquierdo_dinamica: formData.examen_refractivo_subjetivo_izquierdo_dinamica,\n        subjetivo_izquierdo_normal: formData.examen_refractivo_subjetivo_izquierdo_normal,\n        subjetivo_izquierdo_cycloplejia: formData.examen_refractivo_subjetivo_izquierdo_cycloplejia,\n        subjetivo_izquierdo_otra: formData.examen_refractivo_subjetivo_izquierdo_otra,\n        subjetivo_izquierdo_distancia_al: formData.examen_refractivo_subjetivo_izquierdo_distancia_al,\n        subjetivo_izquierdo_radio_k_1: formData.examen_refractivo_subjetivo_izquierdo_radio_k_1,\n        subjetivo_izquierdo_radio_k_2: formData.examen_refractivo_subjetivo_izquierdo_radio_k_2,\n        subjetivo_izquierdo_otra_refraccion: formData.examen_refractivo_subjetivo_izquierdo_otra_refraccion,\n        subjetivo_normal: formData.examen_refractivo_subjetivo_normal,\n        subjetivo_cycloplejia: formData.examen_refractivo_subjetivo_cycloplejia,\n        subjetivo_otra: formData.examen_refractivo_subjetivo_otra,\n        subjetivo_distancia_al: formData.examen_refractivo_subjetivo_distancia_al,\n        \n        // Campos adicionales de examen refractivo\n        otra_refraccion: formData.examen_refractivo_otra_refraccion,\n        radio_k_1: formData.examen_refractivo_radio_k_1,\n        radio_k_2: formData.examen_refractivo_radio_k_2,\n        otra_refraccion_derecho_esfera: formData.examen_refractivo_otra_refraccion_derecho_esfera,\n        otra_refraccion_derecho_cilindro: formData.examen_refractivo_otra_refraccion_derecho_cilindro,\n        otra_refraccion_derecho_eje: formData.examen_refractivo_otra_refraccion_derecho_eje,\n        otra_refraccion_derecho_sombras: formData.examen_refractivo_otra_refraccion_derecho_sombras,\n        otra_refraccion_izquierdo_esfera: formData.examen_refractivo_otra_refraccion_izquierdo_esfera,\n        otra_refraccion_izquierdo_cilindro: formData.examen_refractivo_otra_refraccion_izquierdo_cilindro,\n        otra_refraccion_izquierdo_eje: formData.examen_refractivo_otra_refraccion_izquierdo_eje,\n        otra_refraccion_izquierdo_sombras: formData.examen_refractivo_otra_refraccion_izquierdo_sombras\n      },\n      \n      // EXAMEN OFTALMOLGICO\n      examen_oftalmologico: {\n        pupila_derecho: formData.examen_oftalmologico_pupila_derecho,\n        pupila_izquierdo: formData.examen_oftalmologico_pupila_izquierdo,\n        parpados_derecho: formData.examen_oftalmologico_parpados_derecho,\n        parpados_izquierdo: formData.examen_oftalmologico_parpados_izquierdo,\n        pelicula_lagrimal_derecho: formData.examen_oftalmologico_pelicula_lagrimal_derecho,\n        pelicula_lagrimal_izquierdo: formData.examen_oftalmologico_pelicula_lagrimal_izquierdo,\n        conjuntiva_derecho: formData.examen_oftalmologico_conjuntiva_derecho,\n        conjuntiva_izquierdo: formData.examen_oftalmologico_conjuntiva_izquierdo,\n        cornea_derecho: formData.examen_oftalmologico_cornea_derecho,\n        cornea_izquierdo: formData.examen_oftalmologico_cornea_izquierdo,\n        cristalino_derecho: formData.examen_oftalmologico_cristalino_derecho,\n        cristalino_izquierdo: formData.examen_oftalmologico_cristalino_izquierdo,\n        camara_anterior_derecho: formData.examen_oftalmologico_camara_anterior_derecho,\n        camara_anterior_izquierdo: formData.examen_oftalmologico_camara_anterior_izquierdo,\n        iris_derecho: formData.examen_oftalmologico_iris_derecho,\n        iris_izquierdo: formData.examen_oftalmologico_iris_izquierdo,\n        bruckner: formData.examen_oftalmologico_bruckner\n      },\n      \n      // OFTALMOSCOPIA\n      oftalmoscopia: {\n        derecho_excavacion: formData.oftalmoscopia_derecho_excavacion,\n        derecho_descripcion: formData.oftalmoscopia_derecho_descripcion,\n        izquierdo_excavacion: formData.oftalmoscopia_izquierdo_excavacion,\n        izquierdo_descripcion: formData.oftalmoscopia_izquierdo_descripcion\n      },\n      \n      // FRMULA FINAL\n      formula_final: {\n        derecho_esfera: formData.formula_derecho_esfera,\n        derecho_cilindro: formData.formula_derecho_cilindro,\n        derecho_eje: formData.formula_derecho_eje,\n        derecho_av_lejos: formData.formula_derecho_av_lejos,\n        derecho_add: formData.formula_derecho_add,\n        derecho_av_cerca: formData.formula_derecho_av_cerca,\n        derecho_dnp: formData.formula_derecho_dnp,\n        derecho_recomendacion: formData.formula_derecho_recomendacion,\n        izquierdo_esfera: formData.formula_izquierdo_esfera,\n        izquierdo_cilindro: formData.formula_izquierdo_cilindro,\n        izquierdo_eje: formData.formula_izquierdo_eje,\n        izquierdo_av_lejos: formData.formula_izquierdo_av_lejos,\n        izquierdo_add: formData.formula_izquierdo_add,\n        izquierdo_av_cerca: formData.formula_izquierdo_av_cerca,\n        izquierdo_dnp: formData.formula_izquierdo_dnp,\n        izquierdo_recomendacion: formData.formula_izquierdo_recomendacion\n      },\n      \n      // OBSERVACIONES\n      observaciones: {\n        observaciones: formData.observaciones\n      },\n      \n      // DIAGNSTICO\n      diagnostico: {\n        diagnosticos: [\n          {\n            codigo: formData.diagnostico_codigo_1,\n            diagnostico: formData.diagnostico_diagnostico_1,\n            descripcion: formData.diagnostico_descripcion_1,\n            ojo: formData.diagnostico_ojo_1,\n            principal: formData.diagnostico_principal_1\n          },\n          {\n            codigo: formData.diagnostico_codigo_2,\n            diagnostico: formData.diagnostico_diagnostico_2,\n            descripcion: formData.diagnostico_descripcion_2,\n            ojo: formData.diagnostico_ojo_2,\n            principal: formData.diagnostico_principal_2\n          },\n          {\n            codigo: formData.diagnostico_codigo_3,\n            diagnostico: formData.diagnostico_diagnostico_3,\n            descripcion: formData.diagnostico_descripcion_3,\n            ojo: formData.diagnostico_ojo_3,\n            principal: formData.diagnostico_principal_3\n          },\n          {\n            codigo: formData.diagnostico_codigo_4,\n            diagnostico: formData.diagnostico_diagnostico_4,\n            descripcion: formData.diagnostico_descripcion_4,\n            ojo: formData.diagnostico_ojo_4,\n            principal: formData.diagnostico_principal_4\n          },\n          {\n            codigo: formData.diagnostico_codigo_5,\n            diagnostico: formData.diagnostico_diagnostico_5,\n            descripcion: formData.diagnostico_descripcion_5,\n            ojo: formData.diagnostico_ojo_5,\n            principal: formData.diagnostico_principal_5\n          }\n        ].filter(d => d.codigo || d.diagnostico || d.descripcion) // Solo incluir diagnsticos con datos\n      }\n    };\n  }\n\n  closeForm(): void {\n    this.showCreateForm = false;\n    this.isEditing = false;\n    this.editingHistoriaId = null;\n    this.historiaForm.reset();\n    this.selectedHistoriaEditable = false;\n    this.selectedHistoriaEditMessage = '';\n    this.selectedHistoriaEditableUntil = null;\n    this.selectedHistoriaCreatedAt = null;\n  }\n\n  toggleSeccion(seccion: string): void {\n    this.seccionesDesplegadas[seccion] = !this.seccionesDesplegadas[seccion];\n  }\n\n  // Mtodo reutilizable para alternar visibilidad de filas en tablas\n  toggleFila(filaKey: string): void {\n    this.filasVisibles[filaKey] = !this.filasVisibles[filaKey];\n  }\n\n  // Mtodo para verificar si una fila est visible\n  isFilaVisible(filaKey: string): boolean {\n    return this.filasVisibles[filaKey] || false;\n  }\n\n  volverAPacientes(): void {\n    this.router.navigate(['/pacientes']);\n  }\n\n  // Mtodos para manejar el array de diagnsticos\n  getDiagnosticoArray(): FormArray {\n    return this.historiaForm.get('diagnostico') as FormArray;\n  }\n\n  addDiagnostico(): void {\n    const diagnosticoGroup = this.fb.group({\n      codigo: [''],\n      diagnostico: [''],\n      descripcion: [''],\n      ojo: [''],\n      principal: [false]\n    });\n    this.getDiagnosticoArray().push(diagnosticoGroup);\n  }\n\n  removeDiagnostico(index: number): void {\n    this.getDiagnosticoArray().removeAt(index);\n  }\n\n  // Mtodo para inicializar diagnsticos vacos\n  initializeDiagnosticoArray(): void {\n    const diagnosticoArray = this.getDiagnosticoArray();\n    diagnosticoArray.clear();\n    // Agregar 5 diagnsticos vacos como en la imagen\n    for (let i = 0; i < 5; i++) {\n      this.addDiagnostico();\n    }\n  }\n\n  // Mtodos para validacin y formateo de campos de lensometra\n  validateLensometriaField(event: any): void {\n    const input = event.target;\n    const value = input.value;\n    const pattern = /^[+-]?(\\d+\\.?\\d{0,2}|\\.\\d{1,2})$/;\n    \n    if (value && !pattern.test(value)) {\n      input.classList.add('invalid');\n    } else {\n      input.classList.remove('invalid');\n    }\n  }\n\n  formatLensometriaField(event: any): void {\n    const input = event.target;\n    let value = input.value.trim();\n    \n    if (!value) {\n      input.classList.remove('invalid');\n      return;\n    }\n\n    // Remover caracteres no vlidos excepto +, -, nmeros y punto\n    value = value.replace(/[^+\\-0-9.]/g, '');\n    \n    // Validar formato\n    const pattern = /^[+-]?(\\d+\\.?\\d{0,2}|\\.\\d{1,2})$/;\n    if (!pattern.test(value)) {\n      input.classList.add('invalid');\n      return;\n    }\n\n    // Convertir a nmero para formateo\n    let numValue = parseFloat(value);\n    \n    if (isNaN(numValue)) {\n      input.classList.add('invalid');\n      return;\n    }\n\n    // Formatear con 2 decimales\n    let formattedValue = numValue.toFixed(2);\n    \n    // Agregar signo + si es positivo\n    if (numValue > 0) {\n      formattedValue = '+' + formattedValue;\n    }\n    \n    // Actualizar el valor en el input\n    input.value = formattedValue;\n    input.classList.remove('invalid');\n    \n    // Actualizar el FormControl\n    const controlName = input.getAttribute('formControlName');\n    if (controlName) {\n      this.historiaForm.get(controlName)?.setValue(formattedValue);\n    }\n  }\n\n  // Mtodos para formateo especfico de campos de esfera\n  formatEsferaField(event: any): void {\n    const input = event.target;\n    let value = input.value.trim();\n    \n    if (!value) {\n      input.classList.remove('invalid');\n      return;\n    }\n\n    // Remover caracteres no vlidos excepto +, -, nmeros y punto\n    value = value.replace(/[^+\\-0-9.]/g, '');\n    \n    // Validar formato\n    const pattern = /^[+-]?(\\d+\\.?\\d{0,2}|\\.\\d{1,2})$/;\n    if (!pattern.test(value)) {\n      input.classList.add('invalid');\n      return;\n    }\n\n    // Convertir a nmero para formateo\n    let numValue = parseFloat(value);\n    \n    if (isNaN(numValue)) {\n      input.classList.add('invalid');\n      return;\n    }\n\n    // Verificar si el valor original tena signo negativo\n    const tieneSignoNegativo = value.trim().startsWith('-');\n    \n    // Formatear con 2 decimales y agregar signo segn corresponda\n    // Si tiene signo negativo, mantenerlo; si no, agregar signo +\n    let formattedValue = tieneSignoNegativo \n      ? '-' + Math.abs(numValue).toFixed(2)\n      : '+' + Math.abs(numValue).toFixed(2);\n    \n    // Actualizar el valor en el input\n    input.value = formattedValue;\n    input.classList.remove('invalid');\n    \n    // Actualizar el FormControl\n    const controlName = input.getAttribute('formControlName');\n    if (controlName) {\n      this.historiaForm.get(controlName)?.setValue(formattedValue);\n    }\n  }\n\n  // Mtodos para formateo especfico de campos de cilindro\n  formatCilindroField(event: any): void {\n    const input = event.target;\n    let value = input.value.trim();\n    \n    if (!value) {\n      input.classList.remove('invalid');\n      return;\n    }\n\n    // Remover caracteres no vlidos excepto +, -, nmeros y punto\n    value = value.replace(/[^+\\-0-9.]/g, '');\n    \n    // Validar formato\n    const pattern = /^[+-]?(\\d+\\.?\\d{0,2}|\\.\\d{1,2})$/;\n    if (!pattern.test(value)) {\n      input.classList.add('invalid');\n      return;\n    }\n\n    // Convertir a nmero para formateo\n    let numValue = parseFloat(value);\n    \n    if (isNaN(numValue)) {\n      input.classList.add('invalid');\n      return;\n    }\n\n    // Formatear con 2 decimales y siempre agregar signo -\n    let formattedValue = '-' + Math.abs(numValue).toFixed(2);\n    \n    // Actualizar el valor en el input\n    input.value = formattedValue;\n    input.classList.remove('invalid');\n    \n    // Actualizar el FormControl\n    const controlName = input.getAttribute('formControlName');\n    if (controlName) {\n      this.historiaForm.get(controlName)?.setValue(formattedValue);\n    }\n  }\n\n  // Mtodos para validacin y formateo de campos de eje\n  validateEjeField(event: any): void {\n    const input = event.target;\n    const value = input.value;\n    const pattern = /^\\d+$/;\n    \n    if (value && !pattern.test(value)) {\n      input.classList.add('invalid');\n    } else {\n      input.classList.remove('invalid');\n    }\n  }\n\n  formatEjeField(event: any): void {\n    const input = event.target;\n    let value = input.value.trim();\n    \n    if (!value) {\n      input.classList.remove('invalid');\n      return;\n    }\n\n    // Remover caracteres no vlidos excepto nmeros\n    value = value.replace(/[^0-9]/g, '');\n    \n    // Validar que solo contenga nmeros enteros positivos\n    const pattern = /^\\d+$/;\n    if (!pattern.test(value)) {\n      input.classList.add('invalid');\n      return;\n    }\n\n    // Convertir a nmero para validar que sea entero positivo\n    let numValue = parseInt(value, 10);\n    \n    if (isNaN(numValue) || numValue < 0) {\n      input.classList.add('invalid');\n      return;\n    }\n\n    // Mantener el valor tal como est (sin signo +, sin decimales)\n    input.value = value;\n    input.classList.remove('invalid');\n    \n    // Actualizar el FormControl\n    const controlName = input.getAttribute('formControlName');\n    if (controlName) {\n      this.historiaForm.get(controlName)?.setValue(value);\n    }\n  }\n\n  // Mtodos para manejar la edicin de grficos de versiones\n  onVersionesVClick(event: Event, ojo: 'derecho' | 'izquierdo'): void {\n    const target = event.target as SVGTextElement;\n    const position = target.getAttribute('data-position');\n    \n    if (!position) return;\n    \n    // Remover clase editing de otros elementos\n    const svg = target.closest('svg');\n    if (svg) {\n      svg.querySelectorAll('.versiones-v.editing').forEach(el => {\n        el.classList.remove('editing');\n      });\n    }\n    \n    // Agregar clase editing al elemento actual\n    target.classList.add('editing');\n    \n    // Crear input temporal para edicin\n    this.createTemporaryInput(target, ojo, position);\n  }\n\n  onVersionesKeyDown(event: KeyboardEvent, ojo: 'derecho' | 'izquierdo', position: string): void {\n    // Enter o Espacio para editar\n    if (event.key === 'Enter' || event.key === ' ') {\n      event.preventDefault();\n      // Simular click\n      const clickEvent = new MouseEvent('click', {\n        bubbles: true,\n        cancelable: true,\n        view: window\n      });\n      const target = event.target as SVGTextElement;\n      target.dispatchEvent(clickEvent);\n    } else if (event.key === 'Tab') {\n      // Tab debe funcionar normalmente para navegar\n      // El sistema de navegacin Tab ya lo maneja automticamente\n    }\n  }\n\n  onToggleButtonKeyDown(event: KeyboardEvent, filaKey: string): void {\n    // Enter o Espacio para toggle\n    if (event.key === 'Enter' || event.key === ' ') {\n      event.preventDefault();\n      this.toggleFila(filaKey);\n    } else if (event.key === 'Tab') {\n      // Tab debe funcionar normalmente para navegar\n      // El sistema de navegacin Tab ya lo maneja automticamente\n    }\n  }\n\n  private createTemporaryInput(textElement: SVGTextElement, ojo: string, position: string): void {\n    const svg = textElement.closest('svg');\n    if (!svg) return;\n    \n    const rect = textElement.getBoundingClientRect();\n    const svgRect = svg.getBoundingClientRect();\n    \n    // Crear input temporal\n    const input = document.createElement('input');\n    input.type = 'text';\n    input.value = textElement.textContent || '';\n    input.className = 'versiones-input-temp';\n    input.style.cssText = `\n      position: absolute;\n      left: ${rect.left - svgRect.left}px;\n      top: ${rect.top - svgRect.top - 2}px;\n      width: 30px;\n      height: 20px;\n      font-size: 16px;\n      font-family: 'Courier New', monospace;\n      text-align: center;\n      border: 2px solid #0d6efd;\n      border-radius: 4px;\n      background: white;\n      z-index: 1000;\n    `;\n    \n    // Agregar al contenedor del SVG\n    const container = svg.parentElement;\n    if (container) {\n      container.style.position = 'relative';\n      container.appendChild(input);\n      \n      // Seleccionar texto y enfocar\n      input.focus();\n      input.select();\n      \n      // Manejar eventos\n      input.addEventListener('blur', () => {\n        this.saveVersionesValue(input, textElement, ojo, position);\n      });\n      \n      input.addEventListener('keydown', (e) => {\n        if (e.key === 'Enter') {\n          e.preventDefault();\n          this.saveVersionesValue(input, textElement, ojo, position);\n        } else if (e.key === 'Escape') {\n          this.cancelVersionesEdit(input, textElement);\n        }\n      });\n    }\n  }\n\n  private saveVersionesValue(input: HTMLInputElement, textElement: SVGTextElement, ojo: string, position: string): void {\n    let value = input.value.trim();\n    \n    // Validar valor (solo permitir -, --, ---, +, ++, +++, )\n    const validValues = ['-', '--', '---', '+', '++', '+++', ''];\n    if (!validValues.includes(value)) {\n      value = ''; // Valor por defecto si no es vlido\n    }\n    \n    // Actualizar el texto en el SVG\n    textElement.textContent = value;\n    textElement.classList.remove('editing');\n    \n    // Convertir posicin de guiones a guiones bajos para coincidir con FormControls\n    const positionFormatted = position.replace(/-/g, '_');\n    \n    // Actualizar el FormControl correspondiente\n    const controlName = `examen_motor_versiones_${ojo}_${positionFormatted}`;\n    this.historiaForm.get(controlName)?.setValue(value);\n    \n    // Remover input temporal\n    input.remove();\n  }\n\n  private cancelVersionesEdit(input: HTMLInputElement, textElement: SVGTextElement): void {\n    textElement.classList.remove('editing');\n    input.remove();\n  }\n\n  // Funcin para sincronizar valores del SVG con el formulario\n  private syncVersionesFromSVG(): void {\n    const svgs = document.querySelectorAll('.versiones-svg');\n    \n    svgs.forEach((svg, svgIndex) => {\n      const ojo = svgIndex === 0 ? 'derecho' : 'izquierdo';\n      const textElements = svg.querySelectorAll('.versiones-v');\n      \n      textElements.forEach(textElement => {\n        const position = textElement.getAttribute('data-position');\n        const value = textElement.textContent || '';\n        \n        if (position) {\n          // Convertir posicin de guiones a guiones bajos para coincidir con FormControls\n          const positionFormatted = position.replace(/-/g, '_');\n          const controlName = `examen_motor_versiones_${ojo}_${positionFormatted}`;\n          \n          this.historiaForm.get(controlName)?.setValue(value);\n        }\n      });\n    });\n  }\n\n  // Funcin para sincronizar valores del formulario al SVG\n  private syncVersionesToSVG(): void {\n    const svgs = document.querySelectorAll('.versiones-svg');\n    \n    svgs.forEach((svg, svgIndex) => {\n      const ojo = svgIndex === 0 ? 'derecho' : 'izquierdo';\n      const textElements = svg.querySelectorAll('.versiones-v');\n      \n      textElements.forEach(textElement => {\n        const position = textElement.getAttribute('data-position');\n        \n        if (position) {\n          // Convertir posicin de guiones a guiones bajos para coincidir con FormControls\n          const positionFormatted = position.replace(/-/g, '_');\n          const controlName = `examen_motor_versiones_${ojo}_${positionFormatted}`;\n          const value = this.historiaForm.get(controlName)?.value || '';\n          textElement.textContent = value;\n        }\n      });\n    });\n  }\n\n  // Mtodos para clculo automtico de keratometra\n  private setupKeratometriaCalculations(): void {\n    \n    // Listener para ojo derecho\n    this.historiaForm.get('examen_refractivo_keratometria_derecho_plano')?.valueChanges.subscribe(() => {\n      this.calculateKeratometriaDerecho();\n    });\n    \n    this.historiaForm.get('examen_refractivo_keratometria_derecho_curvo')?.valueChanges.subscribe(() => {\n      this.calculateKeratometriaDerecho();\n    });\n\n    // Listener para ojo izquierdo\n    this.historiaForm.get('examen_refractivo_keratometria_izquierdo_plano')?.valueChanges.subscribe(() => {\n      this.calculateKeratometriaIzquierdo();\n    });\n    \n    this.historiaForm.get('examen_refractivo_keratometria_izquierdo_curvo')?.valueChanges.subscribe(() => {\n      this.calculateKeratometriaIzquierdo();\n    });\n    \n  }\n\n  // Configurar sincronizacin unidireccional: Examen Refractivo  Frmula\n  private setupExamenRefractivoSync(): void {\n    const syncFieldsForEye = (eye: 'derecho' | 'izquierdo') => {\n      const fieldMappings = [\n        { from: `examen_refractivo_subjetivo_${eye}_esfera`, to: `formula_${eye}_esfera` },\n        { from: `examen_refractivo_subjetivo_${eye}_cilindro`, to: `formula_${eye}_cilindro` },\n        { from: `examen_refractivo_subjetivo_${eye}_eje`, to: `formula_${eye}_eje` },\n        { from: `examen_refractivo_subjetivo_${eye}_av_lejos`, to: `formula_${eye}_av_lejos` },\n        { from: `examen_refractivo_subjetivo_${eye}_add`, to: `formula_${eye}_add` },\n        { from: `examen_refractivo_subjetivo_${eye}_av_cerca`, to: `formula_${eye}_av_cerca` },\n        { from: `examen_refractivo_subjetivo_${eye}_dnp`, to: `formula_${eye}_dnp` }\n      ];\n\n      fieldMappings.forEach(mapping => {\n        const sourceControl = this.historiaForm.get(mapping.from);\n        const targetControl = this.historiaForm.get(mapping.to);\n        \n        if (sourceControl && targetControl) {\n          sourceControl.valueChanges.subscribe(value => {\n            targetControl.setValue(value, { emitEvent: false });\n          });\n        }\n      });\n    };\n\n    syncFieldsForEye('derecho');\n    syncFieldsForEye('izquierdo');\n  }\n\n  // Configurar actualizacin automtica de fecha_control basado en fecha_consulta\n  private setupFechaControlSync(): void {\n    const fechaConsultaControl = this.historiaForm.get('fecha_consulta');\n    const fechaControlControl = this.historiaForm.get('fecha_control');\n    \n    if (fechaConsultaControl && fechaControlControl) {\n      fechaConsultaControl.valueChanges.subscribe(fechaConsulta => {\n        if (fechaConsulta) {\n          const fechaControl = this.calcularFechaControl(fechaConsulta);\n          fechaControlControl.setValue(fechaControl, { emitEvent: false });\n        }\n      });\n      \n      // Inicializar fecha_control solo si fecha_consulta tiene valor y fecha_control est vaco\n      // Esto evita sobrescribir fecha_control cuando se carga un formulario existente\n      if (fechaConsultaControl.value && !fechaControlControl.value) {\n        const fechaControl = this.calcularFechaControl(fechaConsultaControl.value);\n        fechaControlControl.setValue(fechaControl, { emitEvent: false });\n      }\n    }\n  }\n\n  // Obtener fecha local en formato YYYY-MM-DD (sin conversin UTC)\n  private getFechaLocal(): string {\n    const ahora = new Date();\n    const ao = ahora.getFullYear();\n    const mes = String(ahora.getMonth() + 1).padStart(2, '0');\n    const dia = String(ahora.getDate()).padStart(2, '0');\n    return `${ao}-${mes}-${dia}`;\n  }\n\n  // Calcular fecha_control (fecha_consulta + 1 ao)\n  private calcularFechaControl(fechaConsulta: string): string {\n    if (!fechaConsulta) {\n      return '';\n    }\n    \n    // Parsear la fecha manualmente para evitar problemas de zona horaria\n    // El formato esperado es YYYY-MM-DD\n    const partes = fechaConsulta.split('-');\n    if (partes.length !== 3) {\n      return '';\n    }\n    \n    const ao = parseInt(partes[0], 10);\n    const mes = parseInt(partes[1], 10);\n    const dia = parseInt(partes[2], 10);\n    \n    // Sumar 1 ao\n    const nuevoAo = ao + 1;\n    \n    // Formatear la fecha resultante\n    const mesFormateado = String(mes).padStart(2, '0');\n    const diaFormateado = String(dia).padStart(2, '0');\n    return `${nuevoAo}-${mesFormateado}-${diaFormateado}`;\n  }\n\n  // Formatear valor de keratometra cuando pierde el foco\n  formatKeratometriaOnBlur(fieldName: string): void {\n    const control = this.historiaForm.get(fieldName);\n    if (control) {\n      const value = control.value;\n      if (value && value !== '') {\n        const numValue = parseFloat(value);\n        if (!isNaN(numValue)) {\n          const formattedValue = numValue.toFixed(2);\n          control.setValue(formattedValue, { emitEvent: false });\n        }\n      }\n    }\n  }\n\n  // Permitir solo nmeros y punto decimal en campos de keratometra\n  onKeratometriaKeyPress(event: KeyboardEvent): void {\n    const char = event.key;\n    const currentValue = (event.target as HTMLInputElement).value;\n    \n    // Permitir teclas de control (backspace, delete, tab, escape, enter, etc.)\n    if (event.ctrlKey || event.metaKey || event.altKey) {\n      return;\n    }\n    \n    // Permitir teclas de navegacin\n    if (['Backspace', 'Delete', 'Tab', 'Escape', 'Enter', 'ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown'].includes(char)) {\n      return;\n    }\n    \n    // Permitir solo nmeros y un punto decimal\n    if (!/^[0-9.]$/.test(char)) {\n      event.preventDefault();\n      return;\n    }\n    \n    // Permitir solo un punto decimal\n    if (char === '.' && currentValue.includes('.')) {\n      event.preventDefault();\n      return;\n    }\n    \n    // No permitir punto al inicio\n    if (char === '.' && currentValue === '') {\n      event.preventDefault();\n      return;\n    }\n  }\n\n  private calculateKeratometriaDerecho(): void {\n    const plano = parseFloat(this.historiaForm.get('examen_refractivo_keratometria_derecho_plano')?.value || '0');\n    const curvo = parseFloat(this.historiaForm.get('examen_refractivo_keratometria_derecho_curvo')?.value || '0');\n    \n    \n    const corn = plano - curvo;\n    const cornFormatted = corn.toFixed(2);\n    \n    \n    this.historiaForm.get('examen_refractivo_keratometria_derecho_corn')?.setValue(cornFormatted, { emitEvent: false });\n  }\n\n  private calculateKeratometriaIzquierdo(): void {\n    const plano = parseFloat(this.historiaForm.get('examen_refractivo_keratometria_izquierdo_plano')?.value || '0');\n    const curvo = parseFloat(this.historiaForm.get('examen_refractivo_keratometria_izquierdo_curvo')?.value || '0');\n    \n    \n    const corn = plano - curvo;\n    const cornFormatted = corn.toFixed(2);\n    \n    \n    this.historiaForm.get('examen_refractivo_keratometria_izquierdo_corn')?.setValue(cornFormatted, { emitEvent: false });\n  }\n\n\n  // Funcin nica para calcular vrtice (basada en la funcin proporcionada)\n  private calcular_vortice_1(esfera: number, distancia: number): number {\n    // Paso 1: calcular valor base\n    let base: number;\n    try {\n      base = 1 / (1 / esfera - (distancia / 1000));\n      if (!isFinite(base)) base = 0; // similar a IFERROR\n    } catch {\n      base = 0;\n    }\n\n    // Paso 2: determinar signo\n    const sign = Math.sign(base);\n\n    // Paso 3: definir mltiplo (0.25 con signo)\n    const multiple = sign * 0.25;\n\n    // Paso 4: funcin para imitar MROUND de Excel\n    function mround(value: number, multiple: number): number {\n      if (multiple === 0) return 0;\n      return Math.round(value / multiple) * multiple;\n    }\n\n    // Paso 5: devolver resultado\n    return mround(base, multiple);\n  }\n\n  // Funcin para calcular MM (basada en la funcin proporcionada)\n  private calcFormula(esfera: number, distancia: number, cilindro: number): number {\n    try {\n      const dist = distancia / 1000; // convertir a metros, como en Excel (M68/1000)\n  \n      if (!isFinite(esfera) || esfera === 0) return 0;\n  \n      // Primer valor: (1 / ((1 / esfera) - dist))\n      const val1Raw = 1 / ((1 / esfera) - dist);\n      const val1 = isFinite(val1Raw) ? val1Raw : 0;\n  \n      // Segundo valor: (1 / ((1 / (esfera - ABS(cilindro))) - dist))\n      // En Excel: (1 / (B70 + ABS(C70)*-1))    (esfera - ABS(cilindro))\n      const val2Raw = 1 / ((1 / (esfera - Math.abs(cilindro))) - dist);\n      const val2 = isFinite(val2Raw) ? val2Raw : 0;\n  \n      // Diferencia absoluta\n      const diffAbs = Math.abs(val1 - val2);\n  \n      // Determinar signo segn Excel\n      const signCheck = (diffAbs * -1) < 0 ? -1 : 1;\n  \n      // Aplicar signo al nmero antes de redondear (corrige el error anterior)\n      const numberToRound = diffAbs * signCheck;\n  \n      // Redondear al mltiplo ms cercano de 0.25 (MROUND)\n      const rounded = Math.round(numberToRound / 0.25) * 0.25;\n  \n      return rounded;\n    } catch {\n      return 0;\n    }\n  }\n\n  // Funcin nica para recalcular ambos vrtices\n  recalcularVortices(): void {\n    // Obtener valores del formulario\n    const esferaDerechaStr = this.historiaForm.get('examen_refractivo_subjetivo_derecho_esfera')?.value || '';\n    const esferaIzquierdaStr = this.historiaForm.get('examen_refractivo_subjetivo_izquierdo_esfera')?.value || '';\n    const distanciaStr = this.historiaForm.get('examen_refractivo_subjetivo_distancia_al')?.value || '';\n\n    const distancia = parseFloat(distanciaStr);\n    \n    // Calcular vrtice derecho\n    if (esferaDerechaStr && !isNaN(distancia)) {\n      const esfera = parseFloat(esferaDerechaStr);\n      if (!isNaN(esfera)) {\n        const resultado = this.calcular_vortice_1(esfera, distancia);\n        const resultadoFormateado = resultado >= 0 ? `+${resultado.toFixed(2)}` : resultado.toFixed(2);\n        this.historiaForm.get('examen_refractivo_subjetivo_derecho_vortice')?.setValue(resultadoFormateado, { emitEvent: false });\n      }\n    } else {\n      this.historiaForm.get('examen_refractivo_subjetivo_derecho_vortice')?.setValue('+0.00', { emitEvent: false });\n    }\n\n    // Calcular vrtice izquierdo\n    if (esferaIzquierdaStr && !isNaN(distancia)) {\n      const esfera = parseFloat(esferaIzquierdaStr);\n      if (!isNaN(esfera)) {\n        const resultado = this.calcular_vortice_1(esfera, distancia);\n        const resultadoFormateado = resultado >= 0 ? `+${resultado.toFixed(2)}` : resultado.toFixed(2);\n        this.historiaForm.get('examen_refractivo_subjetivo_izquierdo_vortice')?.setValue(resultadoFormateado, { emitEvent: false });\n      }\n    } else {\n      this.historiaForm.get('examen_refractivo_subjetivo_izquierdo_vortice')?.setValue('+0.00', { emitEvent: false });\n    }\n  }\n\n  // Funcin nica para recalcular ambos campos MM\n  recalcularMM(): void {\n    // Obtener valores del formulario\n    const esferaDerechaStr = this.historiaForm.get('examen_refractivo_subjetivo_derecho_esfera')?.value || '';\n    const cilindroDerechoStr = this.historiaForm.get('examen_refractivo_subjetivo_derecho_cilindro')?.value || '';\n    const esferaIzquierdaStr = this.historiaForm.get('examen_refractivo_subjetivo_izquierdo_esfera')?.value || '';\n    const cilindroIzquierdoStr = this.historiaForm.get('examen_refractivo_subjetivo_izquierdo_cilindro')?.value || '';\n    const distanciaStr = this.historiaForm.get('examen_refractivo_subjetivo_distancia_al')?.value || '';\n\n    const distancia = parseFloat(distanciaStr);\n\n    // Calcular MM derecho\n    if (esferaDerechaStr !== '' && cilindroDerechoStr !== '' && !isNaN(distancia)) {\n      const esfera = parseFloat(esferaDerechaStr);\n      const cilindro = parseFloat(cilindroDerechoStr);\n      if (!isNaN(esfera) && !isNaN(cilindro)) {\n        const resultado = this.calcFormula(esfera, distancia, cilindro);\n        const resultadoFormateado = resultado >= 0 ? `+${resultado.toFixed(2)}` : resultado.toFixed(2);\n        this.historiaForm.get('examen_refractivo_subjetivo_derecho_mm')?.setValue(resultadoFormateado, { emitEvent: false });\n      }\n    } else {\n      this.historiaForm.get('examen_refractivo_subjetivo_derecho_mm')?.setValue('0.00', { emitEvent: false });\n    }\n\n    // Calcular MM izquierdo\n    if (esferaIzquierdaStr !== '' && cilindroIzquierdoStr !== '' && !isNaN(distancia)) {\n      const esfera = parseFloat(esferaIzquierdaStr);\n      const cilindro = parseFloat(cilindroIzquierdoStr);\n      if (!isNaN(esfera) && !isNaN(cilindro)) {\n        const resultado = this.calcFormula(esfera, distancia, cilindro);\n        const resultadoFormateado = resultado >= 0 ? `+${resultado.toFixed(2)}` : resultado.toFixed(2);\n        this.historiaForm.get('examen_refractivo_subjetivo_izquierdo_mm')?.setValue(resultadoFormateado, { emitEvent: false });\n      }\n    } else {\n      this.historiaForm.get('examen_refractivo_subjetivo_izquierdo_mm')?.setValue('0.00', { emitEvent: false });\n    }\n  }\n\n  \n  // Mtodos para manejar cambios directos en los inputs\n  onFechaConsultaChange(): void {\n    const fechaConsultaControl = this.historiaForm.get('fecha_consulta');\n    const fechaControlControl = this.historiaForm.get('fecha_control');\n    \n    if (fechaConsultaControl && fechaControlControl) {\n      const fechaConsulta = fechaConsultaControl.value;\n      if (fechaConsulta) {\n        const fechaControl = this.calcularFechaControl(fechaConsulta);\n        fechaControlControl.setValue(fechaControl, { emitEvent: false });\n      }\n    }\n  }\n\n  onEsferaDerechaChange(event: any): void {\n    this.recalcularVortices();\n    this.recalcularMM();\n  }\n\n  onEsferaIzquierdaChange(event: any): void {\n    this.recalcularVortices();\n    this.recalcularMM();\n  }\n\n  onCilindroDerechoChange(event: any): void {\n    this.recalcularMM();\n  }\n\n  onCilindroIzquierdoChange(event: any): void {\n    this.recalcularMM();\n  }\n\n  onDistanciaChange(event: any): void {\n    this.recalcularVortices();\n    this.recalcularMM();\n  }\n\n  // Prevenir envo del formulario al presionar Enter y manejar Tab\n  onKeyDown(event: Event): void {\n    const keyboardEvent = event as KeyboardEvent;\n    const target = event.target as HTMLElement;\n    \n    // Manejar Tab para inputs, textareas, selects y botones con tabindex\n    if (keyboardEvent.key === 'Tab' && \n        (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.tagName === 'SELECT' || \n         (target.tagName === 'BUTTON' && target.getAttribute('tabindex') !== null))) {\n      this.handleTabNavigation(keyboardEvent);\n    } else if (keyboardEvent.key === 'Enter') {\n      // Solo permitir envo si se presiona Enter en el botn de guardar\n      if (target.tagName !== 'BUTTON' || !target.textContent?.includes('Guardar')) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    }\n  }\n\n  handleTabNavigation(event: KeyboardEvent): void {\n    const currentElement = event.target as HTMLElement;\n    \n    // Identificar campo actual (por formControlName o por ID)\n    let campoActual = '';\n    if (currentElement.tagName === 'text') {\n      // Es un elemento SVG\n      campoActual = currentElement.id || '';\n    } else if (currentElement.tagName === 'BUTTON') {\n      // Es un botn\n      campoActual = currentElement.id || '';\n    } else {\n      // Es un input/textarea/select\n      campoActual = currentElement.getAttribute('formControlName') || currentElement.id || '';\n    }\n    \n    if (!campoActual) return;\n    \n    const indiceActual = this.tabOrder.indexOf(campoActual);\n    \n    if (indiceActual === -1) return;\n    \n    // Obtener el formulario para las bsquedas\n    const formElement = currentElement.closest('form');\n    if (!formElement) return;\n    \n    // Determinar el ndice del siguiente campo\n    const siguienteIndice = event.shiftKey ? indiceActual - 1 : indiceActual + 1;\n    \n    // Buscar el siguiente campo vlido (con seccin abierta y visible en DOM)\n    const siguienteCampo = this.encontrarSiguienteCampoValido(siguienteIndice, event.shiftKey, formElement);\n    \n    if (siguienteCampo) {\n      event.preventDefault();\n      \n      // Buscar el elemento - puede ser por formControlName o por ID\n      let siguienteElemento: HTMLElement | null = null;\n      \n      // Intentar buscar por formControlName primero\n      siguienteElemento = formElement.querySelector(`[formControlName=\"${siguienteCampo}\"]`);\n      \n      // Si no se encuentra, buscar por ID (para elementos SVG o botones)\n      if (!siguienteElemento) {\n        siguienteElemento = document.getElementById(siguienteCampo);\n      }\n      \n      if (siguienteElemento && (siguienteElemento instanceof HTMLInputElement || siguienteElemento instanceof HTMLTextAreaElement || siguienteElemento instanceof HTMLSelectElement || siguienteElemento instanceof SVGTextElement || siguienteElemento instanceof HTMLButtonElement)) {\n        setTimeout(() => {\n          siguienteElemento!.focus();\n          if (siguienteElemento instanceof HTMLInputElement || siguienteElemento instanceof HTMLTextAreaElement) {\n            siguienteElemento.select();\n          }\n        }, 10);\n      }\n    }\n    // Si no hay siguiente campo vlido, dejar que el navegador maneje la navegacin normal\n  }\n\n  encontrarSiguienteCampoValido(indice: number, retroceder: boolean, formElement: Element): string | null {\n    // Buscar en la direccin especificada\n    let i = indice;\n    \n    if (retroceder) {\n      // Buscar retrocediendo\n      while (i >= 0) {\n        const campo = this.tabOrder[i];\n        if (this.esSeccionAbierta(campo) && this.esCampoVisible(campo, formElement)) {\n          return campo;\n        }\n        i--;\n      }\n    } else {\n      // Buscar avanzando\n      while (i < this.tabOrder.length) {\n        const campo = this.tabOrder[i];\n        if (this.esSeccionAbierta(campo) && this.esCampoVisible(campo, formElement)) {\n          return campo;\n        }\n        i++;\n      }\n    }\n    \n    return null;\n  }\n\n  esCampoVisible(campo: string, formElement: Element): boolean {\n    // Verificar si el campo existe y es visible en el DOM\n    let elemento: Element | null = null;\n    \n    // Buscar por formControlName primero\n    elemento = formElement.querySelector(`[formControlName=\"${campo}\"]`);\n    \n    // Si no se encuentra, buscar por ID (para elementos SVG)\n    if (!elemento) {\n      elemento = document.getElementById(campo);\n    }\n    \n    if (!elemento) return false; // Campo no existe en el DOM\n    \n    // Verificar si el elemento es visible\n    const estilo = window.getComputedStyle(elemento as HTMLElement);\n    const visible = estilo.display !== 'none' && estilo.visibility !== 'hidden';\n    const enDOM = (elemento as HTMLElement).offsetParent !== null;\n    \n    return visible && enDOM;\n  }\n\n  esSeccionAbierta(campo: string): boolean {\n    const seccion = this.campoASeccionMap[campo];\n    if (!seccion) return true; // Si no tiene seccin asignada, considerar abierta\n    \n    return this.seccionesDesplegadas[seccion] === true;\n  }\n\n  // Generar PDF de la historia clnica\n  generatePDF(historia: HistoriaClinica): void {\n    if (!historia.id) {\n      this.toastService.showError('No se encontr el ID de la historia clnica');\n      return;\n    }\n\n    // Generar URL del endpoint\n    const token = localStorage.getItem('token');\n    const url = `${environment.apiUrl}/historias-clinicas/${historia.id}/pdf`;\n    \n    // Crear enlace para descargar el PDF\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `historia-clinica-${historia.id}.pdf`;\n    \n    // Agregar token de autorizacin\n    if (token) {\n      link.href += `?token=${token}`;\n    }\n    \n    // Simular click para descargar\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    \n    this.toastService.showSuccess('PDF generado exitosamente');\n  }\n\n  // Generar PDF desde la vista de consulta\n  generatePDFFromView(): void {\n    if (!this.editingHistoriaId) {\n      this.toastService.showError('No hay historia clnica seleccionada');\n      return;\n    }\n\n    // Buscar la historia actual\n    const historia = this.historias.find(h => h.id === this.editingHistoriaId);\n    if (!historia) {\n      this.toastService.showError('No se encontr la historia clnica');\n      return;\n    }\n\n    this.generatePDF(historia);\n  }\n}\n","<div class=\"container-fluid\">\n  <!-- Header -->\n  <div class=\"row mb-4\">\n    <div class=\"col-12\">\n      <div class=\"d-flex justify-content-between align-items-center\">\n        <div>\n          <h2>Historias Clnicas</h2>\n          @if (pacienteNombre) {\n            <p class=\"text-muted mb-0\">Paciente: {{ pacienteNombre }}</p>\n          }\n        </div>\n        <div>\n          <button class=\"btn btn-secondary me-2\" (click)=\"volverAPacientes()\">\n            <i class=\"fas fa-arrow-left\"></i> Volver a Pacientes\n          </button>\n          <button class=\"btn btn-primary\" (click)=\"showCreateFormModal()\">\n            <i class=\"fas fa-plus\"></i> Nueva Historia Clnica\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Lista de Historias Clnicas -->\n  @if (!showCreateForm) {\n  <div class=\"row\">\n    <div class=\"col-12\">\n      <div class=\"card\">\n        <div class=\"card-body\">\n            @if (historias.length > 0) {\n              <div class=\"historias-container\">\n                <!-- Header -->\n                <div class=\"historias-header\">\n                  <div class=\"historia-cell\">Fecha Consulta</div>\n                  <div class=\"historia-cell\">Hora</div>\n                  <div class=\"historia-cell\">Motivo Consulta</div>\n                  <div class=\"historia-cell\">Acciones</div>\n                </div>\n                \n                <!-- Rows -->\n                @for (historia of historias; track historia.id) {\n                  <div class=\"historia-row\" (click)=\"editHistoria(historia)\">\n                    <div class=\"historia-cell fecha-cell\">\n                      <i class=\"fas fa-calendar-alt me-2\"></i>\n                      {{ historia.fecha_consulta | date:'dd/MM/yyyy' }}\n                    </div>\n                    <div class=\"historia-cell hora-cell\">\n                      <i class=\"fas fa-clock me-2\"></i>\n                      {{ historia.hora || 'Sin hora especificada' }}\n                    </div>\n                    <div class=\"historia-cell motivo-cell\">\n                      <i class=\"fas fa-stethoscope me-2\"></i>\n                      {{ historia.motivo_consulta || 'Sin motivo especificado' }}\n                    </div>\n                    <div class=\"historia-cell acciones-cell\">\n                      <button class=\"btn btn-sm btn-outline-primary me-2\" (click)=\"editHistoria(historia, 'view'); $event.stopPropagation()\">\n                        <i class=\"fas fa-eye\"></i> Ver\n                      </button>\n                      <button class=\"btn btn-sm btn-outline-success\" (click)=\"generatePDF(historia); $event.stopPropagation()\">\n                        <i class=\"fas fa-file-pdf\"></i> PDF\n                      </button>\n                    </div>\n                  </div>\n                }\n              </div>\n            }\n            @if (historias.length === 0) {\n              <div class=\"empty-state\">\n            <i class=\"fas fa-file-medical fa-4x mb-4\"></i>\n            <h4>No hay historias clnicas</h4>\n            <p>Este paciente an no tiene historias clnicas registradas.</p>\n            <button class=\"btn btn-primary btn-lg\" (click)=\"showCreateFormModal()\">\n              <i class=\"fas fa-plus\"></i> Crear Primera Historia Clnica\n            </button>\n          </div>\n            }\n        </div>\n      </div>\n    </div>\n  </div>\n  }\n\n  <!-- Formulario de Historia Clnica -->\n  @if (showCreateForm) {\n    <div class=\"row\">\n    <div class=\"col-12\">\n      <div class=\"card\">\n        <div class=\"card-header\">\n          <div class=\"d-flex justify-content-between align-items-center\">\n            <h4>{{ editingHistoriaId ? 'Ver' : 'Nueva' }} Historia Clnica</h4>\n            @if (editingHistoriaId) {\n              <button class=\"btn btn-success\" (click)=\"generatePDFFromView()\">\n                <i class=\"fas fa-file-pdf\"></i> Generar PDF\n              </button>\n            }\n          </div>\n        </div>\n        <div class=\"card-body\">\n          <form [formGroup]=\"historiaForm\" (ngSubmit)=\"saveHistoria()\" (keydown)=\"onKeyDown($event)\">\n            @if (editingHistoriaId && selectedHistoriaEditable && selectedHistoriaEditMessage) {\n              <div class=\"alert\" [ngClass]=\"selectedHistoriaEditable ? 'alert-info' : 'alert-warning'\">\n                <i class=\"fas\" [class.fa-info-circle]=\"selectedHistoriaEditable\" [class.fa-exclamation-triangle]=\"!selectedHistoriaEditable\"></i>\n                <span class=\"ms-2\">{{ selectedHistoriaEditMessage }}</span>\n              </div>\n            }\n            \n            <!-- DATOS INFORMATIVOS DEL PACIENTE -->\n            <div class=\"card mb-4\">\n              <div class=\"card-header section-header bg-info text-white\" (click)=\"toggleSeccion('datosPaciente')\">\n                <h5 class=\"mb-0\">\n                  <i class=\"fas\" [class.fa-chevron-down]=\"seccionesDesplegadas['datosPaciente']\" [class.fa-chevron-right]=\"!seccionesDesplegadas['datosPaciente']\"></i>\n                  <i class=\"fas fa-user ms-2\"></i>\n                  DATOS DEL PACIENTE (Solo Consulta)\n                </h5>\n              </div>\n              @if (seccionesDesplegadas['datosPaciente']) {\n                <div class=\"card-body\">\n                <div class=\"row\">\n                  <div class=\"col-md-4\">\n                    <div class=\"form-group mb-3\">\n                      <label class=\"form-label\">Fecha de la Consulta</label>\n                      <input type=\"date\" class=\"form-control\" formControlName=\"fecha_consulta\" id=\"input-fecha_consulta\" (change)=\"onFechaConsultaChange()\">\n                    </div>\n                  </div>\n                  <div class=\"col-md-4\">\n                    <div class=\"form-group mb-3\">\n                      <label class=\"form-label text-muted\">Nombre</label>\n                      <input type=\"text\" class=\"form-control\" [value]=\"paciente?.nombre || ''\" readonly>\n                    </div>\n                  </div>\n                  <div class=\"col-md-4\">\n                    <div class=\"form-group mb-3\">\n                      <label class=\"form-label text-muted\">Apellidos</label>\n                      <input type=\"text\" class=\"form-control\" [value]=\"paciente?.apellidos || ''\" readonly>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"row\">\n                  <div class=\"col-md-4\">\n                    <div class=\"form-group mb-3\">\n                      <label class=\"form-label text-muted\">Tipo de Documento</label>\n                      <input type=\"text\" class=\"form-control\" [value]=\"paciente?.tipo_documento || ''\" readonly>\n                    </div>\n                  </div>\n                  <div class=\"col-md-4\">\n                    <div class=\"form-group mb-3\">\n                      <label class=\"form-label text-muted\">Nmero de Documento</label>\n                      <input type=\"text\" class=\"form-control\" [value]=\"paciente?.documento || ''\" readonly>\n                    </div>\n                  </div>\n                  <div class=\"col-md-4\">\n                    <div class=\"form-group mb-3\">\n                      <label class=\"form-label text-muted\">Fecha de Nacimiento</label>\n                      <input type=\"text\" class=\"form-control\" [value]=\"paciente?.fecha_nacimiento ? (paciente?.fecha_nacimiento | date:'dd/MM/yyyy') : ''\" readonly>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"row\">\n                  <div class=\"col-md-3\">\n                    <div class=\"form-group mb-3\">\n                      <label class=\"form-label text-muted\">Edad</label>\n                      <input type=\"text\" class=\"form-control\" [value]=\"calcularEdad(paciente?.fecha_nacimiento)\" readonly>\n                    </div>\n                  </div>\n                  <div class=\"col-md-3\">\n                    <div class=\"form-group mb-3\">\n                      <label class=\"form-label text-muted\">Gnero</label>\n                      <input type=\"text\" class=\"form-control\" [value]=\"paciente?.genero || ''\" readonly>\n                    </div>\n                  </div>\n                  <div class=\"col-md-3\">\n                    <div class=\"form-group mb-3\">\n                      <label class=\"form-label text-muted\">RH</label>\n                      <input type=\"text\" class=\"form-control\" [value]=\"paciente?.rh || ''\" readonly>\n                    </div>\n                  </div>\n                  <div class=\"col-md-3\">\n                    <div class=\"form-group mb-3\">\n                      <label class=\"form-label text-muted\">Telfono</label>\n                      <input type=\"text\" class=\"form-control\" [value]=\"paciente?.telefono || ''\" readonly>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"row\">\n                  <div class=\"col-md-3\">\n                    <div class=\"form-group mb-3\">\n                      <label class=\"form-label text-muted\">Correo Electrnico</label>\n                      <input type=\"email\" class=\"form-control\" [value]=\"paciente?.email || ''\" readonly>\n                    </div>\n                  </div>\n                  <div class=\"col-md-3\">\n                    <div class=\"form-group mb-3\">\n                      <label class=\"form-label text-muted\">Acudiente</label>\n                      <input type=\"text\" class=\"form-control\" [value]=\"paciente?.nombre_acudiente || ''\" readonly>\n                    </div>\n                  </div>\n                  <div class=\"col-md-3\">\n                    <div class=\"form-group mb-3\">\n                      <label class=\"form-label\">Fecha Estimada del Prximo Control</label>\n                      <input type=\"date\" class=\"form-control\" formControlName=\"fecha_control\">\n                    </div>\n                  </div>\n                  <div class=\"col-md-3\">\n                    <div class=\"form-group mb-3\">\n                      <label class=\"form-label\">Hora</label>\n                      <input type=\"time\" class=\"form-control\" formControlName=\"hora\" id=\"input-hora\">\n                    </div>\n                  </div>\n                </div>\n                \n                  \n                </div>\n              }\n            </div>\n            \n            <!-- CUESTIONARIO -->\n            <div class=\"card mb-4\">\n              <div class=\"card-header section-header\" (click)=\"toggleSeccion('cuestionario')\">\n                <h5 class=\"mb-0\">\n                  <i class=\"fas\" [class.fa-chevron-down]=\"seccionesDesplegadas['cuestionario']\" [class.fa-chevron-right]=\"!seccionesDesplegadas['cuestionario']\"></i>\n                  CUESTIONARIO\n                </h5>\n              </div>\n                @if (seccionesDesplegadas['cuestionario']) {\n                  <div class=\"card-body\">\n\n                    <div class=\"row-flex\">\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                    <label class=\"form-label\">Motivo de Consulta</label>\n                    <input type=\"text\" class=\"form-control\" formControlName=\"motivo_consulta\">\n              </div>\n                      </div>\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                    <label class=\"form-label\">Tipo de Examen</label>\n                    <input type=\"text\" class=\"form-control\" formControlName=\"tipo_examen\">\n              </div>\n            </div>\n                    </div>\n                    <div class=\"row-flex\">\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                    <label class=\"form-label\">Anamnesis</label>\n                          <textarea class=\"form-control\" formControlName=\"anamnesis\" rows=\"4\"></textarea>\n              </div>\n                      </div>\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                    <label class=\"form-label\">ltima Valoracin de Optometra</label>\n                          <input type=\"text\" class=\"form-control\" formControlName=\"ultima_valoracion_optometria\">\n                      </div>\n                        <div class=\"field-flex\">\n                    <label class=\"form-label\">Ocupacin/Profesin/Actividades</label>\n                          <input type=\"text\" class=\"form-control\" formControlName=\"ocupacion_profesion\">\n                      </div>\n                    </div>\n                    </div> \n                <!-- Antecedentes -->\n                <div class=\"card\">\n                      <div class=\"card-header\">\n                    <h6 class=\"mb-0\">Antecedentes</h6>\n                      </div>\n                  <div class=\"card-body\">\n                        <div class=\"row-flex\">\n                          <div class=\"col-flex\">\n                            <div class=\"field-flex\">\n                              <label class=\"form-label\">Familiares</label>\n                              <input type=\"text\" class=\"form-control\" formControlName=\"antecedentes_familiares\">\n                  </div>\n                </div>\n                          <div class=\"col-flex\">\n                            <div class=\"field-flex\">\n                              <label class=\"form-label\">Personales</label>\n                              <input type=\"text\" class=\"form-control\" formControlName=\"antecedentes_personales\">\n              </div>\n                          </div>\n                          <div class=\"col-flex\">\n                            <div class=\"field-flex\">\n                              <label class=\"form-label\">Laborales</label>\n                              <input type=\"text\" class=\"form-control\" formControlName=\"antecedentes_laborales\">\n                            </div>\n                          </div>\n                        </div>                        \n                      </div>\n                    </div>\n                  </div>\n                }\n            </div>\n\n            <!-- LENSOMETRA -->\n            <div class=\"card mb-4\">\n              <div class=\"card-header section-header\" (click)=\"toggleSeccion('lensometria')\">\n                <h5 class=\"mb-0\">\n                  <i class=\"fas\" [class.fa-chevron-down]=\"seccionesDesplegadas['lensometria']\" [class.fa-chevron-right]=\"!seccionesDesplegadas['lensometria']\"></i>\n                  LENSOMETRA\n                </h5>\n              </div>\n                @if (seccionesDesplegadas['lensometria']) {\n                  <div class=\"card-body\">\n                    <!-- Formula de Lejos -->\n                    <div class=\"table-responsive-container\">\n                      <div class=\"table-container\">\n                      <div class=\"table-title\">\n                        FORMULA\n                        <button type=\"button\" class=\"btn btn-sm btn-outline-secondary ms-2\" \n                                (click)=\"toggleFila('lensometriaFormulaCerca')\" \n                                title=\"Mostrar/Ocultar Frmula de Cerca\">\n                          <i class=\"fas\" [class.fa-plus]=\"!isFilaVisible('lensometriaFormulaCerca')\" \n                             [class.fa-minus]=\"isFilaVisible('lensometriaFormulaCerca')\"></i>\n                        </button>\n                      </div>\n                      <div class=\"table-header\">\n                        <div class=\"table-header-cell\">LATERALIDAD</div>\n                        <div class=\"table-header-cell\">ESFERA</div>\n                        <div class=\"table-header-cell\">CILINDRO</div>\n                        <div class=\"table-header-cell\">EJE</div>\n                        <div class=\"table-header-cell\">ADICIN</div>\n                        <div class=\"table-header-cell\">PRISMA</div>\n                      </div>\n                    \n                      <!-- Fila Derecho -->\n                      <div class=\"table-row\">\n                        <div class=\"table-cell\">\n                          <span class=\"table-cell-label\">Derecho</span>\n                        </div>\n                        <div class=\"table-cell\">\n                          <input type=\"text\" class=\"table-cell-input lensometria-field\" formControlName=\"lensometria_formula_lejos_derecho_esfera\" \n                                pattern=\"[\\+\\-]?[0-9]+([.][0-9]{1,2})?\" \n                                 (blur)=\"formatEsferaField($event)\"\n                                 (input)=\"validateLensometriaField($event)\">\n                        </div>\n                        <div class=\"table-cell\">\n                          <input type=\"text\" class=\"table-cell-input lensometria-field\" formControlName=\"lensometria_formula_lejos_derecho_cilindro\" \n                                pattern=\"[\\+\\-]?[0-9]+([.][0-9]{1,2})?\" \n                                 (blur)=\"formatCilindroField($event)\"\n                                 (input)=\"validateLensometriaField($event)\">\n                        </div>\n                        <div class=\"table-cell\">\n                          <input type=\"text\" class=\"table-cell-input eje-field\" formControlName=\"lensometria_formula_lejos_derecho_eje\" appAxisInput\n                                 pattern=\"^[0-9]+$\" \n                                 (blur)=\"formatEjeField($event)\"\n                                 (input)=\"validateEjeField($event)\">\n                        </div>\n                        <div class=\"table-cell\">\n                          <input type=\"text\" class=\"table-cell-input lensometria-field\" formControlName=\"lensometria_formula_lejos_derecho_adicion\" \n                                pattern=\"[\\+\\-]?[0-9]+([.][0-9]{1,2})?\" \n                                 (blur)=\"formatLensometriaField($event)\"\n                                 (input)=\"validateLensometriaField($event)\">\n                        </div>\n                        <div class=\"table-cell\">\n                          <input type=\"text\" class=\"table-cell-input\" formControlName=\"lensometria_formula_lejos_derecho_prisma\" value=\"NO APLICA\">\n                      </div>\n                    </div>\n\n                      <!-- Fila Izquierdo -->\n                      <div class=\"table-row\">\n                        <div class=\"table-cell\">\n                          <span class=\"table-cell-label\">Izquierdo</span>\n                  </div>\n                        <div class=\"table-cell\">\n                          <input type=\"text\" class=\"table-cell-input lensometria-field\" formControlName=\"lensometria_formula_lejos_izquierdo_esfera\" \n                                pattern=\"[\\+\\-]?[0-9]+([.][0-9]{1,2})?\"\n                                 (blur)=\"formatEsferaField($event)\"\n                                 (input)=\"validateLensometriaField($event)\">\n                </div>\n                        <div class=\"table-cell\">\n                          <input type=\"text\" class=\"table-cell-input lensometria-field\" formControlName=\"lensometria_formula_lejos_izquierdo_cilindro\" \n                      pattern=\"[\\+\\-]?[0-9]+([.][0-9]{1,2})?\" \n                                 (blur)=\"formatCilindroField($event)\"\n                                 (input)=\"validateLensometriaField($event)\">\n              </div>\n                        <div class=\"table-cell\">\n                          <input type=\"text\" class=\"table-cell-input eje-field\" formControlName=\"lensometria_formula_lejos_izquierdo_eje\" appAxisInput\n                                 pattern=\"^[0-9]+$\" \n                                 (blur)=\"formatEjeField($event)\"\n                                 (input)=\"validateEjeField($event)\">\n                        </div>\n                        <div class=\"table-cell\">\n                          <input type=\"text\" class=\"table-cell-input lensometria-field\" formControlName=\"lensometria_formula_lejos_izquierdo_adicion\" \n                      pattern=\"[\\+\\-]?[0-9]+([.][0-9]{1,2})?\" \n                                 (blur)=\"formatLensometriaField($event)\"\n                                 (input)=\"validateLensometriaField($event)\">\n                        </div>\n                        <div class=\"table-cell\">\n                          <input type=\"text\" class=\"table-cell-input\" formControlName=\"lensometria_formula_lejos_izquierdo_prisma\" value=\"NO APLICA\">\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <!-- Formula de Cerca -->\n                    @if (isFilaVisible('lensometriaFormulaCerca')) {\n                    <div class=\"table-container\">\n                      <div class=\"table-title\">FORMULA DE CERCA O ADICIONAL</div>\n                      <div class=\"table-header\">\n                        <div class=\"table-header-cell\">LATERALIDAD</div>\n                        <div class=\"table-header-cell\">ESFERA</div>\n                        <div class=\"table-header-cell\">CILINDRO</div>\n                        <div class=\"table-header-cell\">EJE</div>\n                        <div class=\"table-header-cell\">ADICIN</div>\n                      </div>\n                      \n                      <!-- Fila Derecho -->\n                      <div class=\"table-row\">\n                        <div class=\"table-cell\">\n                          <span class=\"table-cell-label\">Derecho</span>\n                        </div>\n                        <div class=\"table-cell\">\n                          <input type=\"text\" class=\"table-cell-input lensometria-field\" formControlName=\"lensometria_formula_cerca_derecho_esfera\" \n                      pattern=\"[\\+\\-]?[0-9]+([.][0-9]{1,2})?\" \n                                 (blur)=\"formatEsferaField($event)\"\n                                 (input)=\"validateLensometriaField($event)\">\n                        </div>\n                        <div class=\"table-cell\">\n                          <input type=\"text\" class=\"table-cell-input lensometria-field\" formControlName=\"lensometria_formula_cerca_derecho_cilindro\" \n                      pattern=\"[\\+\\-]?[0-9]+([.][0-9]{1,2})?\" \n                                 (blur)=\"formatCilindroField($event)\"\n                                 (input)=\"validateLensometriaField($event)\">\n                        </div>\n                        <div class=\"table-cell\">\n                          <input type=\"text\" class=\"table-cell-input eje-field\" formControlName=\"lensometria_formula_cerca_derecho_eje\" appAxisInput\n                                 pattern=\"^[0-9]+$\" \n                                 (blur)=\"formatEjeField($event)\"\n                                 (input)=\"validateEjeField($event)\">\n                        </div>\n                        <div class=\"table-cell\">\n                          <input type=\"text\" class=\"table-cell-input lensometria-field\" formControlName=\"lensometria_formula_cerca_derecho_adicion\" \n                      pattern=\"[\\+\\-]?[0-9]+([.][0-9]{1,2})?\" \n                                 (blur)=\"formatLensometriaField($event)\"\n                                 (input)=\"validateLensometriaField($event)\">\n                        </div>\n                      </div>\n                      \n                      <!-- Fila Izquierdo -->\n                      <div class=\"table-row\">\n                        <div class=\"table-cell\">\n                          <span class=\"table-cell-label\">Izquierdo</span>\n                        </div>\n                        <div class=\"table-cell\">\n                          <input type=\"text\" class=\"table-cell-input lensometria-field\" formControlName=\"lensometria_formula_cerca_izquierdo_esfera\" \n                      pattern=\"[\\+\\-]?[0-9]+([.][0-9]{1,2})?\" \n                                 (blur)=\"formatEsferaField($event)\"\n                                 (input)=\"validateLensometriaField($event)\">\n                        </div>\n                        <div class=\"table-cell\">\n                          <input type=\"text\" class=\"table-cell-input lensometria-field\" formControlName=\"lensometria_formula_cerca_izquierdo_cilindro\" \n                                 pattern=\"[\\+\\-]?[0-9]+([.][0-9]{1,2})?\"\n                                 (blur)=\"formatCilindroField($event)\"\n                                 (input)=\"validateLensometriaField($event)\">\n                        </div>\n                        <div class=\"table-cell\">\n                          <input type=\"text\" class=\"table-cell-input eje-field\" formControlName=\"lensometria_formula_cerca_izquierdo_eje\" appAxisInput\n                                 pattern=\"^[0-9]+$\" \n                                 (blur)=\"formatEjeField($event)\"\n                                 (input)=\"validateEjeField($event)\">\n                        </div>\n                        <div class=\"table-cell\">\n                          <input type=\"text\" class=\"table-cell-input lensometria-field\" formControlName=\"lensometria_formula_cerca_izquierdo_adicion\" \n                                 pattern=\"[\\+\\-]?[0-9]+([.][0-9]{1,2})?\"\n                                 (blur)=\"formatLensometriaField($event)\"\n                                 (input)=\"validateLensometriaField($event)\">\n                        </div>\n                      </div>\n                    </div>\n                    }\n                    </div>\n                    \n                    <!-- Observaciones -->\n                    <div class=\"row-flex\">\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                          <label class=\"form-label\">Observaciones</label>\n                          <textarea class=\"form-control\" formControlName=\"lensometria_observaciones\" rows=\"4\"></textarea>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                }\n            </div>\n\n            <!-- AGUDEZA VISUAL -->\n            <div class=\"card mb-4\">\n              <div class=\"card-header section-header\" (click)=\"toggleSeccion('agudezaVisual')\">\n                <h5 class=\"mb-0\">\n                  <i class=\"fas\" [class.fa-chevron-down]=\"seccionesDesplegadas['agudezaVisual']\" [class.fa-chevron-right]=\"!seccionesDesplegadas['agudezaVisual']\"></i>\n                  AGUDEZA VISUAL\n                </h5>\n              </div>\n                @if (seccionesDesplegadas['agudezaVisual']) {\n                  <div class=\"card-body\">\n                    <!-- Tabla de Agudeza Visual convertida a divs -->\n                    <div class=\"table-responsive-container\">\n                      <div class=\"agudeza-table\">\n                      <!-- Fila 1: Headers principales -->\n                      <div class=\"agudeza-row\">\n                        <div class=\"agudeza-cell color-azul\" style=\"flex: 2;\">Test Usado</div>\n                        <div class=\"agudeza-cell color-azul\" style=\"flex: 4;\">Agudeza Visual Lejos</div>\n                        <div class=\"agudeza-cell color-azul\" style=\"flex: 3;\">Agudeza Visual Cerca</div>\n                      </div>\n                      \n                      <!-- Fila 2: Sub-headers -->\n                      <div class=\"agudeza-row\">\n                        <div class=\"agudeza-cell color-azul-medio\" style=\"flex: 1;\">Distancia</div>\n                        <div class=\"agudeza-cell color-azul-medio\" style=\"flex: 1;\">Descripcin</div>\n                        <div class=\"agudeza-cell color-azul-medio\" style=\"flex: 1;\">Lateralidad</div>\n                        <div class=\"agudeza-cell color-azul-medio\" style=\"flex: 1;\">Derecho</div>\n                        <div class=\"agudeza-cell color-azul-medio\" style=\"flex: 1;\">Izquierdo</div>\n                        <div class=\"agudeza-cell color-azul-medio\" style=\"flex: 1;\">Ambos</div>\n                        <div class=\"agudeza-cell color-azul-medio\" style=\"flex: 1;\">Derecho</div>\n                        <div class=\"agudeza-cell color-azul-medio\" style=\"flex: 1;\">Izquierdo</div>\n                        <div class=\"agudeza-cell color-azul-medio\" style=\"flex: 1;\">Observacin</div>\n                      </div>\n\n                      <!-- Fila 3: Lejos LETRAS Sin Correccin -->\n                      <div class=\"agudeza-row\">\n                        <div class=\"agudeza-cell color-azul-medio\" style=\"flex: 1;\">Lejos</div>\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\">\n                          <input type=\"text\" class=\"agudeza-cell-input\" formControlName=\"lejos_test_usado\" value=\"LETRAS\">\n                        </div>\n                        <div class=\"agudeza-cell color-azul-medio\" style=\"flex: 1;\">\n                          Sin Correccin\n                          <button type=\"button\" class=\"btn btn-sm btn-outline-secondary ms-2\" \n                                  (click)=\"toggleFila('agudezaVisualConCorreccion')\" \n                                  title=\"Mostrar/Ocultar fila Con Correccin\">\n                            <i class=\"fas\" [class.fa-plus]=\"!isFilaVisible('agudezaVisualConCorreccion')\" \n                               [class.fa-minus]=\"isFilaVisible('agudezaVisualConCorreccion')\"></i>\n                          </button>\n                        </div>\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\">\n                          <input type=\"text\" class=\"agudeza-cell-input\" formControlName=\"sin_correccion_lejos_derecho\" value=\"20/25\" appPrefixInput=\"20/\">\n                        </div>\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\">\n                          <input type=\"text\" class=\"agudeza-cell-input\" formControlName=\"sin_correccion_lejos_izquierdo\" value=\"20/30\" appPrefixInput=\"20/\">\n                        </div>\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\">\n                          <input type=\"text\" class=\"agudeza-cell-input\" formControlName=\"sin_correccion_lejos_ambos\" value=\"20/\" appPrefixInput=\"20/\">\n                      </div>\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\">\n                          <input type=\"text\" class=\"agudeza-cell-input\" formControlName=\"sin_correccion_cerca_derecho\" value=\"M\">\n                        </div>\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\">\n                          <input type=\"text\" class=\"agudeza-cell-input\" formControlName=\"sin_correccion_cerca_izquierdo\" value=\"M\">\n                        </div>\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\">\n                          <input type=\"text\" class=\"agudeza-cell-input\" formControlName=\"sin_correccion_cerca_observacion\">\n                        </div>\n                      </div>\n                      \n                      <!-- Fila 4: Lejos LETRAS Con Correccin -->\n                      @if (isFilaVisible('agudezaVisualConCorreccion')) {\n                      <div class=\"agudeza-row\">\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\"></div>\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\"></div>\n                        <div class=\"agudeza-cell color-azul-medio\" style=\"flex: 1;\">Con Correccin</div>\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\">\n                          <input type=\"text\" class=\"agudeza-cell-input\" formControlName=\"con_correccion_lejos_derecho\" value=\"20/\" appPrefixInput=\"20/\">\n                        </div>\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\">\n                          <input type=\"text\" class=\"agudeza-cell-input\" formControlName=\"con_correccion_lejos_izquierdo\" value=\"20/\" appPrefixInput=\"20/\">\n                        </div>\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\">\n                          <input type=\"text\" class=\"agudeza-cell-input\" formControlName=\"con_correccion_lejos_ambos\" value=\"20/\" appPrefixInput=\"20/\">\n                        </div>\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\">\n                          <input type=\"text\" class=\"agudeza-cell-input\" formControlName=\"con_correccion_cerca_derecho\" value=\"M\">\n                        </div>\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\">\n                          <input type=\"text\" class=\"agudeza-cell-input\" formControlName=\"con_correccion_cerca_izquierdo\" value=\"M\">\n                        </div>\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\">\n                          <input type=\"text\" class=\"agudeza-cell-input\" formControlName=\"con_correccion_cerca_observacion\">\n                        </div>\n                      </div>\n                      }\n                      \n                      <!-- Fila 5: Cerca LETRAS Pin Hole -->\n                      <div class=\"agudeza-row\">\n                        <div class=\"agudeza-cell color-azul-medio\" style=\"flex: 1;\">Cerca</div>\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\">\n                          <input type=\"text\" class=\"agudeza-cell-input\" formControlName=\"cerca_test_usado\" value=\"LETRAS\">\n                        </div>\n                        <div class=\"agudeza-cell color-azul-medio\" style=\"flex: 1;\">Pin Hole</div>\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\">\n                          <input type=\"text\" class=\"agudeza-cell-input\" formControlName=\"pin_hole_lejos_derecho\" value=\"20/\" appPrefixInput=\"20/\">\n                        </div>\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\">\n                          <input type=\"text\" class=\"agudeza-cell-input\" formControlName=\"pin_hole_lejos_izquierdo\" value=\"20/\" appPrefixInput=\"20/\">\n                        </div>\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\"></div>\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\"></div>\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\"></div>\n                        <div class=\"agudeza-cell\" style=\"flex: 1;\"></div>\n                      </div>\n                    </div>\n                    </div>\n                  </div>\n                }\n                </div>\n\n            <!-- EXAMEN MOTOR -->\n            <div class=\"card mb-4\">\n              <div class=\"card-header section-header\" (click)=\"toggleSeccion('examenMotor')\">\n                <h5 class=\"mb-0\">\n                  <i class=\"fas\" [class.fa-chevron-down]=\"seccionesDesplegadas['examenMotor']\" [class.fa-chevron-right]=\"!seccionesDesplegadas['examenMotor']\"></i>\n                  EXAMEN MOTOR\n                </h5>\n                </div>\n                @if (seccionesDesplegadas['examenMotor']) {\n                  <div class=\"card-body\">\n                    <div class=\"table-responsive-container\">\n                      <div class=\"grid-table table-examen-motor-parte-1\">\n                      <!-- Fila 1 -->\n                      <div class=\"cell span-rows-2 background-azul\">Dominancia</div>\n                      <div class=\"cell background-azul-claro\">Mano</div>\n                      <div class=\"cell background-azul-claro\">Ojo</div>\n                      <div class=\"cell background-azul\">Punto Prximo de Convergencia</div>\n                      <div class=\"cell span-rows-2 background-azul\">D.P.</div>\n                      <div class=\"cell background-azul-claro\">Lejos</div>\n                      <div class=\"cell background-azul-claro\">Cerca</div>\n                    \n                       <!-- Fila 2 -->\n                       <div class=\"cell\"><input type=\"text\" formControlName=\"examen_motor_mano_dominante\" value=\"DERECHA\" /></div>\n                       <div class=\"cell\"><input type=\"text\" formControlName=\"examen_motor_ojo_dominante\" value=\"DERECHO\" /></div>\n                       <div class=\"cell\"><input type=\"text\" formControlName=\"examen_motor_punto_proximo_valor\" /></div>\n                       <div class=\"cell\"><input type=\"text\" formControlName=\"examen_motor_dp_lejos\" value=\"30/30\"/></div>\n                       <div class=\"cell\"><input type=\"text\" formControlName=\"examen_motor_dp_cerca\" value=\"30/30\"/></div>\n                    \n                      <!-- Fila 3 -->\n                      <div class=\"cell\"></div>\n                      <div class=\"cell span-cols-3 background-azul-claro\">Ojo derecho</div>\n                      <div class=\"cell span-cols-3  background-azul-claro\">Ojo izquierdo</div>\n                    \n                      <!-- Fila 4 -->\n                      <div class=\"cell background-azul\">Ducciones</div>\n                      <div class=\"cell span-cols-3\"><input type=\"text\" formControlName=\"examen_motor_ducciones_derecho\" value=\"Normal\" /></div>\n                      <div class=\"cell span-cols-3\"><input type=\"text\" formControlName=\"examen_motor_ducciones_izquierdo\" value=\"Normal\" /></div>\n                    \n                      <!-- Fila 5 -->\n                      <div class=\"cell span-rows-2 background-azul\">KAPPA</div>\n                      <div class=\"cell span-cols-3 background-azul-claro\">Ojo derecho</div>\n                      <div class=\"cell span-cols-3 background-azul-claro\">Ojo izquierdo</div>\n                    \n                      <!-- Fila 6 -->\n                      <div class=\"cell span-cols-3\"><input type=\"text\" formControlName=\"examen_motor_kappa_derecho\" value=\"0\" /></div>\n                      <div class=\"cell span-cols-3\"><input type=\"text\" formControlName=\"examen_motor_kappa_izquierdo\" value=\"0\" /></div>\n                      <!-- Fila 7 -->\n                      <div class=\"cell background-azul-claro\">Versiones</div>\n                      <div class=\"cell span-cols-3 background-azul-claro\">Ojo derecho</div>\n                      <div class=\"cell span-cols-3 background-azul-claro\">Ojo izquierdo</div>\n                      \n                      <!-- Fila 8 -->\n                      <div class=\"cell\"></div>\n                      <div class=\"cell span-cols-3\">\n                        <div class=\"versiones-grafico\">\n                          <!-- Grfico Ojo Derecho -->\n                          <svg width=\"312\" height=\"104\" viewBox=\"0 0 312 104\" class=\"versiones-svg\">\n                            <!-- Lneas del grfico -->\n                            <line x1=\"26\" y1=\"52\" x2=\"286\" y2=\"52\" stroke=\"var(--dark-color)\" stroke-width=\"2\"/>\n                            <line x1=\"78\" y1=\"26\" x2=\"78\" y2=\"78\" stroke=\"var(--dark-color)\" stroke-width=\"2\"/>\n                            <line x1=\"234\" y1=\"26\" x2=\"234\" y2=\"78\" stroke=\"var(--dark-color)\" stroke-width=\"2\"/>\n                            \n                            <!-- Chulitos editables ojo derecho (orden: 10-15) -->\n                            <text id=\"versiones-derecho-top-left\" x=\"78\" y=\"15\" class=\"versiones-v\" data-position=\"top-left\" tabindex=\"0\" (click)=\"onVersionesVClick($event, 'derecho')\" (keydown)=\"onVersionesKeyDown($event, 'derecho', 'top-left')\" text-anchor=\"middle\"></text>\n                            <text id=\"versiones-derecho-top-right\" x=\"234\" y=\"15\" class=\"versiones-v\" data-position=\"top-right\" tabindex=\"0\" (click)=\"onVersionesVClick($event, 'derecho')\" (keydown)=\"onVersionesKeyDown($event, 'derecho', 'top-right')\" text-anchor=\"middle\"></text>\n                            <text id=\"versiones-derecho-left\" x=\"26\" y=\"65\" class=\"versiones-v\" data-position=\"left\" tabindex=\"0\" (click)=\"onVersionesVClick($event, 'derecho')\" (keydown)=\"onVersionesKeyDown($event, 'derecho', 'left')\" text-anchor=\"middle\"></text>\n                            <text id=\"versiones-derecho-right\" x=\"286\" y=\"65\" class=\"versiones-v\" data-position=\"right\" tabindex=\"0\" (click)=\"onVersionesVClick($event, 'derecho')\" (keydown)=\"onVersionesKeyDown($event, 'derecho', 'right')\" text-anchor=\"middle\"></text>\n                            <text id=\"versiones-derecho-bottom-left\" x=\"78\" y=\"89\" class=\"versiones-v\" data-position=\"bottom-left\" tabindex=\"0\" (click)=\"onVersionesVClick($event, 'derecho')\" (keydown)=\"onVersionesKeyDown($event, 'derecho', 'bottom-left')\" text-anchor=\"middle\"></text>\n                            <text id=\"versiones-derecho-bottom-right\" x=\"234\" y=\"89\" class=\"versiones-v\" data-position=\"bottom-right\" tabindex=\"0\" (click)=\"onVersionesVClick($event, 'derecho')\" (keydown)=\"onVersionesKeyDown($event, 'derecho', 'bottom-right')\" text-anchor=\"middle\"></text>\n                          </svg>\n                        </div>\n                      </div>\n                      <div class=\"cell span-cols-3\">\n                        <div class=\"versiones-grafico\">\n                          <!-- Grfico Ojo Izquierdo -->\n                          <svg width=\"312\" height=\"104\" viewBox=\"0 0 312 104\" class=\"versiones-svg\">\n                            <!-- Lneas del grfico -->\n                            <line x1=\"26\" y1=\"52\" x2=\"286\" y2=\"52\" stroke=\"var(--dark-color)\" stroke-width=\"2\"/>\n                            <line x1=\"78\" y1=\"26\" x2=\"78\" y2=\"78\" stroke=\"var(--dark-color)\" stroke-width=\"2\"/>\n                            <line x1=\"234\" y1=\"26\" x2=\"234\" y2=\"78\" stroke=\"var(--dark-color)\" stroke-width=\"2\"/>\n                            \n                            <!-- Chulitos editables ojo izquierdo (orden: 16-21) -->\n                            <text id=\"versiones-izquierdo-top-left\" x=\"78\" y=\"15\" class=\"versiones-v\" data-position=\"top-left\" tabindex=\"0\" (click)=\"onVersionesVClick($event, 'izquierdo')\" (keydown)=\"onVersionesKeyDown($event, 'izquierdo', 'top-left')\" text-anchor=\"middle\"></text>\n                            <text id=\"versiones-izquierdo-top-right\" x=\"234\" y=\"15\" class=\"versiones-v\" data-position=\"top-right\" tabindex=\"0\" (click)=\"onVersionesVClick($event, 'izquierdo')\" (keydown)=\"onVersionesKeyDown($event, 'izquierdo', 'top-right')\" text-anchor=\"middle\"></text>\n                            <text id=\"versiones-izquierdo-left\" x=\"26\" y=\"65\" class=\"versiones-v\" data-position=\"left\" tabindex=\"0\" (click)=\"onVersionesVClick($event, 'izquierdo')\" (keydown)=\"onVersionesKeyDown($event, 'izquierdo', 'left')\" text-anchor=\"middle\"></text>\n                            <text id=\"versiones-izquierdo-right\" x=\"286\" y=\"65\" class=\"versiones-v\" data-position=\"right\" tabindex=\"0\" (click)=\"onVersionesVClick($event, 'izquierdo')\" (keydown)=\"onVersionesKeyDown($event, 'izquierdo', 'right')\" text-anchor=\"middle\"></text>\n                            <text id=\"versiones-izquierdo-bottom-left\" x=\"78\" y=\"89\" class=\"versiones-v\" data-position=\"bottom-left\" tabindex=\"0\" (click)=\"onVersionesVClick($event, 'izquierdo')\" (keydown)=\"onVersionesKeyDown($event, 'izquierdo', 'bottom-left')\" text-anchor=\"middle\"></text>\n                            <text id=\"versiones-izquierdo-bottom-right\" x=\"234\" y=\"89\" class=\"versiones-v\" data-position=\"bottom-right\" tabindex=\"0\" (click)=\"onVersionesVClick($event, 'izquierdo')\" (keydown)=\"onVersionesKeyDown($event, 'izquierdo', 'bottom-right')\" text-anchor=\"middle\"></text>\n                          </svg>\n                        </div>                        \n                      </div>\n                       \n                      <!-- Fila 9 -->\n                      <div class=\"cell background-azul\">Hirschberg</div>\n                      <div class=\"cell span-cols-6\"><input type=\"text\" formControlName=\"examen_motor_hirschberg\" value=\"CENTRADO AMBOS OJOS\" /></div>\n                    </div>\n                    <div class=\"grid-table table-examen-motor-parte-2\">\n                      <!-- Fila 1 -->\n                      <div class=\"cell span-cols-2 background-azul\">Medicin de Desviacin</div>\n                      <div class=\"cell span-cols-3 background-azul\">Con correccin</div>\n                      <div class=\"cell span-cols-2 background-azul\">Sin correccin</div>\n                      <div class=\"cell background-azul\">Observacin</div>\n                      <!-- Fila 2 -->\n                      <div class=\"cell span-rows-3 background-azul-claro\">Test Utilizado</div>\n                      <div class=\"cell span-rows-3\"><input type=\"text\" formControlName=\"examen_motor_test_utilizado\" value=\"COVER TEST PRISMA\" /></div>\n                      <div class=\"cell background-azul-claro\">Distancia</div>\n                      <div class=\"cell background-azul-claro\">Horizontal</div>\n                      <div class=\"cell background-azul-claro\">Vertical</div>\n                      <div class=\"cell background-azul-claro\">Horizontal</div>\n                      <div class=\"cell background-azul-claro\">Vertical</div>\n                      <div class=\"cell span-rows-3\"><input type=\"text\" formControlName=\"examen_motor_observaciones\" value=\"TOMADO CON OBJETO REAL\" /></div>\n                       <!-- Fila 3 -->\n                       <div class=\"cell background-azul-claro\">6 Metros</div>\n                       <div class=\"cell\"><input type=\"text\" formControlName=\"examen_motor_cover_test_con_correccion_horizontal\" value=\"ORTHO\" /></div>\n                       <div class=\"cell\"><input type=\"text\" formControlName=\"examen_motor_cover_test_con_correccion_vertical\" value=\"ORTHO\" /></div>\n                       <div class=\"cell\"><input type=\"text\" formControlName=\"examen_motor_cover_test_sin_correccion_horizontal\" value=\"ORTHO\" /></div>\n                       <div class=\"cell\"><input type=\"text\" formControlName=\"examen_motor_cover_test_sin_correccion_vertical\" value=\"ORTHO\" /></div>\n                       <!-- Fila 4 -->\n                       <div class=\"cell background-azul-claro\">30 A 40 cms</div>\n                       <div class=\"cell\"><input type=\"text\" formControlName=\"examen_motor_prisma_con_correccion_horizontal\" value=\"ORTHO\" /></div>\n                       <div class=\"cell\"><input type=\"text\" formControlName=\"examen_motor_prisma_con_correccion_vertical\" value=\"ORTHO\" /></div>\n                       <div class=\"cell\"><input type=\"text\" formControlName=\"examen_motor_prisma_sin_correccion_horizontal\" value=\"ORTHO\" /></div>\n                       <div class=\"cell\"><input type=\"text\" formControlName=\"examen_motor_prisma_sin_correccion_vertical\" value=\"ORTHO\" /></div>\n                       <!-- Fila 5 -->\n                       <div class=\"cell span-cols-2 background-azul\">Test de Color</div>\n                       <div class=\"cell background-azul-claro\">Ojo Derecho</div>\n                       <div class=\"cell span-cols-2\"><input type=\"text\" formControlName=\"examen_motor_por_confirmar_derecho\" value=\"POR CONFIRMAR\" /></div>\n                       <div class=\"cell background-azul-claro\">Ojos Izquierdo</div>\n                       <div class=\"cell span-cols-2\"><input type=\"text\" formControlName=\"examen_motor_por_confirmar_izquierdo\" value=\"POR CONFIRMAR\" /></div>\n                       <!-- Fila 6 -->\n                       <div class=\"cell background-azul\">Estereopsis</div>\n                       <div class=\"cell background-azul-claro\">Tipo de Test</div>\n                       <div class=\"cell\"><input type=\"text\" formControlName=\"examen_motor_estereopsis_tipo\" value=\"TIMUS\" /></div>\n                       <div class=\"cell span-cols-2 background-azul-claro\">Resultado</div>\n                       <div class=\"cell\"><input type=\"text\" formControlName=\"examen_motor_estereopsis_resultado\" value=\"-\" /></div>\n                       <div class=\"cell span-cols-2 background-azul-claro\">Segundos de Arco</div>\n                    </div>\n                    </div>\n\n                  </div>\n                }\n            </div>\n\n            <!-- EXAMEN REFRACTIVO -->\n            <div class=\"card mb-4\">\n              <div class=\"card-header section-header\" (click)=\"toggleSeccion('examenRefractivo')\">\n                <h5 class=\"mb-0\">\n                  <i class=\"fas\" [class.fa-chevron-down]=\"seccionesDesplegadas['examenRefractivo']\" [class.fa-chevron-right]=\"!seccionesDesplegadas['examenRefractivo']\"></i>\n                  EXAMEN REFRACTIVO\n                </h5>\n              </div>\n                @if (seccionesDesplegadas['examenRefractivo']) {\n                  <div class=\"card-body\">\n                    <div class=\"grid-table table-examen-refractivo-keratometria\">\n\n                      <div class=\"cell span-cols-7 background-azul\">Keratometra</div>\n                      <div class=\"cell span-cols-5 background-azul\">Retinoscopia Estatica</div>\n                      \n                      <div class=\"cell background-azul-claro\">Lateralidad</div>\n                      <div class=\"cell background-azul-claro\">Plano</div>\n                      <div class=\"cell background-azul-claro\">Curvo</div>\n                      <div class=\"cell background-azul-claro\">Eje</div>\n                      <div class=\"cell background-azul-claro\">Miras</div>\n                      <div class=\"cell span-cols-2 background-azul-claro\">Corn.</div>\n                      <div class=\"cell background-azul-claro\">Lateralidad</div>\n                      <div class=\"cell background-azul-claro\">Esfera</div>\n                      <div class=\"cell background-azul-claro\">Cilindro</div>\n                      <div class=\"cell background-azul-claro\">Eje</div>\n                      <div class=\"cell background-azul-claro\">Sombras</div>\n\n                      <div class=\"cell background-azul-claro\">Derecho</div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_keratometria_derecho_plano\" value=\"44.00\" (blur)=\"formatKeratometriaOnBlur('examen_refractivo_keratometria_derecho_plano')\" (keypress)=\"onKeratometriaKeyPress($event)\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_keratometria_derecho_curvo\" value=\"48.00\" (blur)=\"formatKeratometriaOnBlur('examen_refractivo_keratometria_derecho_curvo')\" (keypress)=\"onKeratometriaKeyPress($event)\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_keratometria_derecho_eje\" value=\"0\" appAxisInput /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_keratometria_derecho_miras\" value=\"REDONDA\" /></div>\n                      <div class=\"cell span-cols-2\"><input type=\"text\" formControlName=\"examen_refractivo_keratometria_derecho_corn\" readonly /></div>\n                      <div class=\"cell background-azul-claro\">Derecho</div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_retinoscopia_estatica_derecho_esfera\" value=\"\" (blur)=\"formatEsferaField($event)\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_retinoscopia_estatica_derecho_cilindro\" value=\"\" (blur)=\"formatCilindroField($event)\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_retinoscopia_estatica_derecho_eje\" value=\"\" appAxisInput /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_retinoscopia_estatica_derecho_sombras\" value=\"CLARO Y DEFINIDO\" /></div>\n                    \n                      <div class=\"cell background-azul-claro\">Izquierdo</div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_keratometria_izquierdo_plano\" value=\"43.00\" (blur)=\"formatKeratometriaOnBlur('examen_refractivo_keratometria_izquierdo_plano')\" (keypress)=\"onKeratometriaKeyPress($event)\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_keratometria_izquierdo_curvo\" value=\"49.00\" (blur)=\"formatKeratometriaOnBlur('examen_refractivo_keratometria_izquierdo_curvo')\" (keypress)=\"onKeratometriaKeyPress($event)\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_keratometria_izquierdo_eje\" value=\"0\" appAxisInput /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_keratometria_izquierdo_miras\" value=\"REDONDA\" /></div>\n                      <div class=\"cell span-cols-2\"><input type=\"text\" formControlName=\"examen_refractivo_keratometria_izquierdo_corn\" readonly /></div>\n                      <div class=\"cell background-azul-claro\">Izquierdo</div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_retinoscopia_estatica_izquierdo_esfera\" value=\"\" (blur)=\"formatEsferaField($event)\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_retinoscopia_estatica_izquierdo_cilindro\" value=\"\" (blur)=\"formatCilindroField($event)\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_retinoscopia_estatica_izquierdo_eje\" value=\"\" appAxisInput /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_retinoscopia_estatica_izquierdo_sombras\" value=\"CLARO Y DEFINIDO\" /></div>\n                      \n                      <!-- Botn flotante para mostrar/ocultar Retinoscopia Dinmica y Otra Refraccin -->\n                      <div class=\"floating-toggle-btn\">\n                        <button id=\"toggle-retinoscopia\" type=\"button\" class=\"btn btn-sm btn-outline-secondary\" \n                                tabindex=\"0\"\n                                (click)=\"toggleFila('examenRefractivoRetinoscopia')\" \n                                (keydown)=\"onToggleButtonKeyDown($event, 'examenRefractivoRetinoscopia')\"\n                                title=\"Mostrar/Ocultar Retinoscopia Dinmica y Otra Refraccin\">\n                          <i class=\"fas\" [class.fa-plus]=\"!isFilaVisible('examenRefractivoRetinoscopia')\" \n                             [class.fa-minus]=\"isFilaVisible('examenRefractivoRetinoscopia')\"></i>\n                        </button>\n                      </div>\n                      \n                      @if (isFilaVisible('examenRefractivoRetinoscopia')) {\n                        <div class=\"cell span-rows-2 background-azul-claro\">Radio de K</div>\n                        <div class=\"cell span-cols-5 background-azul\">Retinoscopia Dinmica</div>\n                        <div class=\"cell background-azul\">Otra Refraccin</div>\n                        <div class=\"cell span-cols-5\"><input type=\"text\" formControlName=\"examen_refractivo_otra_refraccion\" value=\"\" /></div>\n\n                        <div class=\"cell background-azul-claro\">Lateralidad</div>\n                        <div class=\"cell background-azul-claro\">Esfera</div>\n                        <div class=\"cell background-azul-claro\">Cilindro</div>\n                        <div class=\"cell background-azul-claro\">Eje</div>\n                        <div class=\"cell background-azul-claro\">Sombras</div>\n                        <div class=\"cell background-azul-claro\">Lateralidad</div>\n                        <div class=\"cell background-azul-claro\">Esfera</div>\n                        <div class=\"cell background-azul-claro\">Cilindro</div>\n                        <div class=\"cell background-azul-claro\">Eje</div>\n                        <div class=\"cell span-cols-2 background-azul-claro\">Sombras</div>\n                        \n                        <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_radio_k_1\" value=\"7.67\" /></div>\n                        <div class=\"cell background-azul-claro\">Derecho</div> \n                        <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_retinoscopia_dinamica_derecho_esfera\" value=\"\" (blur)=\"formatEsferaField($event)\" /></div>\n                        <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_retinoscopia_dinamica_derecho_cilindro\" value=\"\" (blur)=\"formatCilindroField($event)\" /></div>\n                        <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_retinoscopia_dinamica_derecho_eje\" value=\"\" appAxisInput /></div>\n                        <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_retinoscopia_dinamica_derecho_sombras\" value=\"OMITIDA\" /></div>\n                        <div class=\"cell background-azul-claro\">Derecho</div>\n                        <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_otra_refraccion_derecho_esfera\" value=\"\" (blur)=\"formatEsferaField($event)\" /></div>\n                        <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_otra_refraccion_derecho_cilindro\" value=\"\" (blur)=\"formatCilindroField($event)\" /></div>\n                        <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_otra_refraccion_derecho_eje\" value=\"\" appAxisInput /></div>\n                        <div class=\"cell span-cols-2\"><input type=\"text\" formControlName=\"examen_refractivo_otra_refraccion_derecho_sombras\" value=\"NO APLICA\" /></div>\n\n                        <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_radio_k_2\" value=\"7.85\" /></div>\n                        <div class=\"cell background-azul-claro\">Izquierdo</div>\n                        <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_retinoscopia_dinamica_izquierdo_esfera\" value=\"\" (blur)=\"formatEsferaField($event)\" /></div>\n                        <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_retinoscopia_dinamica_izquierdo_cilindro\" value=\"\" (blur)=\"formatCilindroField($event)\" /></div>\n                        <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_retinoscopia_dinamica_izquierdo_eje\" value=\"\" appAxisInput /></div>\n                        <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_retinoscopia_dinamica_izquierdo_sombras\" value=\"OMITIDA\" /></div>\n                        <div class=\"cell background-azul-claro\">Izquierdo</div>\n                        <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_otra_refraccion_izquierdo_esfera\" value=\"\" (blur)=\"formatEsferaField($event)\" /></div>\n                        <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_otra_refraccion_izquierdo_cilindro\" value=\"\" (blur)=\"formatCilindroField($event)\" /></div>\n                        <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_otra_refraccion_izquierdo_eje\" value=\"\" appAxisInput /></div>\n                        <div class=\"cell span-cols-2\"><input type=\"text\" formControlName=\"examen_refractivo_otra_refraccion_izquierdo_sombras\" value=\"NO APLICA\" /></div>\n                      }\n\n                      <div class=\"cell background-azul\">Subjetivo</div>\n                      <div class=\"cell background-azul-claro\">En estado:</div>\n                      <div class=\"cell\">Normal</div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_normal\" value=\"SI\" /></div>\n                      <div class=\"cell background-azul-claro\">Cycloplejia</div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_cycloplejia\" value=\"NO\" /></div>\n                      <div class=\"cell background-azul-claro\">Otra</div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_otra\" value=\"-\" /></div>\n                      <div class=\"cell span-cols-2 background-azul-claro\">Distancia al vertice de:</div>                      \n                      <div class=\"cell span-cols-2 background-azul\">AV de Retinoscopia</div>\n\n                      <div class=\"cell background-azul-claro\">Lateralidad</div>\n                      <div class=\"cell background-azul-claro\">Esfera</div>\n                      <div class=\"cell background-azul-claro\">Cilindro</div>\n                      <div class=\"cell background-azul-claro\">Eje</div>\n                      <div class=\"cell background-azul-claro\">AV LEJOS</div>\n                      <div class=\"cell background-azul-claro\">ADD</div>\n                      <div class=\"cell background-azul-claro\">AV CERCA</div>\n                      <div class=\"cell background-azul-claro\">DNP</div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_distancia_al\" value=\"14\" (input)=\"onDistanciaChange($event)\" /></div>\n                      <div class=\"cell background-azul-claro\">mm</div>\n                      <div class=\"cell background-azul-claro\">Esttica</div>\n                      <div class=\"cell background-azul-claro\">Dinmica</div>\n\n                      <div class=\"cell background-azul-claro\">Derecho</div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_derecho_esfera\" value=\"\" (input)=\"onEsferaDerechaChange($event)\" (blur)=\"formatEsferaField($event)\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_derecho_cilindro\" value=\"\" (input)=\"onCilindroDerechoChange($event)\" (blur)=\"formatCilindroField($event)\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_derecho_eje\" value=\"\" appAxisInput [appAxisInputZeroToMax]=\"true\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_derecho_av_lejos\" value=\"20/20\" appPrefixInput=\"20/\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_derecho_add\" value=\"\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_derecho_av_cerca\" value=\"0.50 M\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_derecho_dnp\" value=\"31\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_derecho_vortice\" value=\"+0.00\" readonly /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_derecho_mm\" value=\"-0.00\" readonly /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_derecho_estatica\" value=\"20/\" appPrefixInput=\"20/\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_derecho_dinamica\" value=\"20/\" appPrefixInput=\"20/\" /></div>\n\n                      <div class=\"cell background-azul-claro\">Izquierdo</div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_izquierdo_esfera\" value=\"\" (input)=\"onEsferaIzquierdaChange($event)\" (blur)=\"formatEsferaField($event)\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_izquierdo_cilindro\" value=\"\" (input)=\"onCilindroIzquierdoChange($event)\" (blur)=\"formatCilindroField($event)\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_izquierdo_eje\" value=\"\" appAxisInput [appAxisInputZeroToMax]=\"true\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_izquierdo_av_lejos\" value=\"20/20\" appPrefixInput=\"20/\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_izquierdo_add\" value=\"\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_izquierdo_av_cerca\" value=\"0.50 M\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_izquierdo_dnp\" value=\"31\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_izquierdo_vortice\" value=\"+0.00\" readonly /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_izquierdo_mm\" value=\"-0.00\" readonly /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_izquierdo_estatica\" value=\"20/\" appPrefixInput=\"20/\" /></div>\n                      <div class=\"cell\"><input type=\"text\" formControlName=\"examen_refractivo_subjetivo_izquierdo_dinamica\" value=\"20/\" appPrefixInput=\"20/\" /></div>\n\n                    </div>\n                  </div>\n                }\n\n                    </div>\n\n            <!-- EXAMEN OFTALMOLGICO -->\n            <div class=\"card mb-4\">\n              <div class=\"card-header section-header\" (click)=\"toggleSeccion('examenOftalmologico')\">\n                <h5 class=\"mb-0\">\n                  <i class=\"fas\" [class.fa-chevron-down]=\"seccionesDesplegadas['examenOftalmologico']\" [class.fa-chevron-right]=\"!seccionesDesplegadas['examenOftalmologico']\"></i>\n                  EXAMEN OFTALMOLGICO\n                </h5>\n                        </div>\n                @if (seccionesDesplegadas['examenOftalmologico']) {\n                  <div class=\"card-body\">\n                    <div class=\"row-flex\">\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                          <label class=\"form-label\">Pupila Derecho</label>\n                          <input type=\"text\" class=\"form-control\" formControlName=\"examen_oftalmologico_pupila_derecho\" value=\"NORMOREACTIVA\">\n                        </div>\n                      </div>\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                          <label class=\"form-label\">Pupila Izquierdo</label>\n                          <input type=\"text\" class=\"form-control\" formControlName=\"examen_oftalmologico_pupila_izquierdo\" value=\"NORMOREACTIVA\">\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div class=\"row-flex\">\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                          <label class=\"form-label\">Prpado Derecho</label>\n                          <input type=\"text\" class=\"form-control\" formControlName=\"examen_oftalmologico_parpados_derecho\" value=\"SANOS\">\n                        </div>\n                      </div>\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                          <label class=\"form-label\">Prpado Izquierdo</label>\n                          <input type=\"text\" class=\"form-control\" formControlName=\"examen_oftalmologico_parpados_izquierdo\" value=\"SANOS\">\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div class=\"row-flex\">\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                          <label class=\"form-label\">Pelcula Lagrimal Derecho</label>\n                          <input type=\"text\" class=\"form-control\" formControlName=\"examen_oftalmologico_pelicula_lagrimal_derecho\" value=\"ESTABLE\">\n                        </div>\n                      </div>\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                          <label class=\"form-label\">Pelcula Lagrimal Izquierdo</label>\n                          <input type=\"text\" class=\"form-control\" formControlName=\"examen_oftalmologico_pelicula_lagrimal_izquierdo\" value=\"ESTABLE\">\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div class=\"row-flex\">\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                          <label class=\"form-label\">Conjuntiva Derecho</label>\n                          <input type=\"text\" class=\"form-control\" formControlName=\"examen_oftalmologico_conjuntiva_derecho\" value=\"HIPEREMIA 1 GENERALIZADA\">\n                        </div>\n                      </div>\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                          <label class=\"form-label\">Conjuntiva Izquierdo</label>\n                          <input type=\"text\" class=\"form-control\" formControlName=\"examen_oftalmologico_conjuntiva_izquierdo\" value=\"HIPEREMIA 1 GENERALIZADA\">\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div class=\"row-flex\">\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                          <label class=\"form-label\">Crnea Derecho</label>\n                          <input type=\"text\" class=\"form-control\" formControlName=\"examen_oftalmologico_cornea_derecho\" value=\"TRANSPARENTE\">\n                        </div>\n                      </div>\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                          <label class=\"form-label\">Crnea Izquierdo</label>\n                          <input type=\"text\" class=\"form-control\" formControlName=\"examen_oftalmologico_cornea_izquierdo\" value=\"TRANSPARENTE\">\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div class=\"row-flex\">\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                          <label class=\"form-label\">Cristalino Derecho</label>\n                          <input type=\"text\" class=\"form-control\" formControlName=\"examen_oftalmologico_cristalino_derecho\" value=\"TRANSPARENTE\">\n                        </div>\n                      </div>\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                          <label class=\"form-label\">Cristalino Izquierdo</label>\n                          <input type=\"text\" class=\"form-control\" formControlName=\"examen_oftalmologico_cristalino_izquierdo\" value=\"TRANSPARENTE\">\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div class=\"row-flex\">\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                          <label class=\"form-label\">Cmara Anterior Derecho</label>\n                          <input type=\"text\" class=\"form-control\" formControlName=\"examen_oftalmologico_camara_anterior_derecho\" value=\"VAN HERICK IV\">\n                        </div>\n                      </div>\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                          <label class=\"form-label\">Cmara Anterior Izquierdo</label>\n                          <input type=\"text\" class=\"form-control\" formControlName=\"examen_oftalmologico_camara_anterior_izquierdo\" value=\"VAN HERICK IV\">\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div class=\"row-flex\">\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                          <label class=\"form-label\">Iris Derecho</label>\n                          <input type=\"text\" class=\"form-control\" formControlName=\"examen_oftalmologico_iris_derecho\" value=\"CAF\">\n                        </div>\n                      </div>\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                          <label class=\"form-label\">Iris Izquierdo</label>\n                          <input type=\"text\" class=\"form-control\" formControlName=\"examen_oftalmologico_iris_izquierdo\" value=\"CAF\">\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div class=\"row-flex\">\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                    <label class=\"form-label\">Bruckner</label>\n                    <input type=\"text\" class=\"form-control\" formControlName=\"examen_oftalmologico_bruckner\" value=\"SIMTRICO\">\n                      </div>\n                    </div>\n                  </div>\n                  </div>\n                }\n                </div>\n\n            <!-- OFTALMOSCOPIA -->\n            <div class=\"card mb-4\">\n              <div class=\"card-header section-header\" (click)=\"toggleSeccion('oftalmoscopia')\">\n                <h5 class=\"mb-0\">\n                  <i class=\"fas\" [class.fa-chevron-down]=\"seccionesDesplegadas['oftalmoscopia']\" [class.fa-chevron-right]=\"!seccionesDesplegadas['oftalmoscopia']\"></i>\n                  OFTALMOSCOPIA\n                </h5>\n              </div>\n                @if (seccionesDesplegadas['oftalmoscopia']) {\n                  <div class=\"card-body\">\n                    <div class=\"grid-table table-examen-oftalmoscopia\">\n\n                      <div class=\"cell span-cols-2 background-azul\">Fondo de ojo derecho</div>\n                      <div class=\"cell span-cols-2 background-azul\">Fondo de ojo izquierdo</div>\n\n                      <div class=\"cell background-azul-claro\">Fondo de ojo derecho</div>\n                      <div class=\"cell\"><input type=\"number\" class=\"form-control\" formControlName=\"oftalmoscopia_derecho_excavacion\" value=\"0.3\"></div>\n                      <div class=\"cell background-azul-claro\">Fondo de ojo izquierdo</div>\n                      <div class=\"cell\"><input type=\"number\" class=\"form-control\" formControlName=\"oftalmoscopia_izquierdo_excavacion\" value=\"0.3\"></div>\n\n                      <div class=\"cell span-cols-2\"><textarea class=\"form-control\" formControlName=\"oftalmoscopia_derecho_descripcion\" rows=\"2\"></textarea></div>\n                      <div class=\"cell span-cols-2\"><textarea class=\"form-control\" formControlName=\"oftalmoscopia_izquierdo_descripcion\" rows=\"2\"></textarea></div>\n                    </div>\n                  </div>\n                }\n            </div>\n\n            <!-- FRMULA -->\n            <div class=\"card mb-4\">\n              <div class=\"card-header section-header\" (click)=\"toggleSeccion('formula')\">\n                <h5 class=\"mb-0\">\n                  <i class=\"fas\" [class.fa-chevron-down]=\"seccionesDesplegadas['formula']\" [class.fa-chevron-right]=\"!seccionesDesplegadas['formula']\"></i>\n                  FRMULA\n                </h5>\n              </div>\n                @if (seccionesDesplegadas['formula']) {\n                  <div class=\"card-body\">\n                    <div class=\"table-responsive-container\">\n                      <div class=\"grid-table table-examen-formula\">\n\n                      <div class=\"cell background-azul-claro\">Ojo</div>\n                      <div class=\"cell background-azul-claro\">Esfera</div>\n                      <div class=\"cell background-azul-claro\">Cilindro</div>\n                      <div class=\"cell background-azul-claro\">Eje</div>\n                      <div class=\"cell background-azul-claro\">AV Lejos</div>\n                      <div class=\"cell background-azul-claro\">ADD</div>\n                      <div class=\"cell background-azul-claro\">AC Cerca</div>\n                      <div class=\"cell background-azul-claro\">DNP</div>\n                      <div class=\"cell background-azul-claro\">Recomendacin</div>\n\n                      <div class=\"cell background-azul-claro\">Derecho</div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"formula_derecho_esfera\" value=\"N\" (blur)=\"formatEsferaField($event)\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"formula_derecho_cilindro\" value=\"-\" (blur)=\"formatCilindroField($event)\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"formula_derecho_eje\" value=\"-\" appAxisInput></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"formula_derecho_av_lejos\" value=\"20/20\" appPrefixInput=\"20/\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"formula_derecho_add\" value=\"+\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"formula_derecho_av_cerca\" value=\"0.50 M\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"formula_derecho_dnp\" value=\"31\"></div>\n                      <div class=\"cell span-rows-2\"><textarea class=\"form-control\" formControlName=\"formula_derecho_recomendacion\" rows=\"2\"></textarea></div>\n\n                      <div class=\"cell background-azul-claro\">Izquierdo</div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"formula_izquierdo_esfera\" value=\"N\" (blur)=\"formatEsferaField($event)\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"formula_izquierdo_cilindro\" value=\"-\" (blur)=\"formatCilindroField($event)\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"formula_izquierdo_eje\" value=\"-\" appAxisInput></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"formula_izquierdo_av_lejos\" value=\"20/20\" appPrefixInput=\"20/\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"formula_izquierdo_add\" value=\"+\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"formula_izquierdo_av_cerca\" value=\"0.50 M\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"formula_izquierdo_dnp\" value=\"31\"></div>\n\n                    </div>\n                    </div>                    \n                  </div>\n                }\n            </div>\n\n            <!-- OBSERVACIONES -->\n            <div class=\"card mb-4\">\n              <div class=\"card-header section-header\" (click)=\"toggleSeccion('observaciones')\">\n                <h5 class=\"mb-0\">\n                  <i class=\"fas\" [class.fa-chevron-down]=\"seccionesDesplegadas['observaciones']\" [class.fa-chevron-right]=\"!seccionesDesplegadas['observaciones']\"></i>\n                  OBSERVACIONES\n                </h5>\n              </div>\n                @if (seccionesDesplegadas['observaciones']) {\n                  <div class=\"card-body\">\n                    <div class=\"row-flex\">\n                      <div class=\"col-flex\">\n                        <div class=\"field-flex\">\n                    <label class=\"form-label\">Observaciones Generales</label>\n                    <textarea class=\"form-control\" formControlName=\"observaciones\" rows=\"6\"></textarea>\n                  </div>\n                </div>\n              </div>\n                  </div>\n                }\n            </div>\n\n            <!-- DIAGNSTICO -->\n            <div class=\"card mb-4\">\n              <div class=\"card-header section-header\" (click)=\"toggleSeccion('diagnostico')\">\n                <h5 class=\"mb-0\">\n                  <i class=\"fas\" [class.fa-chevron-down]=\"seccionesDesplegadas['diagnostico']\" [class.fa-chevron-right]=\"!seccionesDesplegadas['diagnostico']\"></i>\n                  DIAGNSTICO\n                </h5>\n              </div>\n                @if (seccionesDesplegadas['diagnostico']) {\n                  <div class=\"card-body\">\n                    <div class=\"table-responsive-container\">\n                      <div class=\"grid-table table-examen-diagnostico\">\n\n                      <div class=\"cell background-azul-claro\">Cdigo</div>\n                      <div class=\"cell background-azul-claro\">Diagnstico</div>\n                      <div class=\"cell background-azul-claro\">Descripcin</div>\n                      <div class=\"cell background-azul-claro\">Ojo</div>\n                      <div class=\"cell background-azul-claro\">Principal</div>\n\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_codigo_1\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_diagnostico_1\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_descripcion_1\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_ojo_1\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_principal_1\"></div>\n\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_codigo_2\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_diagnostico_2\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_descripcion_2\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_ojo_2\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_principal_2\"></div>\n\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_codigo_3\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_diagnostico_3\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_descripcion_3\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_ojo_3\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_principal_3\"></div>\n\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_codigo_4\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_diagnostico_4\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_descripcion_4\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_ojo_4\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_principal_4\"></div>\n\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_codigo_5\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_diagnostico_5\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_descripcion_5\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_ojo_5\"></div>\n                      <div class=\"cell\"><input type=\"text\" class=\"form-control\" formControlName=\"diagnostico_principal_5\"></div>\n                    </div>\n                    </div>\n\n                  </div>\n                }\n            </div>\n\n            <!-- Botones -->\n            <div class=\"row\">\n              <div class=\"col-12\">\n                <button type=\"button\" class=\"btn btn-secondary me-2\" (click)=\"closeForm()\">\n                  <i class=\"fas fa-times\"></i> {{ editingHistoriaId ? 'Cerrar' : 'Cancelar' }}\n                </button>\n                  @if (!editingHistoriaId) {\n                    <button type=\"submit\" class=\"btn btn-primary\">\n                  <i class=\"fas fa-save\"></i> Guardar Historia Clnica\n                </button>\n                  }\n                  @if (editingHistoriaId && isEditing) {\n                    <button type=\"submit\" class=\"btn btn-success\">\n                  <i class=\"fas fa-save\"></i> Actualizar Historia Clnica\n                </button>\n                  }\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n  }\n</div>","import { Directive, ElementRef, HostListener, Input } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[appAxisInput]',\r\n  standalone: true\r\n})\r\nexport class AxisInputDirective {\r\n  private readonly maxAxisValue = 180;\r\n  @Input('appAxisInputZeroToMax') zeroToMax = false;\r\n  private isInternalUpdate = false;\r\n\r\n  constructor(private el: ElementRef<HTMLInputElement>) {}\r\n\r\n  @HostListener('keydown', ['$event'])\r\n  onKeyDown(event: KeyboardEvent) {\r\n    if (this.isPermittedKey(event)) {\r\n      return;\r\n    }\r\n\r\n    if (this.isNumericKey(event)) {\r\n      const nextValue = this.getNextValue(event.key);\r\n      if (!this.isValueInRange(nextValue)) {\r\n        event.preventDefault();\r\n      }\r\n      return;\r\n    }\r\n\r\n    event.preventDefault();\r\n  }\r\n\r\n  @HostListener('input')\r\n  onInput() {\r\n    if (this.isInternalUpdate) {\r\n      this.isInternalUpdate = false;\r\n      return;\r\n    }\r\n\r\n    const input = this.el.nativeElement;\r\n    const digitsOnly = input.value.replace(/\\D+/g, '');\r\n\r\n    if (digitsOnly === '') {\r\n      this.updateInputValue('');\r\n      return;\r\n    }\r\n\r\n    const numericValue = parseInt(digitsOnly, 10);\r\n    if (isNaN(numericValue)) {\r\n      this.updateInputValue('');\r\n      return;\r\n    }\r\n\r\n    this.updateInputValue(Math.min(numericValue, this.maxAxisValue).toString());\r\n  }\r\n\r\n  @HostListener('paste', ['$event'])\r\n  onPaste(event: ClipboardEvent) {\r\n    const pastedData = event.clipboardData?.getData('text') ?? '';\r\n    if (!/^\\d+$/.test(pastedData)) {\r\n      event.preventDefault();\r\n      return;\r\n    }\r\n\r\n    const combinedValue = pastedData.slice(0, 3);\r\n    const numericValue = parseInt(combinedValue, 10);\r\n    if (numericValue > this.maxAxisValue) {\r\n      event.preventDefault();\r\n      this.el.nativeElement.value = this.maxAxisValue.toString();\r\n      this.dispatchInputEvent();\r\n      return;\r\n    }\r\n  }\r\n\r\n  @HostListener('blur')\r\n  onBlur() {\r\n    if (!this.zeroToMax) {\r\n      return;\r\n    }\r\n\r\n    const value = this.el.nativeElement.value.trim();\r\n    if (value === '0') {\r\n      this.updateInputValue(this.maxAxisValue.toString());\r\n    }\r\n  }\r\n\r\n  private isPermittedKey(event: KeyboardEvent): boolean {\r\n    const allowedKeys = [\r\n      'Backspace',\r\n      'Tab',\r\n      'ArrowLeft',\r\n      'ArrowRight',\r\n      'Delete',\r\n      'Home',\r\n      'End'\r\n    ];\r\n\r\n    if (allowedKeys.includes(event.key)) {\r\n      return true;\r\n    }\r\n\r\n    if (event.ctrlKey || event.metaKey) {\r\n      return ['c', 'v', 'x', 'a'].includes(event.key.toLowerCase());\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  private isNumericKey(event: KeyboardEvent): boolean {\r\n    return /^[0-9]$/.test(event.key);\r\n  }\r\n\r\n  private getNextValue(addedDigit: string): string {\r\n    const input = this.el.nativeElement;\r\n    const { selectionStart, selectionEnd, value } = input;\r\n\r\n    if (selectionStart === null || selectionEnd === null) {\r\n      return value + addedDigit;\r\n    }\r\n\r\n    return (\r\n      value.substring(0, selectionStart) +\r\n      addedDigit +\r\n      value.substring(selectionEnd)\r\n    );\r\n  }\r\n\r\n  private isValueInRange(value: string): boolean {\r\n    if (!/^\\d{1,3}$/.test(value)) {\r\n      return false;\r\n    }\r\n\r\n    const numericValue = parseInt(value, 10);\r\n    return numericValue >= 0 && numericValue <= this.maxAxisValue;\r\n  }\r\n\r\n  private updateInputValue(value: string): void {\r\n    if (this.el.nativeElement.value === value) {\r\n      return;\r\n    }\r\n\r\n    this.isInternalUpdate = true;\r\n    this.el.nativeElement.value = value;\r\n    this.dispatchInputEvent();\r\n  }\r\n\r\n  private dispatchInputEvent(): void {\r\n    const event = new Event('input', { bubbles: true });\r\n    this.el.nativeElement.dispatchEvent(event);\r\n  }\r\n}\r\n\r\n","import { Directive, ElementRef, HostListener, Input, OnInit } from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\n\r\n@Directive({\r\n  selector: '[appPrefixInput]',\r\n  standalone: true,\r\n  providers: [\r\n    {\r\n      provide: NG_VALUE_ACCESSOR,\r\n      useExisting: PrefixInputDirective,\r\n      multi: true\r\n    }\r\n  ]\r\n})\r\nexport class PrefixInputDirective implements ControlValueAccessor, OnInit {\r\n  @Input() appPrefixInput: string = '';\r\n  \r\n  private onChange = (value: string) => {};\r\n  private onTouched = () => {};\r\n  private currentValue = '';\r\n\r\n  constructor(private el: ElementRef<HTMLInputElement>) {}\r\n\r\n  ngOnInit() {\r\n    // Establecer el valor inicial con el prefijo\r\n    if (this.appPrefixInput && !this.currentValue) {\r\n      this.currentValue = this.appPrefixInput;\r\n      this.el.nativeElement.value = this.currentValue;\r\n    }\r\n  }\r\n\r\n  @HostListener('input', ['$event'])\r\n  onInput(event: Event) {\r\n    const input = event.target as HTMLInputElement;\r\n    let value = input.value;\r\n    \r\n    // Si el valor no comienza con el prefijo, restaurar el prefijo\r\n    if (this.appPrefixInput && !value.startsWith(this.appPrefixInput)) {\r\n      // Si el usuario est intentando borrar el prefijo, mantenerlo\r\n      if (value.length < this.appPrefixInput.length) {\r\n        value = this.appPrefixInput;\r\n      } else {\r\n        // Si el usuario est escribiendo despus del prefijo, mantener el prefijo\r\n        value = this.appPrefixInput + value.substring(this.appPrefixInput.length);\r\n      }\r\n    }\r\n    \r\n    this.currentValue = value;\r\n    input.value = value;\r\n    this.onChange(value);\r\n  }\r\n\r\n  @HostListener('keydown', ['$event'])\r\n  onKeyDown(event: KeyboardEvent) {\r\n    const input = event.target as HTMLInputElement;\r\n    const cursorPosition = input.selectionStart || 0;\r\n    \r\n    // Si el cursor est antes del prefijo y el usuario presiona una tecla de borrado\r\n    if (this.appPrefixInput && cursorPosition < this.appPrefixInput.length) {\r\n      if (event.key === 'Backspace' || event.key === 'Delete') {\r\n        event.preventDefault();\r\n        // Mover el cursor al final del prefijo\r\n        setTimeout(() => {\r\n          input.setSelectionRange(this.appPrefixInput.length, this.appPrefixInput.length);\r\n        }, 0);\r\n      }\r\n    }\r\n  }\r\n\r\n  @HostListener('click', ['$event'])\r\n  onClick(event: Event) {\r\n    const input = event.target as HTMLInputElement;\r\n    const cursorPosition = input.selectionStart || 0;\r\n    \r\n    // Si el usuario hace clic antes del prefijo, mover el cursor al final del prefijo\r\n    if (this.appPrefixInput && cursorPosition < this.appPrefixInput.length) {\r\n      setTimeout(() => {\r\n        input.setSelectionRange(this.appPrefixInput.length, this.appPrefixInput.length);\r\n      }, 0);\r\n    }\r\n  }\r\n\r\n  @HostListener('focus', ['$event'])\r\n  onFocus(event: Event) {\r\n    const input = event.target as HTMLInputElement;\r\n    \r\n    // Al enfocar, posicionar el cursor al final del prefijo\r\n    if (this.appPrefixInput) {\r\n      setTimeout(() => {\r\n        input.setSelectionRange(this.appPrefixInput.length, this.appPrefixInput.length);\r\n      }, 0);\r\n    }\r\n  }\r\n\r\n  @HostListener('blur')\r\n  onBlur() {\r\n    this.onTouched();\r\n  }\r\n\r\n  // ControlValueAccessor implementation\r\n  writeValue(value: string): void {\r\n    this.currentValue = value || this.appPrefixInput;\r\n    this.el.nativeElement.value = this.currentValue;\r\n  }\r\n\r\n  registerOnChange(fn: (value: string) => void): void {\r\n    this.onChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: () => void): void {\r\n    this.onTouched = fn;\r\n  }\r\n\r\n  setDisabledState(isDisabled: boolean): void {\r\n    this.el.nativeElement.disabled = isDisabled;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { environment } from '../../environments/environment';\nimport { HistoriaClinica, HistoriaClinicaCreateRequest, HistoriaClinicaUpdateRequest, HistoriaClinicaOrganizada } from '../models/historia-clinica.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class HistoriasClinicasService {\n  private apiUrl = `${environment.apiUrl}/historias-clinicas`;\n\n  constructor(private http: HttpClient) { }\n\n  getHistoriasClinicas(pacienteId: number): Observable<HistoriaClinica[]> {\n    return this.http.get<HistoriaClinica[]>(`${this.apiUrl}?paciente_id=${pacienteId}`);\n  }\n\n  getHistoriaClinicaById(id: number): Observable<HistoriaClinica> {\n    return this.http.get<HistoriaClinica>(`${this.apiUrl}/${id}`);\n  }\n\n  createHistoriaClinica(historia: HistoriaClinicaCreateRequest): Observable<any> {\n    return this.http.post(this.apiUrl, historia);\n  }\n\n  createHistoriaClinicaOrganizada(historia: HistoriaClinicaOrganizada): Observable<any> {\n    return this.http.post(this.apiUrl, historia);\n  }\n\n  updateHistoriaClinica(id: number, historia: HistoriaClinicaUpdateRequest): Observable<any> {\n    return this.http.put(`${this.apiUrl}/${id}`, historia);\n  }\n\n  updateHistoriaClinicaOrganizada(id: number, historia: HistoriaClinicaOrganizada): Observable<any> {\n    return this.http.put(`${this.apiUrl}/${id}`, historia);\n  }\n\n  deleteHistoriaClinica(id: number): Observable<any> {\n    return this.http.delete(`${this.apiUrl}/${id}`);\n  }\n}\n\n\n\n\n"],"names":["CommonModule","ReactiveFormsModule","Validators","environment","PrefixInputDirective","AxisInputDirective","i0","elementStart","text","elementEnd","advance","textInterpolate1","ctx_r0","pacienteNombre","listener","HistoriasClinicasComponent_Conditional_15_Conditional_4_For_11_Template_div_click_0_listener","historia_r3","restoreView","_r2","$implicit","nextContext","resetView","editHistoria","element","HistoriasClinicasComponent_Conditional_15_Conditional_4_For_11_Template_button_click_12_listener","$event","stopPropagation","HistoriasClinicasComponent_Conditional_15_Conditional_4_For_11_Template_button_click_15_listener","generatePDF","pipeBind2","fecha_consulta","hora","motivo_consulta","repeaterCreate","HistoriasClinicasComponent_Conditional_15_Conditional_4_For_11_Template","_forTrack0","repeater","historias","HistoriasClinicasComponent_Conditional_15_Conditional_5_Template_button_click_6_listener","_r4","showCreateFormModal","template","HistoriasClinicasComponent_Conditional_15_Conditional_4_Template","HistoriasClinicasComponent_Conditional_15_Conditional_5_Template","conditional","length","HistoriasClinicasComponent_Conditional_16_Conditional_7_Template_button_click_0_listener","_r6","generatePDFFromView","property","selectedHistoriaEditable","classProp","textInterpolate","selectedHistoriaEditMessage","HistoriasClinicasComponent_Conditional_16_Conditional_17_Template_input_change_6_listener","_r7","onFechaConsultaChange","paciente","nombre","apellidos","tipo_documento","documento","fecha_nacimiento","calcularEdad","genero","rh","telefono","email","nombre_acudiente","HistoriasClinicasComponent_Conditional_16_Conditional_29_Conditional_48_Template_input_blur_19_listener","_r9","formatEsferaField","HistoriasClinicasComponent_Conditional_16_Conditional_29_Conditional_48_Template_input_input_19_listener","validateLensometriaField","HistoriasClinicasComponent_Conditional_16_Conditional_29_Conditional_48_Template_input_blur_21_listener","formatCilindroField","HistoriasClinicasComponent_Conditional_16_Conditional_29_Conditional_48_Template_input_input_21_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Conditional_48_Template_input_blur_23_listener","formatEjeField","HistoriasClinicasComponent_Conditional_16_Conditional_29_Conditional_48_Template_input_input_23_listener","validateEjeField","HistoriasClinicasComponent_Conditional_16_Conditional_29_Conditional_48_Template_input_blur_25_listener","formatLensometriaField","HistoriasClinicasComponent_Conditional_16_Conditional_29_Conditional_48_Template_input_input_25_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Conditional_48_Template_input_blur_31_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Conditional_48_Template_input_input_31_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Conditional_48_Template_input_blur_33_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Conditional_48_Template_input_input_33_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Conditional_48_Template_input_blur_35_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Conditional_48_Template_input_input_35_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Conditional_48_Template_input_blur_37_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Conditional_48_Template_input_input_37_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Template_button_click_5_listener","_r8","toggleFila","HistoriasClinicasComponent_Conditional_16_Conditional_29_Template_input_blur_25_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Template_input_input_25_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Template_input_blur_27_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Template_input_input_27_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Template_input_blur_29_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Template_input_input_29_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Template_input_blur_31_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Template_input_input_31_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Template_input_blur_39_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Template_input_input_39_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Template_input_blur_41_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Template_input_input_41_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Template_input_blur_43_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Template_input_input_43_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Template_input_blur_45_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Template_input_input_45_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Conditional_48_Template","isFilaVisible","HistoriasClinicasComponent_Conditional_16_Conditional_35_Template_button_click_36_listener","_r10","HistoriasClinicasComponent_Conditional_16_Conditional_35_Conditional_50_Template","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_click_61_listener","_r11","onVersionesVClick","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_keydown_61_listener","onVersionesKeyDown","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_click_63_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_keydown_63_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_click_65_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_keydown_65_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_click_67_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_keydown_67_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_click_69_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_keydown_69_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_click_71_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_keydown_71_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_click_79_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_keydown_79_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_click_81_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_keydown_81_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_click_83_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_keydown_83_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_click_85_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_keydown_85_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_click_87_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_keydown_87_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_click_89_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template_text_keydown_89_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Conditional_75_Template_input_blur_33_listener","_r13","HistoriasClinicasComponent_Conditional_16_Conditional_47_Conditional_75_Template_input_blur_35_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Conditional_75_Template_input_blur_43_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Conditional_75_Template_input_blur_45_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Conditional_75_Template_input_blur_55_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Conditional_75_Template_input_blur_57_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Conditional_75_Template_input_blur_65_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Conditional_75_Template_input_blur_67_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_input_blur_31_listener","_r12","formatKeratometriaOnBlur","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_input_keypress_31_listener","onKeratometriaKeyPress","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_input_blur_33_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_input_keypress_33_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_input_blur_43_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_input_blur_45_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_input_blur_53_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_input_keypress_53_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_input_blur_55_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_input_keypress_55_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_input_blur_65_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_input_blur_67_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_button_click_73_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_button_keydown_73_listener","onToggleButtonKeyDown","HistoriasClinicasComponent_Conditional_16_Conditional_47_Conditional_75_Template","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_input_input_113_listener","onDistanciaChange","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_input_input_123_listener","onEsferaDerechaChange","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_input_blur_123_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_input_input_125_listener","onCilindroDerechoChange","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_input_blur_125_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_input_input_147_listener","onEsferaIzquierdaChange","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_input_blur_147_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_input_input_149_listener","onCilindroIzquierdoChange","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template_input_blur_149_listener","HistoriasClinicasComponent_Conditional_16_Conditional_65_Template_input_blur_24_listener","_r14","HistoriasClinicasComponent_Conditional_16_Conditional_65_Template_input_blur_26_listener","HistoriasClinicasComponent_Conditional_16_Conditional_65_Template_input_blur_42_listener","HistoriasClinicasComponent_Conditional_16_Conditional_65_Template_input_blur_44_listener","HistoriasClinicasComponent_Conditional_16_Conditional_7_Template","HistoriasClinicasComponent_Conditional_16_Template_form_ngSubmit_9_listener","_r5","saveHistoria","HistoriasClinicasComponent_Conditional_16_Template_form_keydown_9_listener","onKeyDown","HistoriasClinicasComponent_Conditional_16_Conditional_10_Template","HistoriasClinicasComponent_Conditional_16_Template_div_click_12_listener","toggleSeccion","HistoriasClinicasComponent_Conditional_16_Conditional_17_Template","HistoriasClinicasComponent_Conditional_16_Template_div_click_19_listener","HistoriasClinicasComponent_Conditional_16_Conditional_23_Template","HistoriasClinicasComponent_Conditional_16_Template_div_click_25_listener","HistoriasClinicasComponent_Conditional_16_Conditional_29_Template","HistoriasClinicasComponent_Conditional_16_Template_div_click_31_listener","HistoriasClinicasComponent_Conditional_16_Conditional_35_Template","HistoriasClinicasComponent_Conditional_16_Template_div_click_37_listener","HistoriasClinicasComponent_Conditional_16_Conditional_41_Template","HistoriasClinicasComponent_Conditional_16_Template_div_click_43_listener","HistoriasClinicasComponent_Conditional_16_Conditional_47_Template","HistoriasClinicasComponent_Conditional_16_Template_div_click_49_listener","HistoriasClinicasComponent_Conditional_16_Conditional_53_Template","HistoriasClinicasComponent_Conditional_16_Template_div_click_55_listener","HistoriasClinicasComponent_Conditional_16_Conditional_59_Template","HistoriasClinicasComponent_Conditional_16_Template_div_click_61_listener","HistoriasClinicasComponent_Conditional_16_Conditional_65_Template","HistoriasClinicasComponent_Conditional_16_Template_div_click_67_listener","HistoriasClinicasComponent_Conditional_16_Conditional_71_Template","HistoriasClinicasComponent_Conditional_16_Template_div_click_73_listener","HistoriasClinicasComponent_Conditional_16_Conditional_77_Template","HistoriasClinicasComponent_Conditional_16_Template_button_click_80_listener","closeForm","HistoriasClinicasComponent_Conditional_16_Conditional_83_Template","HistoriasClinicasComponent_Conditional_16_Conditional_84_Template","editingHistoriaId","historiaForm","seccionesDesplegadas","isEditing","HistoriasClinicasComponent","constructor","fb","route","router","historiasClinicasService","pacientesService","toastService","authService","pacienteId","showCreateForm","selectedHistoriaEditableUntil","selectedHistoriaCreatedAt","EDIT_WINDOW_MS","datosPaciente","cuestionario","lensometria","agudezaVisual","examenMotor","examenRefractivo","examenOftalmologico","oftalmoscopia","formula","observaciones","diagnostico","filasVisibles","agudezaVisualConCorreccion","lensometriaFormulaCerca","examenRefractivoRetinoscopia","tabOrder","campoASeccionMap","createForm","ngOnInit","queryParams","subscribe","params","loadPacienteFromParams","loadHistoriasClinicas","loadPacienteData","setTimeout","setupKeratometriaCalculations","setupExamenRefractivoSync","setupFechaControlSync","group","required","fecha_control","tipo_examen","anamnesis","ultima_valoracion_optometria","ocupacion_profesion","antecedentes_familiares","antecedentes_personales","antecedentes_laborales","lensometria_formula_lejos_derecho_esfera","lensometria_formula_lejos_derecho_cilindro","lensometria_formula_lejos_derecho_eje","lensometria_formula_lejos_derecho_adicion","lensometria_formula_lejos_derecho_prisma","lensometria_formula_lejos_izquierdo_esfera","lensometria_formula_lejos_izquierdo_cilindro","lensometria_formula_lejos_izquierdo_eje","lensometria_formula_lejos_izquierdo_adicion","lensometria_formula_lejos_izquierdo_prisma","lensometria_formula_cerca_derecho_esfera","lensometria_formula_cerca_derecho_cilindro","lensometria_formula_cerca_derecho_eje","lensometria_formula_cerca_derecho_adicion","lensometria_formula_cerca_izquierdo_esfera","lensometria_formula_cerca_izquierdo_cilindro","lensometria_formula_cerca_izquierdo_eje","lensometria_formula_cerca_izquierdo_adicion","lensometria_observaciones","lejos_test_usado","cerca_test_usado","sin_correccion_lejos_derecho","sin_correccion_lejos_izquierdo","sin_correccion_lejos_ambos","con_correccion_lejos_derecho","con_correccion_lejos_izquierdo","con_correccion_lejos_ambos","pin_hole_lejos_derecho","pin_hole_lejos_izquierdo","sin_correccion_cerca_derecho","sin_correccion_cerca_izquierdo","sin_correccion_cerca_ambos","sin_correccion_cerca_observacion","con_correccion_cerca_derecho","con_correccion_cerca_izquierdo","con_correccion_cerca_ambos","con_correccion_cerca_observacion","pin_hole_cerca_derecho","pin_hole_cerca_izquierdo","agudeza_visual_cerca_distancia","agudeza_visual_cerca_descripcion","agudeza_visual_cerca_derecho_sin_correccion","agudeza_visual_cerca_izquierdo_sin_correccion","agudeza_visual_cerca_observacion_sin_correccion","agudeza_visual_cerca_derecho_con_correccion","agudeza_visual_cerca_izquierdo_con_correccion","agudeza_visual_cerca_observacion_con_correccion","examen_motor_mano_dominante","examen_motor_ojo_dominante","examen_motor_punto_proximo_valor","examen_motor_dp_lejos","examen_motor_dp_cerca","examen_motor_ducciones_derecho","examen_motor_ducciones_izquierdo","examen_motor_kappa_derecho","examen_motor_kappa_izquierdo","examen_motor_hirschberg","examen_motor_test_utilizado","examen_motor_cover_test_con_correccion_horizontal","examen_motor_cover_test_con_correccion_vertical","examen_motor_cover_test_sin_correccion_horizontal","examen_motor_cover_test_sin_correccion_vertical","examen_motor_prisma_con_correccion_horizontal","examen_motor_prisma_con_correccion_vertical","examen_motor_prisma_sin_correccion_horizontal","examen_motor_prisma_sin_correccion_vertical","examen_motor_observaciones","examen_motor_por_confirmar_derecho","examen_motor_por_confirmar_izquierdo","examen_motor_estereopsis_tipo","examen_motor_estereopsis_resultado","examen_motor_versiones_derecho_left","examen_motor_versiones_derecho_right","examen_motor_versiones_derecho_top_left","examen_motor_versiones_derecho_bottom_left","examen_motor_versiones_derecho_top_right","examen_motor_versiones_derecho_bottom_right","examen_motor_versiones_izquierdo_left","examen_motor_versiones_izquierdo_right","examen_motor_versiones_izquierdo_top_left","examen_motor_versiones_izquierdo_bottom_left","examen_motor_versiones_izquierdo_top_right","examen_motor_versiones_izquierdo_bottom_right","examen_refractivo_keratometria_derecho_plano","examen_refractivo_keratometria_derecho_curvo","examen_refractivo_keratometria_derecho_eje","examen_refractivo_keratometria_derecho_miras","examen_refractivo_keratometria_derecho_corn","examen_refractivo_keratometria_izquierdo_plano","examen_refractivo_keratometria_izquierdo_curvo","examen_refractivo_keratometria_izquierdo_eje","examen_refractivo_keratometria_izquierdo_miras","examen_refractivo_keratometria_izquierdo_corn","examen_refractivo_retinoscopia_estatica_derecho_esfera","examen_refractivo_retinoscopia_estatica_derecho_cilindro","examen_refractivo_retinoscopia_estatica_derecho_eje","examen_refractivo_retinoscopia_estatica_derecho_sombras","examen_refractivo_retinoscopia_estatica_izquierdo_esfera","examen_refractivo_retinoscopia_estatica_izquierdo_cilindro","examen_refractivo_retinoscopia_estatica_izquierdo_eje","examen_refractivo_retinoscopia_estatica_izquierdo_sombras","examen_refractivo_retinoscopia_dinamica_derecho_esfera","examen_refractivo_retinoscopia_dinamica_derecho_cilindro","examen_refractivo_retinoscopia_dinamica_derecho_eje","examen_refractivo_retinoscopia_dinamica_derecho_sombras","examen_refractivo_retinoscopia_dinamica_izquierdo_esfera","examen_refractivo_retinoscopia_dinamica_izquierdo_cilindro","examen_refractivo_retinoscopia_dinamica_izquierdo_eje","examen_refractivo_retinoscopia_dinamica_izquierdo_sombras","examen_refractivo_otra_refraccion","examen_refractivo_radio_k_1","examen_refractivo_radio_k_2","examen_refractivo_otra_refraccion_derecho_esfera","examen_refractivo_otra_refraccion_derecho_cilindro","examen_refractivo_otra_refraccion_derecho_eje","examen_refractivo_otra_refraccion_derecho_sombras","examen_refractivo_otra_refraccion_izquierdo_esfera","examen_refractivo_otra_refraccion_izquierdo_cilindro","examen_refractivo_otra_refraccion_izquierdo_eje","examen_refractivo_otra_refraccion_izquierdo_sombras","examen_refractivo_subjetivo_normal","examen_refractivo_subjetivo_cycloplejia","examen_refractivo_subjetivo_otra","examen_refractivo_subjetivo_distancia_al","examen_refractivo_subjetivo_derecho_esfera","examen_refractivo_subjetivo_derecho_cilindro","examen_refractivo_subjetivo_derecho_eje","examen_refractivo_subjetivo_derecho_av_lejos","examen_refractivo_subjetivo_derecho_add","examen_refractivo_subjetivo_derecho_av_cerca","examen_refractivo_subjetivo_derecho_dnp","examen_refractivo_subjetivo_derecho_vortice","examen_refractivo_subjetivo_derecho_mm","examen_refractivo_subjetivo_derecho_estatica","examen_refractivo_subjetivo_derecho_dinamica","examen_refractivo_subjetivo_izquierdo_esfera","examen_refractivo_subjetivo_izquierdo_cilindro","examen_refractivo_subjetivo_izquierdo_eje","examen_refractivo_subjetivo_izquierdo_av_lejos","examen_refractivo_subjetivo_izquierdo_add","examen_refractivo_subjetivo_izquierdo_av_cerca","examen_refractivo_subjetivo_izquierdo_dnp","examen_refractivo_subjetivo_izquierdo_vortice","examen_refractivo_subjetivo_izquierdo_mm","examen_refractivo_subjetivo_izquierdo_estatica","examen_refractivo_subjetivo_izquierdo_dinamica","examen_refractivo_av_retinoscopia_derecho_estatica","examen_refractivo_av_retinoscopia_derecho_dinamica","examen_refractivo_av_retinoscopia_izquierdo_estatica","examen_refractivo_av_retinoscopia_izquierdo_dinamica","examen_oftalmologico_pupila_derecho","examen_oftalmologico_pupila_izquierdo","examen_oftalmologico_parpados_derecho","examen_oftalmologico_parpados_izquierdo","examen_oftalmologico_pelicula_lagrimal_derecho","examen_oftalmologico_pelicula_lagrimal_izquierdo","examen_oftalmologico_conjuntiva_derecho","examen_oftalmologico_conjuntiva_izquierdo","examen_oftalmologico_cornea_derecho","examen_oftalmologico_cornea_izquierdo","examen_oftalmologico_cristalino_derecho","examen_oftalmologico_cristalino_izquierdo","examen_oftalmologico_camara_anterior_derecho","examen_oftalmologico_camara_anterior_izquierdo","examen_oftalmologico_iris_derecho","examen_oftalmologico_iris_izquierdo","examen_oftalmologico_bruckner","oftalmoscopia_derecho_excavacion","oftalmoscopia_derecho_descripcion","oftalmoscopia_izquierdo_excavacion","oftalmoscopia_izquierdo_descripcion","formula_derecho_esfera","formula_derecho_cilindro","formula_derecho_eje","formula_derecho_av_lejos","formula_derecho_add","formula_derecho_av_cerca","formula_derecho_dnp","formula_derecho_recomendacion","formula_izquierdo_esfera","formula_izquierdo_cilindro","formula_izquierdo_eje","formula_izquierdo_av_lejos","formula_izquierdo_add","formula_izquierdo_av_cerca","formula_izquierdo_dnp","formula_izquierdo_recomendacion","array","diagnostico_seguridad","diagnostico_maltrato","diagnostico_maltrato_x","diagnostico_violencia","diagnostico_violencia_x","diagnostico_codigo_1","diagnostico_diagnostico_1","diagnostico_descripcion_1","diagnostico_ojo_1","diagnostico_principal_1","diagnostico_codigo_2","diagnostico_diagnostico_2","diagnostico_descripcion_2","diagnostico_ojo_2","diagnostico_principal_2","diagnostico_codigo_3","diagnostico_diagnostico_3","diagnostico_descripcion_3","diagnostico_ojo_3","diagnostico_principal_3","diagnostico_codigo_4","diagnostico_diagnostico_4","diagnostico_descripcion_4","diagnostico_ojo_4","diagnostico_principal_4","diagnostico_codigo_5","diagnostico_diagnostico_5","diagnostico_descripcion_5","diagnostico_ojo_5","diagnostico_principal_5","getHistoriasClinicas","next","data","Array","isArray","error","console","status","showError","pacienteData","id","undefined","getPacienteById","response","fechaNacimiento","hoy","Date","nacimiento","edad","getFullYear","mes","getMonth","getDate","isHistoriaEditable","historia","state","computeHistoriaEditState","isEditable","getHistoriaEditableSummary","createdAt","editableUntil","formatDateTime","parseDateTimeString","created_at","getTime","now","dateTime","trimmed","trim","parsed","isNaN","replace","date","Intl","DateTimeFormat","day","month","year","hour","minute","format","updateSelectedHistoriaEditState","fechaConsulta","getFechaLocal","fechaControl","calcularFechaControl","patchValue","agudeza_visual_cerca_sin_correccion_derecho","agudeza_visual_cerca_sin_correccion_izquierdo","agudeza_visual_cerca_sin_correccion_ambos","agudeza_visual_cerca_con_correccion_derecho","agudeza_visual_cerca_con_correccion_izquierdo","agudeza_visual_cerca_con_correccion_ambos","agudeza_visual_cerca_pin_hole_derecho","agudeza_visual_cerca_pin_hole_izquierdo","initializeDiagnosticoArray","syncVersionesToSVG","mode","showWarning","formData","flattenDataForForm","Object","assign","formula_lejos_derecho_esfera","formula_lejos_derecho_cilindro","formula_lejos_derecho_eje","formula_lejos_derecho_adicion","formula_lejos_derecho_prisma","formula_lejos_izquierdo_esfera","formula_lejos_izquierdo_cilindro","formula_lejos_izquierdo_eje","formula_lejos_izquierdo_adicion","formula_lejos_izquierdo_prisma","formula_cerca_derecho_esfera","formula_cerca_derecho_cilindro","formula_cerca_derecho_eje","formula_cerca_derecho_adicion","formula_cerca_izquierdo_esfera","formula_cerca_izquierdo_cilindro","formula_cerca_izquierdo_eje","formula_cerca_izquierdo_adicion","agudeza_visual","av","cerca_distancia","cerca_descripcion","cerca_derecho_sin_correccion","cerca_izquierdo_sin_correccion","cerca_observacion_sin_correccion","cerca_derecho_con_correccion","cerca_izquierdo_con_correccion","cerca_observacion_con_correccion","examen_motor","mano_dominante","ojo_dominante","punto_proximo_valor","dp_lejos","dp_cerca","ducciones_derecho","ducciones_izquierdo","kappa_derecho","kappa_izquierdo","hirschberg","test_utilizado","cover_test_con_correccion_horizontal","cover_test_con_correccion_vertical","cover_test_sin_correccion_horizontal","cover_test_sin_correccion_vertical","prisma_con_correccion_horizontal","prisma_con_correccion_vertical","prisma_sin_correccion_horizontal","prisma_sin_correccion_vertical","por_confirmar_derecho","por_confirmar_izquierdo","estereopsis_tipo","estereopsis_resultado","versiones_derecho_left","versiones_derecho_right","versiones_derecho_top_left","versiones_derecho_bottom_left","versiones_derecho_top_right","versiones_derecho_bottom_right","versiones_izquierdo_left","versiones_izquierdo_right","versiones_izquierdo_top_left","versiones_izquierdo_bottom_left","versiones_izquierdo_top_right","versiones_izquierdo_bottom_right","examen_refractivo","er","keratometria_derecho_plano","keratometria_derecho_curvo","keratometria_derecho_eje","keratometria_derecho_miras","keratometria_derecho_corn","keratometria_izquierdo_plano","keratometria_izquierdo_curvo","keratometria_izquierdo_eje","keratometria_izquierdo_miras","keratometria_izquierdo_corn","retinoscopia_estatica_derecho_esfera","retinoscopia_estatica_derecho_cilindro","retinoscopia_estatica_derecho_eje","retinoscopia_estatica_derecho_sombras","retinoscopia_estatica_izquierdo_esfera","retinoscopia_estatica_izquierdo_cilindro","retinoscopia_estatica_izquierdo_eje","retinoscopia_estatica_izquierdo_sombras","retinoscopia_dinamica_derecho_esfera","retinoscopia_dinamica_derecho_cilindro","retinoscopia_dinamica_derecho_eje","retinoscopia_dinamica_derecho_sombras","retinoscopia_dinamica_izquierdo_esfera","retinoscopia_dinamica_izquierdo_cilindro","retinoscopia_dinamica_izquierdo_eje","retinoscopia_dinamica_izquierdo_sombras","subjetivo_derecho_esfera","subjetivo_derecho_cilindro","subjetivo_derecho_eje","subjetivo_derecho_av_lejos","subjetivo_derecho_add","subjetivo_derecho_av_cerca","subjetivo_derecho_dnp","subjetivo_derecho_vortice","subjetivo_derecho_mm","subjetivo_derecho_estatica","subjetivo_derecho_dinamica","subjetivo_izquierdo_esfera","subjetivo_izquierdo_cilindro","subjetivo_izquierdo_eje","subjetivo_izquierdo_av_lejos","subjetivo_izquierdo_add","subjetivo_izquierdo_av_cerca","subjetivo_izquierdo_dnp","subjetivo_izquierdo_vortice","subjetivo_izquierdo_mm","subjetivo_izquierdo_estatica","subjetivo_izquierdo_dinamica","otra_refraccion","radio_k_1","radio_k_2","otra_refraccion_derecho_esfera","otra_refraccion_derecho_cilindro","otra_refraccion_derecho_eje","otra_refraccion_derecho_sombras","otra_refraccion_izquierdo_esfera","otra_refraccion_izquierdo_cilindro","otra_refraccion_izquierdo_eje","otra_refraccion_izquierdo_sombras","subjetivo_normal","subjetivo_cycloplejia","subjetivo_otra","subjetivo_distancia_al","examen_oftalmologico","pupila_derecho","pupila_izquierdo","parpados_derecho","parpados_izquierdo","pelicula_lagrimal_derecho","pelicula_lagrimal_izquierdo","conjuntiva_derecho","conjuntiva_izquierdo","cornea_derecho","cornea_izquierdo","cristalino_derecho","cristalino_izquierdo","camara_anterior_derecho","camara_anterior_izquierdo","iris_derecho","iris_izquierdo","bruckner","derecho_excavacion","derecho_descripcion","izquierdo_excavacion","izquierdo_descripcion","formula_final","derecho_esfera","derecho_cilindro","derecho_eje","derecho_av_lejos","derecho_add","derecho_av_cerca","derecho_dnp","derecho_recomendacion","izquierdo_esfera","izquierdo_cilindro","izquierdo_eje","izquierdo_av_lejos","izquierdo_add","izquierdo_av_cerca","izquierdo_dnp","izquierdo_recomendacion","diagnosticos","forEach","diag","index","num","codigo","descripcion","ojo","principal","valid","token","localStorage","getItem","user","syncVersionesFromSVG","value","organizedData","organizeDataBySections","historiaData","paciente_id","updateHistoriaClinicaOrganizada","showSuccess","createHistoriaClinicaOrganizada","keratometria_derecho_esfera","examen_refractivo_keratometria_derecho_esfera","keratometria_derecho_cilindro","examen_refractivo_keratometria_derecho_cilindro","keratometria_derecho_sombras","examen_refractivo_keratometria_derecho_sombras","keratometria_derecho_av_lejos","examen_refractivo_keratometria_derecho_av_lejos","keratometria_derecho_add","examen_refractivo_keratometria_derecho_add","keratometria_derecho_av_cerca","examen_refractivo_keratometria_derecho_av_cerca","keratometria_derecho_dnp","examen_refractivo_keratometria_derecho_dnp","keratometria_derecho_vortice","examen_refractivo_keratometria_derecho_vortice","keratometria_derecho_mm","examen_refractivo_keratometria_derecho_mm","keratometria_derecho_estatica","examen_refractivo_keratometria_derecho_estatica","keratometria_derecho_dinamica","examen_refractivo_keratometria_derecho_dinamica","keratometria_derecho_normal","examen_refractivo_keratometria_derecho_normal","keratometria_derecho_cycloplejia","examen_refractivo_keratometria_derecho_cycloplejia","keratometria_derecho_otra","examen_refractivo_keratometria_derecho_otra","keratometria_derecho_distancia_al","examen_refractivo_keratometria_derecho_distancia_al","keratometria_derecho_radio_k_1","examen_refractivo_keratometria_derecho_radio_k_1","keratometria_derecho_radio_k_2","examen_refractivo_keratometria_derecho_radio_k_2","keratometria_derecho_otra_refraccion","examen_refractivo_keratometria_derecho_otra_refraccion","keratometria_izquierdo_esfera","examen_refractivo_keratometria_izquierdo_esfera","keratometria_izquierdo_cilindro","examen_refractivo_keratometria_izquierdo_cilindro","keratometria_izquierdo_sombras","examen_refractivo_keratometria_izquierdo_sombras","keratometria_izquierdo_av_lejos","examen_refractivo_keratometria_izquierdo_av_lejos","keratometria_izquierdo_add","examen_refractivo_keratometria_izquierdo_add","keratometria_izquierdo_av_cerca","examen_refractivo_keratometria_izquierdo_av_cerca","keratometria_izquierdo_dnp","examen_refractivo_keratometria_izquierdo_dnp","keratometria_izquierdo_vortice","examen_refractivo_keratometria_izquierdo_vortice","keratometria_izquierdo_mm","examen_refractivo_keratometria_izquierdo_mm","keratometria_izquierdo_estatica","examen_refractivo_keratometria_izquierdo_estatica","keratometria_izquierdo_dinamica","examen_refractivo_keratometria_izquierdo_dinamica","keratometria_izquierdo_normal","examen_refractivo_keratometria_izquierdo_normal","keratometria_izquierdo_cycloplejia","examen_refractivo_keratometria_izquierdo_cycloplejia","keratometria_izquierdo_otra","examen_refractivo_keratometria_izquierdo_otra","keratometria_izquierdo_distancia_al","examen_refractivo_keratometria_izquierdo_distancia_al","keratometria_izquierdo_radio_k_1","examen_refractivo_keratometria_izquierdo_radio_k_1","keratometria_izquierdo_radio_k_2","examen_refractivo_keratometria_izquierdo_radio_k_2","keratometria_izquierdo_otra_refraccion","examen_refractivo_keratometria_izquierdo_otra_refraccion","retinoscopia_estatica_derecho_plano","examen_refractivo_retinoscopia_estatica_derecho_plano","retinoscopia_estatica_derecho_curvo","examen_refractivo_retinoscopia_estatica_derecho_curvo","retinoscopia_estatica_derecho_miras","examen_refractivo_retinoscopia_estatica_derecho_miras","retinoscopia_estatica_derecho_corn","examen_refractivo_retinoscopia_estatica_derecho_corn","retinoscopia_estatica_derecho_av_lejos","examen_refractivo_retinoscopia_estatica_derecho_av_lejos","retinoscopia_estatica_derecho_add","examen_refractivo_retinoscopia_estatica_derecho_add","retinoscopia_estatica_derecho_av_cerca","examen_refractivo_retinoscopia_estatica_derecho_av_cerca","retinoscopia_estatica_derecho_dnp","examen_refractivo_retinoscopia_estatica_derecho_dnp","retinoscopia_estatica_derecho_vortice","examen_refractivo_retinoscopia_estatica_derecho_vortice","retinoscopia_estatica_derecho_mm","examen_refractivo_retinoscopia_estatica_derecho_mm","retinoscopia_estatica_derecho_estatica","examen_refractivo_retinoscopia_estatica_derecho_estatica","retinoscopia_estatica_derecho_dinamica","examen_refractivo_retinoscopia_estatica_derecho_dinamica","retinoscopia_estatica_derecho_normal","examen_refractivo_retinoscopia_estatica_derecho_normal","retinoscopia_estatica_derecho_cycloplejia","examen_refractivo_retinoscopia_estatica_derecho_cycloplejia","retinoscopia_estatica_derecho_otra","examen_refractivo_retinoscopia_estatica_derecho_otra","retinoscopia_estatica_derecho_distancia_al","examen_refractivo_retinoscopia_estatica_derecho_distancia_al","retinoscopia_estatica_derecho_radio_k_1","examen_refractivo_retinoscopia_estatica_derecho_radio_k_1","retinoscopia_estatica_derecho_radio_k_2","examen_refractivo_retinoscopia_estatica_derecho_radio_k_2","retinoscopia_estatica_derecho_otra_refraccion","examen_refractivo_retinoscopia_estatica_derecho_otra_refraccion","retinoscopia_estatica_izquierdo_plano","examen_refractivo_retinoscopia_estatica_izquierdo_plano","retinoscopia_estatica_izquierdo_curvo","examen_refractivo_retinoscopia_estatica_izquierdo_curvo","retinoscopia_estatica_izquierdo_miras","examen_refractivo_retinoscopia_estatica_izquierdo_miras","retinoscopia_estatica_izquierdo_corn","examen_refractivo_retinoscopia_estatica_izquierdo_corn","retinoscopia_estatica_izquierdo_av_lejos","examen_refractivo_retinoscopia_estatica_izquierdo_av_lejos","retinoscopia_estatica_izquierdo_add","examen_refractivo_retinoscopia_estatica_izquierdo_add","retinoscopia_estatica_izquierdo_av_cerca","examen_refractivo_retinoscopia_estatica_izquierdo_av_cerca","retinoscopia_estatica_izquierdo_dnp","examen_refractivo_retinoscopia_estatica_izquierdo_dnp","retinoscopia_estatica_izquierdo_vortice","examen_refractivo_retinoscopia_estatica_izquierdo_vortice","retinoscopia_estatica_izquierdo_mm","examen_refractivo_retinoscopia_estatica_izquierdo_mm","retinoscopia_estatica_izquierdo_estatica","examen_refractivo_retinoscopia_estatica_izquierdo_estatica","retinoscopia_estatica_izquierdo_dinamica","examen_refractivo_retinoscopia_estatica_izquierdo_dinamica","retinoscopia_estatica_izquierdo_normal","examen_refractivo_retinoscopia_estatica_izquierdo_normal","retinoscopia_estatica_izquierdo_cycloplejia","examen_refractivo_retinoscopia_estatica_izquierdo_cycloplejia","retinoscopia_estatica_izquierdo_otra","examen_refractivo_retinoscopia_estatica_izquierdo_otra","retinoscopia_estatica_izquierdo_distancia_al","examen_refractivo_retinoscopia_estatica_izquierdo_distancia_al","retinoscopia_estatica_izquierdo_radio_k_1","examen_refractivo_retinoscopia_estatica_izquierdo_radio_k_1","retinoscopia_estatica_izquierdo_radio_k_2","examen_refractivo_retinoscopia_estatica_izquierdo_radio_k_2","retinoscopia_estatica_izquierdo_otra_refraccion","examen_refractivo_retinoscopia_estatica_izquierdo_otra_refraccion","retinoscopia_dinamica_derecho_plano","examen_refractivo_retinoscopia_dinamica_derecho_plano","retinoscopia_dinamica_derecho_curvo","examen_refractivo_retinoscopia_dinamica_derecho_curvo","retinoscopia_dinamica_derecho_miras","examen_refractivo_retinoscopia_dinamica_derecho_miras","retinoscopia_dinamica_derecho_corn","examen_refractivo_retinoscopia_dinamica_derecho_corn","retinoscopia_dinamica_derecho_av_lejos","examen_refractivo_retinoscopia_dinamica_derecho_av_lejos","retinoscopia_dinamica_derecho_add","examen_refractivo_retinoscopia_dinamica_derecho_add","retinoscopia_dinamica_derecho_av_cerca","examen_refractivo_retinoscopia_dinamica_derecho_av_cerca","retinoscopia_dinamica_derecho_dnp","examen_refractivo_retinoscopia_dinamica_derecho_dnp","retinoscopia_dinamica_derecho_vortice","examen_refractivo_retinoscopia_dinamica_derecho_vortice","retinoscopia_dinamica_derecho_mm","examen_refractivo_retinoscopia_dinamica_derecho_mm","retinoscopia_dinamica_derecho_estatica","examen_refractivo_retinoscopia_dinamica_derecho_estatica","retinoscopia_dinamica_derecho_dinamica","examen_refractivo_retinoscopia_dinamica_derecho_dinamica","retinoscopia_dinamica_derecho_normal","examen_refractivo_retinoscopia_dinamica_derecho_normal","retinoscopia_dinamica_derecho_cycloplejia","examen_refractivo_retinoscopia_dinamica_derecho_cycloplejia","retinoscopia_dinamica_derecho_otra","examen_refractivo_retinoscopia_dinamica_derecho_otra","retinoscopia_dinamica_derecho_distancia_al","examen_refractivo_retinoscopia_dinamica_derecho_distancia_al","retinoscopia_dinamica_derecho_radio_k_1","examen_refractivo_retinoscopia_dinamica_derecho_radio_k_1","retinoscopia_dinamica_derecho_radio_k_2","examen_refractivo_retinoscopia_dinamica_derecho_radio_k_2","retinoscopia_dinamica_derecho_otra_refraccion","examen_refractivo_retinoscopia_dinamica_derecho_otra_refraccion","retinoscopia_dinamica_izquierdo_plano","examen_refractivo_retinoscopia_dinamica_izquierdo_plano","retinoscopia_dinamica_izquierdo_curvo","examen_refractivo_retinoscopia_dinamica_izquierdo_curvo","retinoscopia_dinamica_izquierdo_miras","examen_refractivo_retinoscopia_dinamica_izquierdo_miras","retinoscopia_dinamica_izquierdo_corn","examen_refractivo_retinoscopia_dinamica_izquierdo_corn","retinoscopia_dinamica_izquierdo_av_lejos","examen_refractivo_retinoscopia_dinamica_izquierdo_av_lejos","retinoscopia_dinamica_izquierdo_add","examen_refractivo_retinoscopia_dinamica_izquierdo_add","retinoscopia_dinamica_izquierdo_av_cerca","examen_refractivo_retinoscopia_dinamica_izquierdo_av_cerca","retinoscopia_dinamica_izquierdo_dnp","examen_refractivo_retinoscopia_dinamica_izquierdo_dnp","retinoscopia_dinamica_izquierdo_vortice","examen_refractivo_retinoscopia_dinamica_izquierdo_vortice","retinoscopia_dinamica_izquierdo_mm","examen_refractivo_retinoscopia_dinamica_izquierdo_mm","retinoscopia_dinamica_izquierdo_estatica","examen_refractivo_retinoscopia_dinamica_izquierdo_estatica","retinoscopia_dinamica_izquierdo_dinamica","examen_refractivo_retinoscopia_dinamica_izquierdo_dinamica","retinoscopia_dinamica_izquierdo_normal","examen_refractivo_retinoscopia_dinamica_izquierdo_normal","retinoscopia_dinamica_izquierdo_cycloplejia","examen_refractivo_retinoscopia_dinamica_izquierdo_cycloplejia","retinoscopia_dinamica_izquierdo_otra","examen_refractivo_retinoscopia_dinamica_izquierdo_otra","retinoscopia_dinamica_izquierdo_distancia_al","examen_refractivo_retinoscopia_dinamica_izquierdo_distancia_al","retinoscopia_dinamica_izquierdo_radio_k_1","examen_refractivo_retinoscopia_dinamica_izquierdo_radio_k_1","retinoscopia_dinamica_izquierdo_radio_k_2","examen_refractivo_retinoscopia_dinamica_izquierdo_radio_k_2","retinoscopia_dinamica_izquierdo_otra_refraccion","examen_refractivo_retinoscopia_dinamica_izquierdo_otra_refraccion","subjetivo_derecho_plano","examen_refractivo_subjetivo_derecho_plano","subjetivo_derecho_curvo","examen_refractivo_subjetivo_derecho_curvo","subjetivo_derecho_miras","examen_refractivo_subjetivo_derecho_miras","subjetivo_derecho_corn","examen_refractivo_subjetivo_derecho_corn","subjetivo_derecho_sombras","examen_refractivo_subjetivo_derecho_sombras","subjetivo_derecho_normal","examen_refractivo_subjetivo_derecho_normal","subjetivo_derecho_cycloplejia","examen_refractivo_subjetivo_derecho_cycloplejia","subjetivo_derecho_otra","examen_refractivo_subjetivo_derecho_otra","subjetivo_derecho_distancia_al","examen_refractivo_subjetivo_derecho_distancia_al","subjetivo_derecho_radio_k_1","examen_refractivo_subjetivo_derecho_radio_k_1","subjetivo_derecho_radio_k_2","examen_refractivo_subjetivo_derecho_radio_k_2","subjetivo_derecho_otra_refraccion","examen_refractivo_subjetivo_derecho_otra_refraccion","subjetivo_izquierdo_plano","examen_refractivo_subjetivo_izquierdo_plano","subjetivo_izquierdo_curvo","examen_refractivo_subjetivo_izquierdo_curvo","subjetivo_izquierdo_miras","examen_refractivo_subjetivo_izquierdo_miras","subjetivo_izquierdo_corn","examen_refractivo_subjetivo_izquierdo_corn","subjetivo_izquierdo_sombras","examen_refractivo_subjetivo_izquierdo_sombras","subjetivo_izquierdo_normal","examen_refractivo_subjetivo_izquierdo_normal","subjetivo_izquierdo_cycloplejia","examen_refractivo_subjetivo_izquierdo_cycloplejia","subjetivo_izquierdo_otra","examen_refractivo_subjetivo_izquierdo_otra","subjetivo_izquierdo_distancia_al","examen_refractivo_subjetivo_izquierdo_distancia_al","subjetivo_izquierdo_radio_k_1","examen_refractivo_subjetivo_izquierdo_radio_k_1","subjetivo_izquierdo_radio_k_2","examen_refractivo_subjetivo_izquierdo_radio_k_2","subjetivo_izquierdo_otra_refraccion","examen_refractivo_subjetivo_izquierdo_otra_refraccion","filter","d","reset","seccion","filaKey","volverAPacientes","navigate","getDiagnosticoArray","get","addDiagnostico","diagnosticoGroup","push","removeDiagnostico","removeAt","diagnosticoArray","clear","i","event","input","target","pattern","test","classList","add","remove","numValue","parseFloat","formattedValue","toFixed","controlName","getAttribute","setValue","tieneSignoNegativo","startsWith","Math","abs","parseInt","position","svg","closest","querySelectorAll","el","createTemporaryInput","key","preventDefault","clickEvent","MouseEvent","bubbles","cancelable","view","window","dispatchEvent","textElement","rect","getBoundingClientRect","svgRect","document","createElement","type","textContent","className","style","cssText","left","top","container","parentElement","appendChild","focus","select","addEventListener","saveVersionesValue","e","cancelVersionesEdit","validValues","includes","positionFormatted","svgs","svgIndex","textElements","valueChanges","calculateKeratometriaDerecho","calculateKeratometriaIzquierdo","syncFieldsForEye","eye","fieldMappings","from","to","mapping","sourceControl","targetControl","emitEvent","fechaConsultaControl","fechaControlControl","ahora","ao","String","padStart","dia","partes","split","nuevoAo","mesFormateado","diaFormateado","fieldName","control","char","currentValue","ctrlKey","metaKey","altKey","plano","curvo","corn","cornFormatted","calcular_vortice_1","esfera","distancia","base","isFinite","sign","multiple","mround","round","calcFormula","cilindro","dist","val1Raw","val1","val2Raw","val2","diffAbs","signCheck","numberToRound","rounded","recalcularVortices","esferaDerechaStr","esferaIzquierdaStr","distanciaStr","resultado","resultadoFormateado","recalcularMM","cilindroDerechoStr","cilindroIzquierdoStr","keyboardEvent","tagName","handleTabNavigation","currentElement","campoActual","indiceActual","indexOf","formElement","siguienteIndice","shiftKey","siguienteCampo","encontrarSiguienteCampoValido","siguienteElemento","querySelector","getElementById","HTMLInputElement","HTMLTextAreaElement","HTMLSelectElement","SVGTextElement","HTMLButtonElement","indice","retroceder","campo","esSeccionAbierta","esCampoVisible","elemento","estilo","getComputedStyle","visible","display","visibility","enDOM","offsetParent","url","apiUrl","link","href","download","body","click","removeChild","find","h","directiveInject","i1","FormBuilder","i2","ActivatedRoute","Router","i3","HistoriasClinicasService","i4","PacientesService","i5","ToastService","i6","AuthService","selectors","standalone","features","StandaloneFeature","decls","vars","consts","template","HistoriasClinicasComponent_Template","rf","ctx","HistoriasClinicasComponent_Conditional_7_Template","HistoriasClinicasComponent_Template_button_click_9_listener","HistoriasClinicasComponent_Template_button_click_12_listener","HistoriasClinicasComponent_Conditional_15_Template","HistoriasClinicasComponent_Conditional_16_Template","i7","NgClass","DatePipe","NgNoValidate","DefaultValueAccessor","NumberValueAccessor","NgControlStatus","NgControlStatusGroup","PatternValidator","FormGroupDirective","FormControlName","styles","maxAxisValue","zeroToMax","isInternalUpdate","isPermittedKey","isNumericKey","nextValue","getNextValue","isValueInRange","onInput","nativeElement","digitsOnly","updateInputValue","numericValue","min","toString","onPaste","pastedData","clipboardData","getData","combinedValue","slice","dispatchInputEvent","onBlur","allowedKeys","toLowerCase","addedDigit","selectionStart","selectionEnd","substring","Event","ElementRef","hostBindings","AxisInputDirective_HostBindings","AxisInputDirective_keydown_HostBindingHandler","AxisInputDirective_input_HostBindingHandler","AxisInputDirective_paste_HostBindingHandler","AxisInputDirective_blur_HostBindingHandler","NG_VALUE_ACCESSOR","appPrefixInput","onChange","onTouched","cursorPosition","setSelectionRange","onClick","onFocus","writeValue","registerOnChange","fn","registerOnTouched","setDisabledState","isDisabled","disabled","PrefixInputDirective_HostBindings","PrefixInputDirective_input_HostBindingHandler","PrefixInputDirective_keydown_HostBindingHandler","PrefixInputDirective_click_HostBindingHandler","PrefixInputDirective_focus_HostBindingHandler","PrefixInputDirective_blur_HostBindingHandler","provide","useExisting","multi","http","getHistoriaClinicaById","createHistoriaClinica","post","updateHistoriaClinica","put","deleteHistoriaClinica","delete","inject","HttpClient","factory","fac","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}