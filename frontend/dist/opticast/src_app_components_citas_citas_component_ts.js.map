{"version":3,"file":"src_app_components_citas_citas_component_ts.js","mappings":"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","sources":["./src/app/components/citas/citas.component.ts","./src/app/services/citas.service.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { CitasService } from '../../services/citas.service';\nimport { PacientesService } from '../../services/pacientes.service';\nimport { ToastService } from '../../services/toast.service';\nimport { Cita, CitaCreateRequest, CitaUpdateRequest } from '../../models/cita.model';\nimport { Paciente } from '../../models/paciente.model';\nimport { environment } from '../../../environments/environment';\nimport { ConfirmationModalComponent } from '../shared/confirmation-modal/confirmation-modal.component';\n\n@Component({\n  selector: 'app-citas',\n  standalone: true,\n  imports: [CommonModule, ReactiveFormsModule, ConfirmationModalComponent],\n  template: `\n    <div class=\"container-fluid\">\n      <div class=\"row mb-4\">\n        <div class=\"col-12\">\n          <div class=\"d-flex justify-content-between align-items-center\">\n            <h2>Gestión de Citas</h2>\n            <button class=\"btn btn-primary\" (click)=\"showCreateForm()\" style=\"display: none;\">\n              <i class=\"fas fa-plus\"></i> Nueva Cita\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <!-- Date Navigation -->\n      <div class=\"row mb-4\">\n        <div class=\"col-12\">\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <div class=\"d-flex justify-content-between align-items-center\">\n                <button class=\"btn btn-outline-secondary\" (click)=\"previousWeek()\">\n                  <i class=\"fas fa-chevron-left\"></i> Semana Anterior\n                </button>\n                <h5 class=\"mb-0\">\n                  {{ getWeekRange() }}\n                </h5>\n                <button class=\"btn btn-outline-secondary\" (click)=\"nextWeek()\">\n                  Siguiente Semana <i class=\"fas fa-chevron-right\"></i>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Weekly Calendar -->\n      <div class=\"row\">\n        <div class=\"col-12\">\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <div class=\"table-responsive\">\n                <table class=\"table table-bordered\">\n                  <thead>\n                    <tr>\n                      <th class=\"text-center\" style=\"width: 120px;\">Hora</th>\n                      <th *ngFor=\"let day of weekDays\" class=\"text-center\">\n                        {{ day.dayName }} {{ day.date | date:'dd/MM' }}\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr *ngFor=\"let timeSlot of timeSlots\">\n                      <td class=\"text-center fw-bold\">{{ timeSlot }}</td>\n                      <td *ngFor=\"let day of weekDays\" \n                          [class.table-success]=\"hasAppointment(day.date, timeSlot)\"\n                          [class.table-warning]=\"isTimeSlotPast(day.date, timeSlot)\"\n                          class=\"position-relative\"\n                          style=\"height: 80px; vertical-align: middle;\">\n                        \n                        <div *ngIf=\"hasAppointment(day.date, timeSlot)\" \n                             class=\"appointment-info text-center\">\n                          <div class=\"fw-bold\">{{ getAppointmentPatient(day.date, timeSlot) }}</div>\n                          <div class=\"small text-muted\">{{ getAppointmentNotes(day.date, timeSlot) }}</div>\n                          <div class=\"mt-1\" *ngIf=\"!isTimeSlotPast(day.date, timeSlot)\">\n                            <button class=\"btn btn-sm btn-outline-primary me-1\" \n                                    (click)=\"editCita(getAppointment(day.date, timeSlot)!)\">\n                              <i class=\"fas fa-edit\"></i>\n                            </button>\n                            <button class=\"btn btn-sm btn-outline-danger\" \n                                    (click)=\"openDeleteModal(getAppointment(day.date, timeSlot)!)\">\n                              <i class=\"fas fa-trash\"></i>\n                            </button>\n                          </div>\n                          <div class=\"mt-1\" *ngIf=\"isTimeSlotPast(day.date, timeSlot)\">\n                            <small class=\"text-muted\">\n                              <i class=\"fas fa-lock me-1\"></i>\n                              No editable\n                            </small>\n                          </div>\n                        </div>\n                        \n                        <div *ngIf=\"!hasAppointment(day.date, timeSlot) && !isTimeSlotPast(day.date, timeSlot)\" \n                             class=\"text-center text-muted\">\n                          <i class=\"fas fa-plus-circle fa-2x mb-2\"></i>\n                          <br>\n                          <button class=\"btn btn-sm btn-outline-success\" \n                                  (click)=\"quickCreateCita(day.date, timeSlot)\">\n                            Agregar\n                          </button>\n                        </div>\n                        \n                        <div *ngIf=\"!hasAppointment(day.date, timeSlot) && isTimeSlotPast(day.date, timeSlot)\" \n                             class=\"text-center text-muted\">\n                          <i class=\"fas fa-clock fa-2x\"></i>\n                          <br>\n                          <small>Pasado</small>\n                        </div>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Create/Edit Appointment Modal -->\n    <div class=\"modal fade\" id=\"citaModal\" tabindex=\"-1\">\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\">{{ isEditing ? 'Editar' : 'Nueva' }} Cita</h5>\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n          </div>\n          <div class=\"modal-body\">\n            <form [formGroup]=\"citaForm\" (ngSubmit)=\"saveCita()\">\n              <div class=\"row\">\n                <div class=\"col-md-6\">\n                  <label class=\"form-label\">Nombre del Paciente *</label>\n                  <input type=\"text\" class=\"form-control\" formControlName=\"nombre_paciente\"\n                         placeholder=\"Escriba el nombre completo del paciente\"\n                         [class.is-invalid]=\"citaForm.get('nombre_paciente')?.invalid && citaForm.get('nombre_paciente')?.touched\">\n                  <div class=\"invalid-feedback\" *ngIf=\"citaForm.get('nombre_paciente')?.invalid && citaForm.get('nombre_paciente')?.touched\">\n                    Nombre del paciente es requerido\n                  </div>\n                </div>\n                <div class=\"col-md-6\">\n                  <label class=\"form-label\">Fecha *</label>\n                  <input type=\"date\" class=\"form-control\" formControlName=\"fecha\"\n                         [class.is-invalid]=\"citaForm.get('fecha')?.invalid && citaForm.get('fecha')?.touched\">\n                  <div class=\"invalid-feedback\" *ngIf=\"citaForm.get('fecha')?.invalid && citaForm.get('fecha')?.touched\">\n                    Fecha es requerida\n                  </div>\n                </div>\n              </div>\n              \n              <div class=\"row mt-3\">\n                <div class=\"col-md-6\">\n                  <label class=\"form-label\">Hora *</label>\n                  <input type=\"text\" class=\"form-control\" formControlName=\"hora\" readonly\n                         [class.is-invalid]=\"citaForm.get('hora')?.invalid && citaForm.get('hora')?.touched\">\n                  <div class=\"invalid-feedback\" *ngIf=\"citaForm.get('hora')?.invalid && citaForm.get('hora')?.touched\">\n                    Hora es requerida\n                  </div>\n                </div>\n                <div class=\"col-md-6\">\n                  <div class=\"form-label\">Duración</div>\n                  <div class=\"form-control-plaintext\">30 minutos (fijo)</div>\n                </div>\n              </div>\n            </form>\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancelar</button>\n            <button type=\"button\" class=\"btn btn-primary\" (click)=\"saveCita()\" [disabled]=\"citaForm.invalid\">\n              {{ isEditing ? 'Actualizar' : 'Crear' }}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Modal de confirmación para eliminar cita -->\n    <app-confirmation-modal\n      [isVisible]=\"showDeleteModal\"\n      title=\"Eliminar Cita\"\n      [message]=\"'¿Está seguro que desea eliminar la cita de ' + (selectedCitaForDelete?.nombre_paciente || '') + '?'\"\n      warningMessage=\"Esta acción no se puede deshacer.\"\n      confirmText=\"Eliminar\"\n      cancelText=\"Cancelar\"\n      confirmButtonClass=\"btn-danger\"\n      [isLoading]=\"isDeleting\"\n      (confirm)=\"confirmDelete()\"\n      (cancel)=\"closeDeleteModal()\">\n    </app-confirmation-modal>\n  `,\n  styles: [`\n    .table th {\n      background-color: #f8f9fa;\n      border-top: none;\n    }\n    \n    .appointment-info {\n      padding: 5px;\n    }\n    \n    .table-success {\n      background-color: var(--clear-grey-color) !important;\n    }\n    \n    .table-warning {\n      background-color: #fff3cd !important;\n    }\n    \n    .btn-sm {\n      padding: 0.25rem 0.5rem;\n      font-size: 0.75rem;\n    }\n    \n    .fa-2x {\n      font-size: 1.5em;\n    }\n    \n    .form-control[readonly] {\n      background-color: #f8f9fa;\n      border-color: #dee2e6;\n      color: #6c757d;\n      cursor: not-allowed;\n    }\n    \n    .appointment-info .text-muted {\n      font-size: 0.75rem;\n      font-style: italic;\n    }\n    \n    .table-warning .appointment-info {\n      opacity: 0.8;\n    }\n  `]\n})\nexport class CitasComponent implements OnInit {\n  citas: Cita[] = [];\n  pacientes: Paciente[] = [];\n  citaForm: FormGroup;\n  isEditing = false;\n  editingCitaId: number | null = null;\n  currentWeekStart: Date = new Date();\n  \n  timeSlots: string[] = [];\n  weekDays: { date: Date; dayName: string }[] = [];\n\n  // Modal de confirmación\n  showDeleteModal = false;\n  selectedCitaForDelete: Cita | null = null;\n  isDeleting = false;\n\n  constructor(\n    private fb: FormBuilder,\n    private citasService: CitasService,\n    private pacientesService: PacientesService,\n    private toastService: ToastService\n  ) {\n    this.citaForm = this.fb.group({\n      nombre_paciente: ['', Validators.required],\n      fecha: ['', Validators.required],\n      hora: ['', Validators.required]\n    });\n  }\n\n  ngOnInit(): void {\n    this.generateTimeSlots();\n    this.initializeWeek();\n    this.loadCitas();\n    this.loadPacientes();\n  }\n\n  generateTimeSlots(): void {\n    this.timeSlots = [];\n    const horaInicio = environment.citas.horaInicio;\n    const horaFin = environment.citas.horaFin;\n    \n    for (let hour = horaInicio; hour < horaFin; hour++) {\n      for (let minute = 0; minute < 60; minute += 30) {\n        const timeString = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;\n        this.timeSlots.push(timeString);\n      }\n    }\n  }\n\n  initializeWeek(): void {\n    const today = new Date();\n    const dayOfWeek = today.getDay();\n    const diff = today.getDate() - dayOfWeek + (dayOfWeek === 0 ? -6 : 1);\n    \n    this.currentWeekStart = new Date(today.setDate(diff));\n    this.updateWeekDays();\n  }\n\n  updateWeekDays(): void {\n    this.weekDays = [];\n    for (let i = 0; i < 7; i++) {\n      const date = new Date(this.currentWeekStart);\n      date.setDate(date.getDate() + i);\n      this.weekDays.push({\n        date: date,\n        dayName: date.toLocaleDateString('es-ES', { weekday: 'short' })\n      });\n    }\n  }\n\n  previousWeek(): void {\n    this.currentWeekStart.setDate(this.currentWeekStart.getDate() - 7);\n    this.updateWeekDays();\n    this.loadCitas();\n  }\n\n  nextWeek(): void {\n    this.currentWeekStart.setDate(this.currentWeekStart.getDate() + 7);\n    this.updateWeekDays();\n    this.loadCitas();\n  }\n\n  getWeekRange(): string {\n    const endDate = new Date(this.currentWeekStart);\n    endDate.setDate(endDate.getDate() + 6);\n    \n    return `${this.currentWeekStart.toLocaleDateString('es-ES', { day: 'numeric', month: 'long' })} - ${endDate.toLocaleDateString('es-ES', { day: 'numeric', month: 'long', year: 'numeric' })}`;\n  }\n\n  loadCitas(): void {\n    const startDate = this.formatDateForAPI(this.currentWeekStart);\n    const endDate = new Date(this.currentWeekStart);\n    endDate.setDate(endDate.getDate() + 6);\n    const endDateStr = this.formatDateForAPI(endDate);\n    \n    this.citasService.getCitasByDateRange(startDate, endDateStr).subscribe({\n      next: (response) => {\n        // Extraer el array de datos de la respuesta\n        const data = response.data || response;\n        this.citas = Array.isArray(data) ? data : [];\n      },\n      error: (error) => {\n        this.toastService.showError('Error al cargar citas');\n        console.error('Error loading citas:', error);\n        this.citas = [];\n      }\n    });\n  }\n\n  loadPacientes(): void {\n    this.pacientesService.getPacientes().subscribe({\n      next: (data) => {\n        this.pacientes = data;\n      },\n      error: (error) => {\n        console.error('Error loading pacientes:', error);\n      }\n    });\n  }\n\n  hasAppointment(date: Date, timeSlot: string): boolean {\n    if (!Array.isArray(this.citas)) {\n      return false;\n    }\n    const dateStr = this.formatDateForAPI(date);\n    return this.citas.some(cita => {\n      // Comparar fecha\n      const fechaMatch = cita.fecha === dateStr;\n      // Comparar hora (formato puede ser HH:MM:SS o HH:MM)\n      const horaMatch = cita.hora === timeSlot || cita.hora === timeSlot + ':00';\n      return fechaMatch && horaMatch;\n    });\n  }\n\n  getAppointment(date: Date, timeSlot: string): Cita | undefined {\n    if (!Array.isArray(this.citas)) {\n      return undefined;\n    }\n    const dateStr = this.formatDateForAPI(date);\n    return this.citas.find(cita => {\n      // Comparar fecha\n      const fechaMatch = cita.fecha === dateStr;\n      // Comparar hora (formato puede ser HH:MM:SS o HH:MM)\n      const horaMatch = cita.hora === timeSlot || cita.hora === timeSlot + ':00';\n      return fechaMatch && horaMatch;\n    });\n  }\n\n  getAppointmentPatient(date: Date, timeSlot: string): string {\n    const cita = this.getAppointment(date, timeSlot);\n    return cita?.nombre_paciente || '';\n  }\n\n  getAppointmentNotes(date: Date, timeSlot: string): string {\n    const cita = this.getAppointment(date, timeSlot);\n    return cita?.notas || '';\n  }\n\n  isTimeSlotPast(date: Date, timeSlot: string): boolean {\n    const now = new Date();\n    const appointmentDateTime = new Date(date);\n    const [hours, minutes] = timeSlot.split(':');\n    appointmentDateTime.setHours(parseInt(hours), parseInt(minutes), 0, 0);\n    \n    return appointmentDateTime < now;\n  }\n\n  showCreateForm(): void {\n    this.isEditing = false;\n    this.editingCitaId = null;\n    this.citaForm.reset();\n    this.citaForm.patchValue({\n      fecha: this.formatDateForAPI(new Date())\n    });\n    this.showModal();\n  }\n\n  quickCreateCita(date: Date, timeSlot: string): void {\n    this.isEditing = false;\n    this.editingCitaId = null;\n    this.citaForm.reset();\n    this.citaForm.patchValue({\n      fecha: this.formatDateForAPI(date),\n      hora: timeSlot\n    });\n    this.showModal();\n  }\n\n  editCita(cita: Cita): void {\n    this.isEditing = true;\n    this.editingCitaId = cita.id;\n    \n    // Formatear la hora de HH:MM:SS a HH:MM si es necesario\n    let horaFormateada = cita.hora;\n    if (horaFormateada && horaFormateada.includes(':')) {\n      const partesHora = horaFormateada.split(':');\n      if (partesHora.length >= 2) {\n        horaFormateada = `${partesHora[0]}:${partesHora[1]}`;\n      }\n    }\n    \n    this.citaForm.patchValue({\n      nombre_paciente: cita.nombre_paciente,\n      fecha: cita.fecha,\n      hora: horaFormateada\n    });\n    this.showModal();\n  }\n\n  saveCita(): void {\n    if (this.citaForm.invalid) return;\n\n    const formData = this.citaForm.value;\n    // Agregar duración fija de 30 minutos\n    formData.duracion = 30;\n    \n    if (this.isEditing && this.editingCitaId) {\n      const updateData: CitaUpdateRequest = {\n        ...formData,\n        id: this.editingCitaId\n      };\n      \n      this.citasService.updateCita(updateData).subscribe({\n        next: () => {\n          this.toastService.showSuccess('Cita actualizada correctamente');\n          this.hideModal();\n          this.loadCitas();\n        },\n        error: (error) => {\n          this.toastService.showError('Error al actualizar cita');\n          console.error('Error updating cita:', error);\n        }\n      });\n    } else {\n      const createData: CitaCreateRequest = formData;\n      \n      this.citasService.createCita(createData).subscribe({\n        next: () => {\n          this.toastService.showSuccess('Cita creada correctamente');\n          this.hideModal();\n          this.loadCitas();\n        },\n        error: (error) => {\n          this.toastService.showError('Error al crear cita');\n          console.error('Error creating cita:', error);\n        }\n      });\n    }\n  }\n\n  deleteCita(id: number): void {\n    const cita = this.citas.find(c => c.id === id);\n    if (cita) {\n      this.selectedCitaForDelete = cita;\n      this.showDeleteModal = true;\n    }\n  }\n\n  openDeleteModal(cita: Cita): void {\n    this.selectedCitaForDelete = cita;\n    this.showDeleteModal = true;\n  }\n\n  closeDeleteModal(): void {\n    this.showDeleteModal = false;\n    this.selectedCitaForDelete = null;\n    this.isDeleting = false;\n  }\n\n  confirmDelete(): void {\n    if (!this.selectedCitaForDelete) return;\n    \n    this.isDeleting = true;\n    this.citasService.deleteCita(this.selectedCitaForDelete.id).subscribe({\n      next: () => {\n        this.toastService.showSuccess('Cita eliminada correctamente');\n        this.loadCitas();\n        this.closeDeleteModal();\n      },\n      error: (error) => {\n        this.toastService.showError('Error al eliminar cita');\n        console.error('Error deleting cita:', error);\n        this.isDeleting = false;\n      }\n    });\n  }\n\n  private showModal(): void {\n    const modal = document.getElementById('citaModal');\n    if (modal) {\n      const bootstrapModal = new (window as any).bootstrap.Modal(modal);\n      bootstrapModal.show();\n    }\n  }\n\n  private hideModal(): void {\n    const modal = document.getElementById('citaModal');\n    if (modal) {\n      const bootstrapModal = (window as any).bootstrap.Modal.getInstance(modal);\n      if (bootstrapModal) {\n        bootstrapModal.hide();\n      }\n    }\n  }\n\n  private formatDateForAPI(date: Date): string {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  }\n}\n\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { environment } from '../../environments/environment';\nimport { Cita, CitaCreateRequest, CitaUpdateRequest } from '../models/cita.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CitasService {\n  private apiUrl = `${environment.apiUrl}/citas`;\n\n  constructor(private http: HttpClient) {}\n\n  getCitas(): Observable<Cita[]> {\n    return this.http.get<Cita[]>(this.apiUrl);\n  }\n\n  getCitasByDateRange(startDate: string, endDate: string): Observable<{success: boolean, message: string, data: Cita[]}> {\n    return this.http.get<{success: boolean, message: string, data: Cita[]}>(`${this.apiUrl}/range?start_date=${startDate}&end_date=${endDate}`);\n  }\n\n  getCitaById(id: number): Observable<Cita> {\n    return this.http.get<Cita>(`${this.apiUrl}/${id}`);\n  }\n\n  createCita(cita: CitaCreateRequest): Observable<any> {\n    return this.http.post(this.apiUrl, cita);\n  }\n\n  updateCita(cita: CitaUpdateRequest): Observable<any> {\n    return this.http.put(`${this.apiUrl}/${cita.id}`, cita);\n  }\n\n  deleteCita(id: number): Observable<any> {\n    return this.http.delete(`${this.apiUrl}/${id}`);\n  }\n\n}\n\n\n\n"],"names":["CommonModule","ReactiveFormsModule","Validators","environment","ConfirmationModalComponent","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate2","day_r1","dayName","ɵɵpipeBind2","date","ɵɵlistener","CitasComponent_tr_34_td_3_div_1_div_5_Template_button_click_1_listener","ɵɵrestoreView","_r2","day_r3","ɵɵnextContext","$implicit","timeSlot_r4","ctx_r4","ɵɵresetView","editCita","getAppointment","ɵɵelement","CitasComponent_tr_34_td_3_div_1_div_5_Template_button_click_3_listener","openDeleteModal","ɵɵtemplate","CitasComponent_tr_34_td_3_div_1_div_5_Template","CitasComponent_tr_34_td_3_div_1_div_6_Template","ɵɵtextInterpolate","getAppointmentPatient","getAppointmentNotes","ɵɵproperty","isTimeSlotPast","CitasComponent_tr_34_td_3_div_2_Template_button_click_3_listener","_r6","quickCreateCita","CitasComponent_tr_34_td_3_div_1_Template","CitasComponent_tr_34_td_3_div_2_Template","CitasComponent_tr_34_td_3_div_3_Template","ɵɵclassProp","hasAppointment","CitasComponent_tr_34_td_3_Template","weekDays","CitasComponent","constructor","fb","citasService","pacientesService","toastService","citas","pacientes","isEditing","editingCitaId","currentWeekStart","Date","timeSlots","showDeleteModal","selectedCitaForDelete","isDeleting","citaForm","group","nombre_paciente","required","fecha","hora","ngOnInit","generateTimeSlots","initializeWeek","loadCitas","loadPacientes","horaInicio","horaFin","hour","minute","timeString","toString","padStart","push","today","dayOfWeek","getDay","diff","getDate","setDate","updateWeekDays","i","toLocaleDateString","weekday","previousWeek","nextWeek","getWeekRange","endDate","day","month","year","startDate","formatDateForAPI","endDateStr","getCitasByDateRange","subscribe","next","response","data","Array","isArray","error","showError","console","getPacientes","timeSlot","dateStr","some","cita","fechaMatch","horaMatch","undefined","find","notas","now","appointmentDateTime","hours","minutes","split","setHours","parseInt","showCreateForm","reset","patchValue","showModal","id","horaFormateada","includes","partesHora","length","saveCita","invalid","formData","value","duracion","updateData","updateCita","showSuccess","hideModal","createData","createCita","deleteCita","c","closeDeleteModal","confirmDelete","modal","document","getElementById","bootstrapModal","window","bootstrap","Modal","show","getInstance","hide","getFullYear","String","getMonth","ɵɵdirectiveInject","i1","FormBuilder","i2","CitasService","i3","PacientesService","i4","ToastService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","CitasComponent_Template","rf","ctx","CitasComponent_Template_button_click_6_listener","CitasComponent_Template_button_click_14_listener","CitasComponent_Template_button_click_19_listener","CitasComponent_th_32_Template","CitasComponent_tr_34_Template","CitasComponent_Template_form_ngSubmit_43_listener","CitasComponent_div_49_Template","CitasComponent_div_54_Template","CitasComponent_div_60_Template","CitasComponent_Template_button_click_69_listener","CitasComponent_Template_app_confirmation_modal_confirm_71_listener","CitasComponent_Template_app_confirmation_modal_cancel_71_listener","ɵɵtextInterpolate1","tmp_5_0","get","touched","tmp_6_0","tmp_7_0","tmp_8_0","tmp_9_0","tmp_10_0","i5","NgForOf","NgIf","DatePipe","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","styles","http","apiUrl","getCitas","getCitaById","post","put","delete","ɵɵinject","HttpClient","factory","ɵfac","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}