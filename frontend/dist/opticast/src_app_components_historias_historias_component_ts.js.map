{"version":3,"file":"src_app_components_historias_historias_component_ts.js","mappings":"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","sources":["./src/app/components/historias/historias.component.ts","./src/app/services/historias.service.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { HistoriasService } from '../../services/historias.service';\nimport { PacientesService } from '../../services/pacientes.service';\nimport { ToastService } from '../../services/toast.service';\nimport { Historia, HistoriaCreateRequest } from '../../models/historia.model';\nimport { Paciente } from '../../models/paciente.model';\n\n@Component({\n  selector: 'app-historias',\n  standalone: true,\n  imports: [CommonModule, ReactiveFormsModule],\n  template: `\n    <div class=\"container-fluid\">\n      <div class=\"row mb-4\">\n        <div class=\"col-12\">\n          <div class=\"d-flex justify-content-between align-items-center\">\n            <h2>Historias Clínicas</h2>\n            <button class=\"btn btn-primary\" (click)=\"showCreateForm()\">\n              <i class=\"fas fa-plus\"></i> Nueva Historia\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <!-- Search Form -->\n      <div class=\"row mb-4\">\n        <div class=\"col-12\">\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <form [formGroup]=\"searchForm\" (ngSubmit)=\"searchHistorias()\">\n                <div class=\"row\">\n                  <div class=\"col-md-3\">\n                    <label class=\"form-label\">Paciente</label>\n                    <select class=\"form-select\" formControlName=\"paciente_id\">\n                      <option value=\"\">Todos los pacientes</option>\n                      <option *ngFor=\"let paciente of pacientes\" [value]=\"paciente.id\">\n                        {{ paciente.nombre }} {{ paciente.apellidos }} - {{ paciente.documento }}\n                      </option>\n                    </select>\n                  </div>\n                  <div class=\"col-md-3\">\n                    <label class=\"form-label\">Fecha Desde</label>\n                    <input type=\"date\" class=\"form-control\" formControlName=\"fecha_desde\">\n                  </div>\n                  <div class=\"col-md-3\">\n                    <label class=\"form-label\">Fecha Hasta</label>\n                    <input type=\"date\" class=\"form-control\" formControlName=\"fecha_hasta\">\n                  </div>\n                  <div class=\"col-md-3\">\n                    <label class=\"form-label\">&nbsp;</label>\n                    <div>\n                      <button type=\"submit\" class=\"btn btn-primary me-2\">\n                        <i class=\"fas fa-search\"></i> Buscar\n                      </button>\n                      <button type=\"button\" class=\"btn btn-secondary\" (click)=\"clearSearch()\">\n                        <i class=\"fas fa-times\"></i> Limpiar\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Histories Table -->\n      <div class=\"row\">\n        <div class=\"col-12\">\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <div class=\"table-responsive\">\n                <table class=\"table table-striped\">\n                  <thead>\n                    <tr>\n                      <th>Fecha</th>\n                      <th>Paciente</th>\n                      <th>Motivo Consulta</th>\n                      <th>Diagnóstico</th>\n                      <th>Próxima Cita</th>\n                      <th>Acciones</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr *ngFor=\"let historia of historias\">\n                      <td>{{ historia.fecha_consulta | date:'dd/MM/yyyy' }}</td>\n                      <td>{{ getPacienteNombre(historia.paciente_id) }}</td>\n                      <td>{{ historia.motivo_consulta | slice:0:50 }}{{ (historia.motivo_consulta || '').length > 50 ? '...' : '' }}</td>\n                      <td>{{ historia.diagnostico | slice:0:50 }}{{ (historia.diagnostico || '').length > 50 ? '...' : '' }}</td>\n                      <td>{{ historia.proxima_cita | date:'dd/MM/yyyy' }}</td>\n                      <td>\n                        <button class=\"btn btn-sm btn-outline-info me-1\" (click)=\"viewHistoria(historia)\">\n                          <i class=\"fas fa-eye\"></i>\n                        </button>\n                        <button class=\"btn btn-sm btn-outline-success\" (click)=\"downloadPDF(historia.id!)\">\n                          <i class=\"fas fa-download\"></i>\n                        </button>\n                      </td>\n                    </tr>\n                    <tr *ngIf=\"historias.length === 0\">\n                      <td colspan=\"6\" class=\"text-center text-muted\">No se encontraron historias clínicas</td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Create History Modal -->\n    <div class=\"modal fade\" id=\"historiaModal\" tabindex=\"-1\">\n      <div class=\"modal-dialog modal-xl\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\">Nueva Historia Clínica</h5>\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n          </div>\n          <div class=\"modal-body\">\n            <form [formGroup]=\"historiaForm\" (ngSubmit)=\"saveHistoria()\">\n              <!-- Patient Selection -->\n              <div class=\"row mb-3\">\n                <div class=\"col-md-6\">\n                  <label class=\"form-label\">Paciente *</label>\n                  <select class=\"form-select\" formControlName=\"paciente_id\"\n                          [class.is-invalid]=\"historiaForm.get('paciente_id')?.invalid && historiaForm.get('paciente_id')?.touched\">\n                    <option value=\"\">Seleccionar paciente</option>\n                    <option *ngFor=\"let paciente of pacientes\" [value]=\"paciente.id\">\n                      {{ paciente.nombre }} {{ paciente.apellidos }} - {{ paciente.documento }}\n                    </option>\n                  </select>\n                  <div class=\"invalid-feedback\" *ngIf=\"historiaForm.get('paciente_id')?.invalid && historiaForm.get('paciente_id')?.touched\">\n                    Paciente es requerido\n                  </div>\n                </div>\n                <div class=\"col-md-6\">\n                  <label class=\"form-label\">Fecha de Consulta *</label>\n                  <input type=\"date\" class=\"form-control\" formControlName=\"fecha_consulta\"\n                         [class.is-invalid]=\"historiaForm.get('fecha_consulta')?.invalid && historiaForm.get('fecha_consulta')?.touched\">\n                  <div class=\"invalid-feedback\" *ngIf=\"historiaForm.get('fecha_consulta')?.invalid && historiaForm.get('fecha_consulta')?.touched\">\n                    Fecha de consulta es requerida\n                  </div>\n                </div>\n              </div>\n\n              <!-- Accordion for History Sections -->\n              <div class=\"accordion\" id=\"historiaAccordion\">\n                <!-- Cuestionario Section -->\n                <div class=\"accordion-item\">\n                  <h2 class=\"accordion-header\">\n                    <button class=\"accordion-button\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#cuestionarioCollapse\">\n                      Cuestionario\n                    </button>\n                  </h2>\n                  <div id=\"cuestionarioCollapse\" class=\"accordion-collapse collapse show\" data-bs-parent=\"#historiaAccordion\">\n                    <div class=\"accordion-body\">\n                      <div class=\"row\">\n                        <div class=\"col-12\">\n                          <label class=\"form-label\">Motivo de Consulta</label>\n                          <textarea class=\"form-control\" formControlName=\"motivo_consulta\" rows=\"3\" \n                                    placeholder=\"Describa el motivo de la consulta\"></textarea>\n                        </div>\n                      </div>\n                      <div class=\"row mt-3\">\n                        <div class=\"col-md-6\">\n                          <label class=\"form-label\">Síntomas</label>\n                          <textarea class=\"form-control\" formControlName=\"sintomas\" rows=\"3\" \n                                    placeholder=\"Describa los síntomas\"></textarea>\n                        </div>\n                        <div class=\"col-md-6\">\n                          <label class=\"form-label\">Antecedentes</label>\n                          <textarea class=\"form-control\" formControlName=\"antecedentes\" rows=\"3\" \n                                    placeholder=\"Antecedentes médicos relevantes\"></textarea>\n                        </div>\n                      </div>\n                      <div class=\"row mt-3\">\n                        <div class=\"col-md-6\">\n                          <label class=\"form-label\">Medicamentos</label>\n                          <textarea class=\"form-control\" formControlName=\"medicamentos\" rows=\"2\" \n                                    placeholder=\"Medicamentos que toma actualmente\"></textarea>\n                        </div>\n                        <div class=\"col-md-6\">\n                          <label class=\"form-label\">Alergias</label>\n                          <textarea class=\"form-control\" formControlName=\"alergias\" rows=\"2\" \n                                    placeholder=\"Alergias conocidas\"></textarea>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <!-- Agudeza Visual Section -->\n                <div class=\"accordion-item\">\n                  <h2 class=\"accordion-header\">\n                    <button class=\"accordion-button collapsed\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#agudezaCollapse\">\n                      Agudeza Visual\n                    </button>\n                  </h2>\n                  <div id=\"agudezaCollapse\" class=\"accordion-collapse collapse\" data-bs-parent=\"#historiaAccordion\">\n                    <div class=\"accordion-body\">\n                      <div class=\"row\">\n                        <div class=\"col-md-6\">\n                          <h6>Ojo Derecho (OD)</h6>\n                          <div class=\"row\">\n                            <div class=\"col-md-6\">\n                              <label class=\"form-label\">Lejos</label>\n                              <input type=\"number\" class=\"form-control\" formControlName=\"av_od_lejos\" \n                                     step=\"0.01\" min=\"0\" max=\"2\" placeholder=\"0.00 - 2.00\">\n                            </div>\n                            <div class=\"col-md-6\">\n                              <label class=\"form-label\">Cerca</label>\n                              <input type=\"number\" class=\"form-control\" formControlName=\"av_od_cerca\" \n                                     step=\"0.01\" min=\"0\" max=\"2\" placeholder=\"0.00 - 2.00\">\n                            </div>\n                          </div>\n                        </div>\n                        <div class=\"col-md-6\">\n                          <h6>Ojo Izquierdo (OI)</h6>\n                          <div class=\"row\">\n                            <div class=\"col-md-6\">\n                              <label class=\"form-label\">Lejos</label>\n                              <input type=\"number\" class=\"form-control\" formControlName=\"av_oi_lejos\" \n                                     step=\"0.01\" min=\"0\" max=\"2\" placeholder=\"0.00 - 2.00\">\n                            </div>\n                            <div class=\"col-md-6\">\n                              <label class=\"form-label\">Cerca</label>\n                              <input type=\"number\" class=\"form-control\" formControlName=\"av_oi_cerca\" \n                                     step=\"0.01\" min=\"0\" max=\"2\" placeholder=\"0.00 - 2.00\">\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <!-- Examen Refractivo Section -->\n                <div class=\"accordion-item\">\n                  <h2 class=\"accordion-header\">\n                    <button class=\"accordion-button collapsed\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#refractivoCollapse\">\n                      Examen Refractivo\n                    </button>\n                  </h2>\n                  <div id=\"refractivoCollapse\" class=\"accordion-collapse collapse\" data-bs-parent=\"#historiaAccordion\">\n                    <div class=\"accordion-body\">\n                      <div class=\"row\">\n                        <div class=\"col-md-6\">\n                          <h6>Ojo Derecho (OD)</h6>\n                          <div class=\"row\">\n                            <div class=\"col-md-4\">\n                              <label class=\"form-label\">Esfera</label>\n                              <input type=\"number\" class=\"form-control\" formControlName=\"esfera_od\" \n                                     step=\"0.25\" placeholder=\"±0.00\">\n                            </div>\n                            <div class=\"col-md-4\">\n                              <label class=\"form-label\">Cilindro</label>\n                              <input type=\"number\" class=\"form-control\" formControlName=\"cilindro_od\" \n                                     step=\"0.25\" placeholder=\"±0.00\">\n                            </div>\n                            <div class=\"col-md-4\">\n                              <label class=\"form-label\">Eje</label>\n                              <input type=\"number\" class=\"form-control\" formControlName=\"eje_od\" \n                                     min=\"0\" max=\"180\" placeholder=\"0-180\">\n                            </div>\n                          </div>\n                        </div>\n                        <div class=\"col-md-6\">\n                          <h6>Ojo Izquierdo (OI)</h6>\n                          <div class=\"row\">\n                            <div class=\"col-md-4\">\n                              <label class=\"form-label\">Esfera</label>\n                              <input type=\"number\" class=\"form-control\" formControlName=\"esfera_oi\" \n                                     step=\"0.25\" placeholder=\"±0.00\">\n                            </div>\n                            <div class=\"col-md-4\">\n                              <label class=\"form-label\">Cilindro</label>\n                              <input type=\"number\" class=\"form-control\" formControlName=\"cilindro_oi\" \n                                     step=\"0.25\" placeholder=\"±0.00\">\n                            </div>\n                            <div class=\"col-md-4\">\n                              <label class=\"form-label\">Eje</label>\n                              <input type=\"number\" class=\"form-control\" formControlName=\"eje_oi\" \n                                     min=\"0\" max=\"180\" placeholder=\"0-180\">\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"row mt-3\">\n                        <div class=\"col-md-6\">\n                          <label class=\"form-label\">Adición</label>\n                          <input type=\"number\" class=\"form-control\" formControlName=\"adicion\" \n                                 step=\"0.25\" min=\"0\" max=\"3\" placeholder=\"0.00 - 3.00\">\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <!-- Observaciones Section -->\n                <div class=\"accordion-item\">\n                  <h2 class=\"accordion-header\">\n                    <button class=\"accordion-button collapsed\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#observacionesCollapse\">\n                      Observaciones\n                    </button>\n                  </h2>\n                  <div id=\"observacionesCollapse\" class=\"accordion-collapse collapse show\" data-bs-parent=\"#historiaAccordion\">\n                    <div class=\"accordion-body\">\n                      <div class=\"row\">\n                        <div class=\"col-md-6\">\n                          <label class=\"form-label\">Diagnóstico</label>\n                          <textarea class=\"form-control\" formControlName=\"diagnostico\" rows=\"3\" \n                                    placeholder=\"Diagnóstico del paciente\"></textarea>\n                        </div>\n                        <div class=\"col-md-6\">\n                          <label class=\"form-label\">Tratamiento</label>\n                          <textarea class=\"form-control\" formControlName=\"tratamiento\" rows=\"3\" \n                                    placeholder=\"Tratamiento recomendado\"></textarea>\n                        </div>\n                      </div>\n                      <div class=\"row mt-3\">\n                        <div class=\"col-md-6\">\n                          <label class=\"form-label\">Observaciones Generales</label>\n                          <textarea class=\"form-control\" formControlName=\"observaciones\" rows=\"3\" \n                                    placeholder=\"Observaciones adicionales\"></textarea>\n                        </div>\n                        <div class=\"col-md-6\">\n                          <label class=\"form-label\">Próxima Cita</label>\n                          <input type=\"date\" class=\"form-control\" formControlName=\"proxima_cita\">\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </form>\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancelar</button>\n            <button type=\"button\" class=\"btn btn-primary\" (click)=\"saveHistoria()\" [disabled]=\"historiaForm.invalid\">\n              Crear Historia\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- View History Modal -->\n    <div class=\"modal fade\" id=\"viewHistoriaModal\" tabindex=\"-1\">\n      <div class=\"modal-dialog modal-xl\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\">Historia Clínica</h5>\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n          </div>\n          <div class=\"modal-body\">\n            <div *ngIf=\"selectedHistoria\">\n              <div class=\"row mb-3\">\n                <div class=\"col-md-6\">\n                  <strong>Paciente:</strong> {{ getPacienteNombre(selectedHistoria.paciente_id) }}\n                </div>\n                <div class=\"col-md-6\">\n                  <strong>Fecha:</strong> {{ selectedHistoria.fecha_consulta | date:'dd/MM/yyyy' }}\n                </div>\n              </div>\n              \n              <div class=\"accordion\" id=\"viewHistoriaAccordion\">\n                <div class=\"accordion-item\">\n                  <h2 class=\"accordion-header\">\n                    <button class=\"accordion-button\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#viewCuestionarioCollapse\">\n                      Cuestionario\n                    </button>\n                  </h2>\n                  <div id=\"viewCuestionarioCollapse\" class=\"accordion-collapse collapse show\" data-bs-parent=\"#viewHistoriaAccordion\">\n                    <div class=\"accordion-body\">\n                      <p><strong>Motivo de Consulta:</strong> {{ selectedHistoria.motivo_consulta || 'No especificado' }}</p>\n                      <p><strong>Síntomas:</strong> {{ selectedHistoria.sintomas || 'No especificado' }}</p>\n                      <p><strong>Antecedentes:</strong> {{ selectedHistoria.antecedentes || 'No especificado' }}</p>\n                      <p><strong>Medicamentos:</strong> {{ selectedHistoria.medicamentos || 'No especificado' }}</p>\n                      <p><strong>Alergias:</strong> {{ selectedHistoria.alergias || 'No especificado' }}</p>\n                    </div>\n                  </div>\n                </div>\n                \n                <div class=\"accordion-item\">\n                  <h2 class=\"accordion-header\">\n                    <button class=\"accordion-button collapsed\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#viewAgudezaCollapse\">\n                      Agudeza Visual\n                    </button>\n                  </h2>\n                  <div id=\"viewAgudezaCollapse\" class=\"accordion-collapse collapse\" data-bs-parent=\"#viewHistoriaAccordion\">\n                    <div class=\"accordion-body\">\n                      <div class=\"row\">\n                        <div class=\"col-md-6\">\n                          <h6>Ojo Derecho (OD)</h6>\n                          <p><strong>Lejos:</strong> {{ selectedHistoria.av_od_lejos || 'No especificado' }}</p>\n                          <p><strong>Cerca:</strong> {{ selectedHistoria.av_od_cerca || 'No especificado' }}</p>\n                        </div>\n                        <div class=\"col-md-6\">\n                          <h6>Ojo Izquierdo (OI)</h6>\n                          <p><strong>Lejos:</strong> {{ selectedHistoria.av_oi_lejos || 'No especificado' }}</p>\n                          <p><strong>Cerca:</strong> {{ selectedHistoria.av_oi_cerca || 'No especificado' }}</p>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                \n                <div class=\"accordion-item\">\n                  <h2 class=\"accordion-header\">\n                    <button class=\"accordion-button collapsed\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#viewRefractivoCollapse\">\n                      Examen Refractivo\n                    </button>\n                  </h2>\n                  <div id=\"viewRefractivoCollapse\" class=\"accordion-collapse collapse\" data-bs-parent=\"#viewHistoriaAccordion\">\n                    <div class=\"accordion-body\">\n                      <div class=\"row\">\n                        <div class=\"col-md-6\">\n                          <h6>Ojo Derecho (OD)</h6>\n                          <p><strong>Esfera:</strong> {{ selectedHistoria.esfera_od || 'No especificado' }}</p>\n                          <p><strong>Cilindro:</strong> {{ selectedHistoria.cilindro_od || 'No especificado' }}</p>\n                          <p><strong>Eje:</strong> {{ selectedHistoria.eje_od || 'No especificado' }}</p>\n                        </div>\n                        <div class=\"col-md-6\">\n                          <h6>Ojo Izquierdo (OI)</h6>\n                          <p><strong>Esfera:</strong> {{ selectedHistoria.esfera_oi || 'No especificado' }}</p>\n                          <p><strong>Cilindro:</strong> {{ selectedHistoria.cilindro_oi || 'No especificado' }}</p>\n                          <p><strong>Eje:</strong> {{ selectedHistoria.eje_oi || 'No especificado' }}</p>\n                        </div>\n                      </div>\n                      <p><strong>Adición:</strong> {{ selectedHistoria.adicion || 'No especificado' }}</p>\n                    </div>\n                  </div>\n                </div>\n                \n                <div class=\"accordion-item\">\n                  <h2 class=\"accordion-header\">\n                    <button class=\"accordion-button collapsed\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#viewObservacionesCollapse\">\n                      Observaciones\n                    </button>\n                  </h2>\n                  <div id=\"viewObservacionesCollapse\" class=\"accordion-collapse collapse show\" data-bs-parent=\"#viewHistoriaAccordion\">\n                    <div class=\"accordion-body\">\n                      <p><strong>Diagnóstico:</strong> {{ selectedHistoria.diagnostico || 'No especificado' }}</p>\n                      <p><strong>Tratamiento:</strong> {{ selectedHistoria.tratamiento || 'No especificado' }}</p>\n                      <p><strong>Observaciones:</strong> {{ selectedHistoria.observaciones || 'No especificado' }}</p>\n                      <p><strong>Próxima Cita:</strong> {{ selectedHistoria.proxima_cita ? (selectedHistoria.proxima_cita | date:'dd/MM/yyyy') : 'No programada' }}</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\n            <button type=\"button\" class=\"btn btn-success\" (click)=\"downloadPDF(selectedHistoria?.id || 0)\">\n              <i class=\"fas fa-download\"></i> Descargar PDF\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n  styles: [`\n    .accordion-button:not(.collapsed) {\n      background-color: #e7f3ff;\n      color: #0c63e4;\n    }\n    \n    .accordion-button:focus {\n      box-shadow: none;\n      border-color: rgba(0, 0, 0, 0.125);\n    }\n    \n    .modal-xl {\n      max-width: 1200px;\n    }\n    \n    .table th {\n      background-color: #f8f9fa;\n      border-top: none;\n    }\n  `]\n})\nexport class HistoriasComponent implements OnInit {\n  historias: Historia[] = [];\n  pacientes: Paciente[] = [];\n  historiaForm: FormGroup;\n  searchForm: FormGroup;\n  selectedHistoria: Historia | null = null;\n\n  constructor(\n    private fb: FormBuilder,\n    private historiasService: HistoriasService,\n    private pacientesService: PacientesService,\n    private toastService: ToastService\n  ) {\n    this.historiaForm = this.fb.group({\n      paciente_id: ['', Validators.required],\n      fecha_consulta: ['', Validators.required],\n      motivo_consulta: [''],\n      sintomas: [''],\n      antecedentes: [''],\n      medicamentos: [''],\n      alergias: [''],\n      av_od_lejos: [''],\n      av_od_cerca: [''],\n      av_oi_lejos: [''],\n      av_oi_cerca: [''],\n      esfera_od: [''],\n      cilindro_od: [''],\n      eje_od: [''],\n      esfera_oi: [''],\n      cilindro_oi: [''],\n      eje_oi: [''],\n      adicion: [''],\n      observaciones: [''],\n      diagnostico: [''],\n      tratamiento: [''],\n      proxima_cita: ['']\n    });\n\n    this.searchForm = this.fb.group({\n      paciente_id: [''],\n      fecha_desde: [''],\n      fecha_hasta: ['']\n    });\n  }\n\n  ngOnInit(): void {\n    this.loadHistorias();\n    this.loadPacientes();\n  }\n\n  loadHistorias(): void {\n    this.historiasService.getHistorias().subscribe({\n      next: (data) => {\n        this.historias = data;\n      },\n      error: (error) => {\n        this.toastService.showError('Error al cargar historias clínicas');\n        console.error('Error loading historias:', error);\n      }\n    });\n  }\n\n  loadPacientes(): void {\n    this.pacientesService.getPacientes().subscribe({\n      next: (data) => {\n        this.pacientes = data;\n      },\n      error: (error) => {\n        console.error('Error loading pacientes:', error);\n      }\n    });\n  }\n\n  searchHistorias(): void {\n    const searchData = this.searchForm.value;\n    this.historiasService.searchHistorias(searchData).subscribe({\n      next: (data) => {\n        this.historias = data;\n      },\n      error: (error) => {\n        this.toastService.showError('Error en la búsqueda');\n        console.error('Error searching historias:', error);\n      }\n    });\n  }\n\n  clearSearch(): void {\n    this.searchForm.reset();\n    this.loadHistorias();\n  }\n\n  showCreateForm(): void {\n    this.historiaForm.reset();\n    this.historiaForm.patchValue({\n      fecha_consulta: new Date().toISOString().split('T')[0]\n    });\n    this.showModal('historiaModal');\n  }\n\n  saveHistoria(): void {\n    if (this.historiaForm.invalid) return;\n\n    const formData = this.historiaForm.value;\n    const createData: HistoriaCreateRequest = formData;\n    \n    this.historiasService.createHistoria(createData).subscribe({\n      next: () => {\n        this.toastService.showSuccess('Historia clínica creada correctamente');\n        this.hideModal('historiaModal');\n        this.loadHistorias();\n      },\n      error: (error) => {\n        this.toastService.showError('Error al crear historia clínica');\n        console.error('Error creating historia:', error);\n      }\n    });\n  }\n\n  viewHistoria(historia: Historia): void {\n    this.selectedHistoria = historia;\n    this.showModal('viewHistoriaModal');\n  }\n\n  downloadPDF(id: number): void {\n    this.historiasService.downloadPDF(id).subscribe({\n      next: (blob) => {\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = `historia_clinica_${id}.pdf`;\n        document.body.appendChild(a);\n        a.click();\n        window.URL.revokeObjectURL(url);\n        document.body.removeChild(a);\n      },\n      error: (error) => {\n        this.toastService.showError('Error al descargar PDF');\n        console.error('Error downloading PDF:', error);\n      }\n    });\n  }\n\n  getPacienteNombre(pacienteId: number): string {\n    const paciente = this.pacientes.find(p => p.id === pacienteId);\n    return paciente ? `${paciente.nombre} ${paciente.apellidos}` : 'Paciente no encontrado';\n  }\n\n  private showModal(modalId: string): void {\n    const modal = document.getElementById(modalId);\n    if (modal) {\n      const bootstrapModal = new (window as any).bootstrap.Modal(modal);\n      bootstrapModal.show();\n    }\n  }\n\n  private hideModal(modalId: string): void {\n    const modal = document.getElementById(modalId);\n    if (modal) {\n      const bootstrapModal = (window as any).bootstrap.Modal.getInstance(modal);\n      if (bootstrapModal) {\n        bootstrapModal.hide();\n      }\n    }\n  }\n}\n\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { environment } from '../../environments/environment';\nimport { Historia, HistoriaCreateRequest, HistoriaSearchRequest } from '../models/historia.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class HistoriasService {\n  private apiUrl = `${environment.apiUrl}/historias`;\n\n  constructor(private http: HttpClient) {}\n\n  getHistorias(): Observable<Historia[]> {\n    return this.http.get<Historia[]>(this.apiUrl);\n  }\n\n  getHistoriaById(id: number): Observable<Historia> {\n    return this.http.get<Historia>(`${this.apiUrl}/${id}`);\n  }\n\n  searchHistorias(searchData: HistoriaSearchRequest): Observable<Historia[]> {\n    const params = new URLSearchParams();\n    if (searchData.pacienteId) params.append('paciente_id', searchData.pacienteId.toString());\n    if (searchData.fecha_desde) params.append('fecha_desde', searchData.fecha_desde);\n    if (searchData.fecha_hasta) params.append('fecha_hasta', searchData.fecha_hasta);\n    \n    return this.http.get<Historia[]>(`${this.apiUrl}/search?${params.toString()}`);\n  }\n\n  createHistoria(historia: HistoriaCreateRequest): Observable<any> {\n    return this.http.post(this.apiUrl, historia);\n  }\n\n  downloadPDF(id: number): Observable<Blob> {\n    return this.http.get(`${this.apiUrl}/${id}/pdf`, { responseType: 'blob' });\n  }\n}\n\n"],"names":["CommonModule","ReactiveFormsModule","Validators","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","paciente_r1","id","ɵɵadvance","ɵɵtextInterpolate3","nombre","apellidos","documento","ɵɵlistener","HistoriasComponent_tr_61_Template_button_click_16_listener","historia_r3","ɵɵrestoreView","_r2","$implicit","ctx_r3","ɵɵnextContext","ɵɵresetView","viewHistoria","ɵɵelement","HistoriasComponent_tr_61_Template_button_click_18_listener","downloadPDF","ɵɵtextInterpolate","ɵɵpipeBind2","fecha_consulta","getPacienteNombre","paciente_id","ɵɵtextInterpolate2","ɵɵpipeBind3","motivo_consulta","length","diagnostico","proxima_cita","paciente_r5","ɵɵtextInterpolate1","selectedHistoria","sintomas","antecedentes","medicamentos","alergias","av_od_lejos","av_od_cerca","av_oi_lejos","av_oi_cerca","esfera_od","cilindro_od","eje_od","esfera_oi","cilindro_oi","eje_oi","adicion","tratamiento","observaciones","HistoriasComponent","constructor","fb","historiasService","pacientesService","toastService","historias","pacientes","historiaForm","group","required","searchForm","fecha_desde","fecha_hasta","ngOnInit","loadHistorias","loadPacientes","getHistorias","subscribe","next","data","error","showError","console","getPacientes","searchHistorias","searchData","value","clearSearch","reset","showCreateForm","patchValue","Date","toISOString","split","showModal","saveHistoria","invalid","formData","createData","createHistoria","showSuccess","hideModal","historia","blob","url","window","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","click","revokeObjectURL","removeChild","pacienteId","paciente","find","p","modalId","modal","getElementById","bootstrapModal","bootstrap","Modal","show","getInstance","hide","ɵɵdirectiveInject","i1","FormBuilder","i2","HistoriasService","i3","PacientesService","i4","ToastService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","HistoriasComponent_Template","rf","ctx","HistoriasComponent_Template_button_click_6_listener","HistoriasComponent_Template_form_ngSubmit_13_listener","ɵɵtemplate","HistoriasComponent_option_21_Template","HistoriasComponent_Template_button_click_37_listener","HistoriasComponent_tr_61_Template","HistoriasComponent_tr_62_Template","HistoriasComponent_Template_form_ngSubmit_71_listener","HistoriasComponent_option_79_Template","HistoriasComponent_div_80_Template","HistoriasComponent_div_85_Template","HistoriasComponent_Template_button_click_218_listener","HistoriasComponent_div_228_Template","HistoriasComponent_Template_button_click_232_listener","ɵɵclassProp","tmp_5_0","get","touched","tmp_7_0","tmp_8_0","tmp_9_0","i5","NgForOf","NgIf","SlicePipe","DatePipe","ɵNgNoValidate","NgSelectOption","ɵNgSelectMultipleOption","DefaultValueAccessor","NumberValueAccessor","SelectControlValueAccessor","NgControlStatus","NgControlStatusGroup","MinValidator","MaxValidator","FormGroupDirective","FormControlName","styles","environment","http","apiUrl","getHistoriaById","params","URLSearchParams","append","toString","post","responseType","ɵɵinject","HttpClient","factory","ɵfac","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}